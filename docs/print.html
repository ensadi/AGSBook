<!DOCTYPE HTML>
<html lang="en" class="sidebar-visible no-js light">
    <head>
        <!-- Book generated using mdBook -->
        <meta charset="UTF-8">
        <title>Game Design with AGS</title>
        
        <meta name="robots" content="noindex" />
        
        


        <!-- Custom HTML head -->
        


        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="Learn to create games with Adventure Game Studio">
        <meta name="viewport" content="width=device-width, initial-scale=1">
        <meta name="theme-color" content="#ffffff" />

        
        <link rel="icon" href="favicon.svg">
        
        
        <link rel="shortcut icon" href="favicon.png">
        
        <link rel="stylesheet" href="css/variables.css">
        <link rel="stylesheet" href="css/general.css">
        <link rel="stylesheet" href="css/chrome.css">
        
        <link rel="stylesheet" href="css/print.css" media="print">
        

        <!-- Fonts -->
        <link rel="stylesheet" href="FontAwesome/css/font-awesome.css">
        
        <link rel="stylesheet" href="fonts/fonts.css">
        

        <!-- Highlight.js Stylesheets -->
        <link rel="stylesheet" href="highlight.css">
        <link rel="stylesheet" href="tomorrow-night.css">
        <link rel="stylesheet" href="ayu-highlight.css">

        <!-- Custom theme stylesheets -->
        

        
    </head>
    <body>
        <!-- Provide site root to javascript -->
        <script type="text/javascript">
            var path_to_root = "";
            var default_theme = window.matchMedia("(prefers-color-scheme: dark)").matches ? "navy" : "light";
        </script>

        <!-- Work around some values being stored in localStorage wrapped in quotes -->
        <script type="text/javascript">
            try {
                var theme = localStorage.getItem('mdbook-theme');
                var sidebar = localStorage.getItem('mdbook-sidebar');

                if (theme.startsWith('"') && theme.endsWith('"')) {
                    localStorage.setItem('mdbook-theme', theme.slice(1, theme.length - 1));
                }

                if (sidebar.startsWith('"') && sidebar.endsWith('"')) {
                    localStorage.setItem('mdbook-sidebar', sidebar.slice(1, sidebar.length - 1));
                }
            } catch (e) { }
        </script>

        <!-- Set the theme before any content is loaded, prevents flash -->
        <script type="text/javascript">
            var theme;
            try { theme = localStorage.getItem('mdbook-theme'); } catch(e) { }
            if (theme === null || theme === undefined) { theme = default_theme; }
            var html = document.querySelector('html');
            html.classList.remove('no-js')
            html.classList.remove('light')
            html.classList.add(theme);
            html.classList.add('js');
        </script>

        <!-- Hide / unhide sidebar before it is displayed -->
        <script type="text/javascript">
            var html = document.querySelector('html');
            var sidebar = 'hidden';
            if (document.body.clientWidth >= 1080) {
                try { sidebar = localStorage.getItem('mdbook-sidebar'); } catch(e) { }
                sidebar = sidebar || 'visible';
            }
            html.classList.remove('sidebar-visible');
            html.classList.add("sidebar-" + sidebar);
        </script>

        <nav id="sidebar" class="sidebar" aria-label="Table of contents">
            <div class="sidebar-scrollbox">
                <ol class="chapter"><li class="chapter-item expanded affix "><a href="index.html">GAME DESIGN WITH AGS</a></li><li class="chapter-item expanded affix "><a href="title-page.html">Title Page</a></li><li class="chapter-item expanded affix "><a href="copyright.html">Copyright</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="preface/index.html">Preface</a></li><li class="chapter-item expanded affix "><a href="preface/dedication.html">Dedication</a></li><li class="chapter-item expanded affix "><a href="preface/forward.html">Forward</a></li><li class="chapter-item expanded affix "><a href="preface/acknowledgments.html">Acknowledgments</a></li><li class="spacer"></li><li class="chapter-item expanded "><a href="part1/part1.html"><strong aria-hidden="true">1.</strong> Part I - Getting Started</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter0/index.html"><strong aria-hidden="true">1.1.</strong> Chapter 0 (yes, we're programmers)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter0/introduction.html"><strong aria-hidden="true">1.1.1.</strong> Getting to Know (and love) AGS</a></li><li class="chapter-item expanded "><a href="part1/chapter0/history.html"><strong aria-hidden="true">1.1.2.</strong> History of the Adventure Game</a></li><li class="chapter-item expanded "><a href="part1/chapter0/about.html"><strong aria-hidden="true">1.1.3.</strong> About This Book</a></li><li class="chapter-item expanded "><a href="part1/chapter0/requirements.html"><strong aria-hidden="true">1.1.4.</strong> System Requirements</a></li><li class="chapter-item expanded "><a href="part1/chapter0/installing.html"><strong aria-hidden="true">1.1.5.</strong> Installing AGS</a></li><li class="chapter-item expanded "><a href="part1/chapter0/first_game.html"><strong aria-hidden="true">1.1.6.</strong> Creating Your First Game</a></li><li class="chapter-item expanded "><a href="part1/chapter0/running_first_game.html"><strong aria-hidden="true">1.1.7.</strong> Running Your Game</a></li><li class="chapter-item expanded "><a href="part1/chapter0/song.html"><strong aria-hidden="true">1.1.8.</strong> Long Beer Song</a></li><li class="chapter-item expanded "><a href="part1/chapter0/summary.html"><strong aria-hidden="true">1.1.9.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part1/chapter1/index.html"><strong aria-hidden="true">1.2.</strong> Chapter 1 - The AGS Editor</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter1/editor.html"><strong aria-hidden="true">1.2.1.</strong> The Editor</a></li><li class="chapter-item expanded "><a href="part1/chapter1/summary.html"><strong aria-hidden="true">1.2.2.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part1/chapter2/index.html"><strong aria-hidden="true">1.3.</strong> Chapter 2 - Sprites, Views, and Characters</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter2/sprites.html"><strong aria-hidden="true">1.3.1.</strong> Sprites</a></li><li class="chapter-item expanded "><a href="part1/chapter2/views.html"><strong aria-hidden="true">1.3.2.</strong> Views</a></li><li class="chapter-item expanded "><a href="part1/chapter2/characters.html"><strong aria-hidden="true">1.3.3.</strong> Characters</a></li><li class="chapter-item expanded "><a href="part1/chapter2/summary.html"><strong aria-hidden="true">1.3.4.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part1/chapter3/index.html"><strong aria-hidden="true">1.4.</strong> Chapter 3 - Rooms and Events</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter3/simple_bg.html"><strong aria-hidden="true">1.4.1.</strong> Simple Backgrounds</a></li><li class="chapter-item expanded "><a href="part1/chapter3/walkable_areas.html"><strong aria-hidden="true">1.4.2.</strong> Walkable Areas</a></li><li class="chapter-item expanded "><a href="part1/chapter3/scrolling_bg.html"><strong aria-hidden="true">1.4.3.</strong> Scrolling Backgrounds</a></li><li class="chapter-item expanded "><a href="part1/chapter3/animating_bg.html"><strong aria-hidden="true">1.4.4.</strong> Animating Backgrounds</a></li><li class="chapter-item expanded "><a href="part1/chapter3/walk_behinds.html"><strong aria-hidden="true">1.4.5.</strong> Walk-Behinds</a></li><li class="chapter-item expanded "><a href="part1/chapter3/regions.html"><strong aria-hidden="true">1.4.6.</strong> Regions</a></li><li class="chapter-item expanded "><a href="part1/chapter3/edges.html"><strong aria-hidden="true">1.4.7.</strong> Room Edges</a></li><li class="chapter-item expanded "><a href="part1/chapter3/lighting.html"><strong aria-hidden="true">1.4.8.</strong> Lighting</a></li><li class="chapter-item expanded "><a href="part1/chapter3/scaling.html"><strong aria-hidden="true">1.4.9.</strong> Scaling</a></li><li class="chapter-item expanded "><a href="part1/chapter3/transitions.html"><strong aria-hidden="true">1.4.10.</strong> Room Transitions</a></li><li class="chapter-item expanded "><a href="part1/chapter3/homework.html"><strong aria-hidden="true">1.4.11.</strong> HOMEWORK</a></li><li class="chapter-item expanded "><a href="part1/chapter3/summary.html"><strong aria-hidden="true">1.4.12.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part1/chapter4/index.html"><strong aria-hidden="true">1.5.</strong> Chapter 4 - Interacting with Your World</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter4/interaction.html"><strong aria-hidden="true">1.5.1.</strong> Interaction</a></li><li class="chapter-item expanded "><a href="part1/chapter4/hotspots.html"><strong aria-hidden="true">1.5.2.</strong> Hotspots</a></li><li class="chapter-item expanded "><a href="part1/chapter4/objects.html"><strong aria-hidden="true">1.5.3.</strong> Objects</a></li><li class="chapter-item expanded "><a href="part1/chapter4/inventory.html"><strong aria-hidden="true">1.5.4.</strong> Inventory Items</a></li><li class="chapter-item expanded "><a href="part1/chapter4/using_inventory.html"><strong aria-hidden="true">1.5.5.</strong> Using Inventory Items</a></li><li class="chapter-item expanded "><a href="part1/chapter4/npc.html"><strong aria-hidden="true">1.5.6.</strong> Non-Player Characters (NPC)</a></li><li class="chapter-item expanded "><a href="part1/chapter4/summary.html"><strong aria-hidden="true">1.5.7.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part1/chapter5/index.html"><strong aria-hidden="true">1.6.</strong> Chapter 5 - Sounds and Music (Make Some Noise!)</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter5/sound_effects.html"><strong aria-hidden="true">1.6.1.</strong> Sound Effects</a></li><li class="chapter-item expanded "><a href="part1/chapter5/bg_music.html"><strong aria-hidden="true">1.6.2.</strong> Background Music</a></li><li class="chapter-item expanded "><a href="part1/chapter5/speech.html"><strong aria-hidden="true">1.6.3.</strong> Speech</a></li><li class="chapter-item expanded "><a href="part1/chapter5/summary.html"><strong aria-hidden="true">1.6.4.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part1/chapter6/index.html"><strong aria-hidden="true">1.7.</strong> Chapter 6 - Some Other Stuff</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part1/chapter6/settings.html"><strong aria-hidden="true">1.7.1.</strong> General Settings</a></li><li class="chapter-item expanded "><a href="part1/chapter6/colors.html"><strong aria-hidden="true">1.7.2.</strong> Colors</a></li><li class="chapter-item expanded "><a href="part1/chapter6/cursors.html"><strong aria-hidden="true">1.7.3.</strong> Mouse Cursors</a></li><li class="chapter-item expanded "><a href="part1/chapter6/summary.html"><strong aria-hidden="true">1.7.4.</strong> Summary</a></li></ol></li></ol></li><li class="chapter-item expanded "><a href="part2/part2.html"><strong aria-hidden="true">2.</strong> Part II - Wishing You Were Here!</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part2/chapter7/index.html"><strong aria-hidden="true">2.1.</strong> Chapter 7 - Timers and Randomization</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part2/chapter7/timers.html"><strong aria-hidden="true">2.1.1.</strong> Timers</a></li><li class="chapter-item expanded "><a href="part2/chapter7/timers2.html"><strong aria-hidden="true">2.1.2.</strong> Timers, Take 2</a></li><li class="chapter-item expanded "><a href="part2/chapter7/randomize.html"><strong aria-hidden="true">2.1.3.</strong> Time to Randomize</a></li><li class="chapter-item expanded "><a href="part2/chapter7/summary.html"><strong aria-hidden="true">2.1.4.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part2/chapter8/index.html"><strong aria-hidden="true">2.2.</strong> Chapter 8 - Spoken Dialog</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part2/chapter8/dialog.html"><strong aria-hidden="true">2.2.1.</strong> Creating a Dialog</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part2/chapter8/fonts.html"><strong aria-hidden="true">2.2.1.1.</strong> Fonts</a></li></ol></li><li class="chapter-item expanded "><a href="part2/chapter8/ags_in_dialog.html"><strong aria-hidden="true">2.2.2.</strong> AGS Scripts inside Dialog Scripts</a></li><li class="chapter-item expanded "><a href="part2/chapter8/controlling_dialogs.html"><strong aria-hidden="true">2.2.3.</strong> Controlling Dialogs with AGS Scripts</a></li><li class="chapter-item expanded "><a href="part2/chapter8/jumping_dialogs.html"><strong aria-hidden="true">2.2.4.</strong> Jumping Between Dialogs</a></li><li class="chapter-item expanded "><a href="part2/chapter8/text_parser.html"><strong aria-hidden="true">2.2.5.</strong> Text Parser</a></li><li class="chapter-item expanded "><a href="part2/chapter8/summary.html"><strong aria-hidden="true">2.2.6.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part2/chapter9/index.html"><strong aria-hidden="true">2.3.</strong> Chapter 9 - Cutscenes</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part2/chapter9/starting_ending.html"><strong aria-hidden="true">2.3.1.</strong> Starting and Ending Cutscenes</a></li><li class="chapter-item expanded "><a href="part2/chapter9/game_intro.html"><strong aria-hidden="true">2.3.2.</strong> Creating a Game Intro and End Credits</a></li><li class="chapter-item expanded "><a href="part2/chapter9/summary.html"><strong aria-hidden="true">2.3.3.</strong> Summary</a></li></ol></li><li class="chapter-item expanded "><a href="part2/chapter10/index.html"><strong aria-hidden="true">2.4.</strong> Chapter 10 - Advanced Topics</a></li><li><ol class="section"><li class="chapter-item expanded "><a href="part2/chapter10/nonwindows.html"><strong aria-hidden="true">2.4.1.</strong> Running on non-Windows Systems</a></li><li class="chapter-item expanded "><a href="part2/chapter10/masks.html"><strong aria-hidden="true">2.4.2.</strong> Importing masks for walkable areas and walk-behinds</a></li><li class="chapter-item expanded "><a href="part2/chapter10/lip_sync.html"><strong aria-hidden="true">2.4.3.</strong> Lip Sync</a></li><li class="chapter-item expanded "><a href="part2/chapter10/translations.html"><strong aria-hidden="true">2.4.4.</strong> Translations</a></li><li class="chapter-item expanded "><a href="part2/chapter10/modules_plugins.html"><strong aria-hidden="true">2.4.5.</strong> Modules and Plug-ins</a></li><li class="chapter-item expanded "><a href="part2/chapter10/lighting.html"><strong aria-hidden="true">2.4.6.</strong> Lighting</a></li><li class="chapter-item expanded "><a href="part2/chapter10/guis.html"><strong aria-hidden="true">2.4.7.</strong> GUIs</a></li><li class="chapter-item expanded "><a href="part2/chapter10/mirror_effect.html"><strong aria-hidden="true">2.4.8.</strong> Mirror Effect</a></li><li class="chapter-item expanded "><a href="part2/chapter10/earthquake.html"><strong aria-hidden="true">2.4.9.</strong> EARTHQUAKE!!!!!!!!!</a></li><li class="chapter-item expanded "><a href="part2/chapter10/easter_eggs.html"><strong aria-hidden="true">2.4.10.</strong> Easter Eggs - Wedding dress on Dork!!!!</a></li><li class="chapter-item expanded "><a href="part2/chapter10/summary.html"><strong aria-hidden="true">2.4.11.</strong> Summary</a></li><li class="spacer"></li></ol></li></ol></li><li class="chapter-item expanded "><a href="epilogue/glossary.html">Glossary</a></li><li class="chapter-item expanded affix "><a href="epilogue/bibliography.html">Bibliography</a></li><li class="chapter-item expanded affix "><a href="epilogue/index.html">Index</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><div>Appendices - Hallelujah brother</div></li><li class="chapter-item expanded affix "><a href="appendices/scripting.html">I - Scripting concepts and basics</a></li><li class="chapter-item expanded affix "><a href="appendices/dialog_scripting.html">II - Dialog Scripting</a></li><li class="chapter-item expanded affix "><a href="appendices/global_variables.html">III - If we don't hit global variables (or even if we do) we might need to elaborate here.</a></li><li class="chapter-item expanded affix "><a href="appendices/plugins.html">IV - Plugins</a></li><li class="spacer"></li><li class="chapter-item expanded affix "><a href="feedback.html">Feedback</a></li><li class="chapter-item expanded affix "><a href="redirects/docs.html">AGS Manual</a></li><li class="chapter-item expanded affix "><a href="redirects/mdbook.html">Built with mdBook</a></li></ol>
            </div>
            <div id="sidebar-resize-handle" class="sidebar-resize-handle"></div>
        </nav>

        <div id="page-wrapper" class="page-wrapper">

            <div class="page">
                
                <div id="menu-bar-hover-placeholder"></div>
                <div id="menu-bar" class="menu-bar sticky bordered">
                    <div class="left-buttons">
                        <button id="sidebar-toggle" class="icon-button" type="button" title="Toggle Table of Contents" aria-label="Toggle Table of Contents" aria-controls="sidebar">
                            <i class="fa fa-bars"></i>
                        </button>
                        <button id="theme-toggle" class="icon-button" type="button" title="Change theme" aria-label="Change theme" aria-haspopup="true" aria-expanded="false" aria-controls="theme-list">
                            <i class="fa fa-paint-brush"></i>
                        </button>
                        <ul id="theme-list" class="theme-popup" aria-label="Themes" role="menu">
                            <li role="none"><button role="menuitem" class="theme" id="light">Light (default)</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="rust">Rust</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="coal">Coal</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="navy">Navy</button></li>
                            <li role="none"><button role="menuitem" class="theme" id="ayu">Ayu</button></li>
                        </ul>
                        
                        <button id="search-toggle" class="icon-button" type="button" title="Search. (Shortkey: s)" aria-label="Toggle Searchbar" aria-expanded="false" aria-keyshortcuts="S" aria-controls="searchbar">
                            <i class="fa fa-search"></i>
                        </button>
                        
                    </div>

                    <h1 class="menu-title">Game Design with AGS</h1>

                    <div class="right-buttons">
                        
                        <a href="print.html" title="Print this book" aria-label="Print this book">
                            <i id="print-button" class="fa fa-print"></i>
                        </a>
                        
                        
                        <a href="https://github.com/ensadi/AGSBook" title="Git repository" aria-label="Git repository">
                            <i id="git-repository-button" class="fa fa-github"></i>
                        </a>
                        
                    </div>
                </div>

                
                <div id="search-wrapper" class="hidden">
                    <form id="searchbar-outer" class="searchbar-outer">
                        <input type="search" name="search" id="searchbar" name="searchbar" placeholder="Search this book ..." aria-controls="searchresults-outer" aria-describedby="searchresults-header">
                    </form>
                    <div id="searchresults-outer" class="searchresults-outer hidden">
                        <div id="searchresults-header" class="searchresults-header"></div>
                        <ul id="searchresults">
                        </ul>
                    </div>
                </div>
                

                <!-- Apply ARIA attributes after the sidebar and the sidebar toggle button are added to the DOM -->
                <script type="text/javascript">
                    document.getElementById('sidebar-toggle').setAttribute('aria-expanded', sidebar === 'visible');
                    document.getElementById('sidebar').setAttribute('aria-hidden', sidebar !== 'visible');
                    Array.from(document.querySelectorAll('#sidebar a')).forEach(function(link) {
                        link.setAttribute('tabIndex', sidebar === 'visible' ? 0 : -1);
                    });
                </script>

                <div id="content" class="content">
                    <main>
                        <p><a href="images/cover-large.jpg"><img src="images/cover.jpg" alt="" /></a></p>
<!-- Named page links below: /-->
<h1><a class="header" href="#game-design-with-ags" id="game-design-with-ags">GAME DESIGN WITH AGS</a></h1>
<h2><a class="header" href="#second-edition" id="second-edition">Second Edition</a></h2>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
by Dave Ensminger and A. G. Madi
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<br/>
<p><a href="https://ensadi.com/"><img src="./images/ensadilogo.png" alt="publisher logo" /></a></p>
<!-- Named page links below: /-->
<br/>
<br/>
<br/>
<p>First online electronic edition published: 2021</p>
<br/>
<br/>
<br/>
<p>© 2021, Ensadi LLC</p>
<br/>
<br/>
<br/>
<h1><a class="header" href="#preface" id="preface">Preface</a></h1>
<h1><a class="header" href="#dedication" id="dedication">Dedication</a></h1>
<h1><a class="header" href="#forward" id="forward">Forward</a></h1>
<h1><a class="header" href="#acknowledgments" id="acknowledgments">Acknowledgments</a></h1>
<h1><a class="header" href="#part-i---getting-started" id="part-i---getting-started">Part I - Getting Started</a></h1>
<h1><a class="header" href="#chapter-0-yes-were-programmers" id="chapter-0-yes-were-programmers">Chapter 0 (yes, we're programmers)</a></h1>
<h1><a class="header" href="#getting-to-know-and-love-ags" id="getting-to-know-and-love-ags">Getting to Know (and love) AGS</a></h1>
<h1><a class="header" href="#introduction" id="introduction">Introduction</a></h1>
<p>AGS, or Adventure Game Studio, is a feature-rich application that allows you to create point-and-click adventure games.  If you remember games from the late 1980s and early 1990s like <em>King's Quest</em>, <em>Quest for Glory</em>, <em>Monkey Island</em>, and <em>Maniac Mansion</em> (just to name a few) then you know the types of games we're talking about.  AGS provides you with an simple, intuitive interface that you can use to create games just like those, and, with enough creativity, you can use AGS to make games that equal (if not surpass) those professional quality games!</p>
<p>AGS was created by Chris Jones in 1997 as &quot;Adventure Creator.&quot;  Back then, Adventure Creator was an MS-DOS-based program, it didn't have mouse support and it only allowed very primitive graphics.  Step by step, little by little, Adventure Creator evolved from this initial, featureless program into Adventure Game Studio, which now supports high-res graphics, its games can run on multiple operating systems, it has fully integrated sound and video, and it can support thousands of sprites, hundreds of rooms, unlimited characters, and even customized mouse cursors, GUIs, and other interface elements.  Plus, AGS has an extremely active user community, so help, criticism, and play testers are never more than a forum post away.  And Chris Jones still supports AGS and provides updates and patches to it on a regular basis.</p>
<p>How much does AGS cost?  That's the best part.  It's FREE!  Isn't that the best kind of hobby to get into?  Even if you decide to write a commercial game for profit, AGS is still free*!</p>
<p>* AGS itself is 100% free, but some of the internal pieces of AGS (like the MP3 decoder, the graphics and sound subsystems, some of the fonts that AGS uses, etc.) weren't written by Chris Jones, and therefore have their own license agreements that you would need to consider if you released your game for profit.  For more information you can visit the AGS license page at <a href="https://www.adventuregamestudio.co.uk/site/ags/legal/" target="_blank">https://www.adventuregamestudio.co.uk/site/ags/legal/</a> </p>
<p>Hundreds, if not thousands, of games have been created with AGS over the years, and they range from very amateur games on the low end, to professional quality commercial games on the high end.  Here are just a few examples of games that were made using AGS:</p>
<h2><a class="header" href="#trilbys-notes" id="trilbys-notes">Trilby's Notes</a></h2>
<p><img src="part1/chapter0/../../images/trilbysnotes.png" alt="" /></p>
<p>Trilby's Notes (<a href="http://www.fullyramblomatic.com/notes" target="_blank">http://www.fullyramblomatic.com/notes</a>) was created by Ben Croshaw, aka Yahtzee, and is part of a series of adventure games, collectively known as &quot;Chzo Mythos.&quot; The series consists of four games, with Trilby's Notes being the third installment. Unlike most games written with AGS, Trilby's Notes is unique in that the player doesn't use a mouse to control the game.  Instead, the action is controlled much like the early Sierra games, where the player moves the character with the arrow keys and types commands he or she wishes the character to perform.</p>
<h2><a class="header" href="#reality-on-the-norm-series" id="reality-on-the-norm-series">Reality on the Norm series</a></h2>
<p><img src="part1/chapter0/../../images/realityonthenorm.png" alt="" /></p>
<p>Easily the largest series of games written with AGS, Reality on the Norm (RoN) (<a  href="http://www.realityonthenorm.info" target="_blank">http://www.realityonthenorm.info</a>) is a collaborative collection of games where anyone can create a game and add it to the series.  The series takes place in a fictional place called Reality on the Norm, and the series has several recurring characters and themes.  The first game was called &quot;Lunchtime of the Damned&quot; (created by none other than Ben Croshaw and it was about a young kid named Davy Jones and his zombie.  Since that first game, no less than 90 games have been created in the RoN universe, written and created by dozens of people, and characters ranging from Death to Bill Cosby to David Hasselhoff to Commander Keen have visited RoN.</p>
<h2><a class="header" href="#agdi-games" id="agdi-games">AGDI Games</a></h2>
<p><img src="part1/chapter0/../../images/adgi.png" alt="" /></p>
<p>As you can imagine, the quality of games written with AGS varies widely from game to game.  Few, however, have the same feel as a professionally written game (which is to be expected, since most AGS users don't have the same production budget as a professional game company!) Games from AGDI (Anonymous Game Developers Interactive) break that typical mold, however.  AGDI (<a href="http://www.agdinteractive.com" target="_blank">http://www.agdinteractive.com</a>) is a group of individuals who are &quot;determined to revive the adventure game genre.&quot; They make beautifully crafted adventure games, containing stunning artwork, professional quality music, and talented voice acting.  AGDI has released three remakes of classic Sierra games: <em>King's Quest I</em>, <em>King's Quest II</em>, and <em>Quest for Glory II</em>. These games are truly works of art and are just as much fun to play as their original counterparts were.  Each game stays true to the original classic, but adds new plot elements, puzzles, and in some cases even new characters to meet.  AGDI even got Josh Mandel, the voice of King Graham in the original King's Quest games from Sierra, to reprise his role as King Graham in both of their remakes.  AGDI also has made an original game called <em>Al Emmo and the Lost Dutchman's Mine</em>. All these games were created using AGS.</p>
<h1><a class="header" href="#history-of-the-adventure-game" id="history-of-the-adventure-game">History of the Adventure Game</a></h1>
<h2><a class="header" href="#video-games" id="video-games">Video Games</a></h2>
<p>Before there were adventure games, people entertained themselves by drawing on cave walls and playing drums by the campfire.  Shortly after this, someone invented a computer and decided that it might be fun to play games on it.</p>
<p><em>Computer Space</em> was the first commercial video game, released in 1971, and boy was it a doozy.  It was a coin-operated machine that housed a 15-inch, black-and-white television and four input buttons.  You dropped in a quarter, and then you had 90 seconds of riveting gameplay where you controlled your spaceship around the screen and tried to shoot as many UFOs as you could, gaining a point for each UFO you hit.  After the 90 seconds was up, if you had a bigger score than the UFOs did, the game would give you an additional 90 seconds and then you would start again.  Fun!  Just make sure you didn't hit more than 9 UFOs, because if you did your score would reset back to 0 (counting to 10 was HARD).  Gameplay would continue like this forever, or until you got tired and had to go back to hunting and gathering.</p>
<p>Games got a bit more exciting in 1972 with the release of everyone's favorite computer tennis game, <em>Pong</em>. This game was based on the Magnavox Odyssey console, which, unlike <em>Computer Space</em> before it , was a console game that people could buy and play at home on their own TVs.  <em>Pong</em> connected to a television and had two paddles for input.  The graphics were made up of a line drawn vertically down the center of the screen, two smaller vertical lines on the left and right sides of the screen, and a dot which represented a ball (graphics artists had it easy back then).  There were two sets of numbers at the top of the screen for the players' scores.  The &quot;ball&quot; moved around and the players would bat it back and forth and hope the other player missed it, in which case a point would be awarded.  Simple?  Yes.  Popular?  Very!</p>
<p><img src="part1/chapter0/../../images/pong.png" alt="" /></p>
<p>This was basically the only choice of computer games at the time.  These games were considered &quot;fun&quot; at the time, although there wasn't much <em>interaction</em> to them. There were no characters to speak of, little or no story, and certainly no real challenge aside from being able to press some buttons.  But things were about to change.</p>
<h2><a class="header" href="#the-first-adventure-game" id="the-first-adventure-game">The First Adventure Game</a></h2>
<p>Will Crowther, it could be argued, was the father of the Adventure Game.  In 1975, while working as a computer programmer for Bolt Beranek and Newman, he decided he would write a computer game for his two daughters.  Crowther called his game <em>Collosal Cave</em>, and it was based on his adventures exploring Mammoth Cave in Kentucky.  The game, by today's standards, was very primitive and simple, consisting only of a textual interface and input system, where the player would type commands into the computer and read the result on the screen.  Since he designed <em>Collosal Cave</em> for his young daughters, and also wanted it to appeal to the general population (not just computer geeks), he programmed it to understand the commands entered by the user in a &quot;natural language&quot; kind of way.  The player could instruct the game to do things by using 1- or 2-word commands.  For example, if a player wanted to go north to the next section of the cave, she could simply type &quot;go north&quot; and the program would understand and process the request (alternatively, she could type &quot;walk north&quot; or &quot;go up&quot;.) A player who wanted to look at the wall could type &quot;examine wall.&quot;</p>
<p>The game was passed from person to person throughout the fledgling Internet (which at that time consisted of only a handful of computers -- nothing like the gargantuan network we know and love today,) until it became fairly ubiquitous among computer geeks.  After all, people were hungry for a little computer entertainment, since programs then usually consisted of cryptic user interfaces that were difficult to understand (NLS, anyone?) and computer games were practically unheard of.</p>
<p>The next year, in 1976, a guy by the name of Don Woods found the game on one of the computers at Stanford Unversity and, after corresponding with Crowther, greatly expanded the game.  Later that same year, it was ported from FORTRAN to C and and distributed by DECUS (Digital Equipment Corporation User Group) as <em>Colossal Cave Adventure</em>, or simply, <em>Adventure</em>.</p>
<p>Voila!  The <em>Adventure</em> Game was born!</p>
<p>A couple of years after <em>Adventure</em>, four programmers at MIT took this idea of an &quot;interactive fiction&quot; adventure game and developed a game similar in design called <em>Dungeon</em>.  At least, that was what they had planned on calling it.  The game ended up being called <em>Zork</em>, a name which was used at the time to refer generically to an unfinished program.  The name kinda stuck, and in 1979 they founded a company called Infocom and published the game as <em>Zork I: The Great Underground Empire</em> in 1980. Infocom later went on to publish many more text adventure games throughout the 1980s, including no fewer than 10 additional games in the Zork series.</p>
<p>Text adventures were all well and good, but eventually computer processors got faster, and computer video got more advanced.  Text adventures advanced a bit in the early 80s to the point where the player was presented with a static &quot;background&quot; image. In 1980, the newly founded On-Line Systems (later to become Sierra On-Line) released just such a game called <em>Mystery House</em>, and later that same year they produced the first color adventure game, <em>Wizard and the Princess</em>.  These games were still basically text adventure games, however.  Even though there were graphics, the graphics didn't animate, and the player had no real interaction with the graphical environment.  It was more of a supplement to the text, not the other way around.</p>
<p>This changed in 1984 when Sierra On-Line released the very first truly <em>graphical</em> adventure game: <em>King's Quest: Quest for the Crown</em>.  For the first time, a player could control the character on the screen in a (pseudo) 3D environment (at least, it was marketed that way, as a &quot;3D Animated Adventure&quot;.) In <em>King's Quest</em>, the player takes the role of Sir Graham, who is sent by the King of Daventry to recover the kingdom's three most precious magical items: the Magic Mirror that forsees the future, the Magic Shield of invincibility, and the Magic Chest that is always filled with gold.  Along the way, Graham meets with several characters from fairy tales (Rumplestiltskin, a dragon, and the witch from Hansel and Gretel, to name a few) and in the end, Sir Graham inherits the crown to become King Graham, and ends up being the protagonist in two of the seven subsequent <em>King's Quest</em> adventures. <em>King's Quest</em> was not an instant success; however, it did well enough that Sierra released a sequel just a year later and the graphical adventure game genre took off.  They subsequently created classics like <em>Police Quest</em>, <em>Space Quest</em>, <em>Quest for Glory</em>, and <em>Leisure Suit Larry</em>, among others.</p>
<p><img src="part1/chapter0/../../images/kq.png" alt="" /></p>
<p>These text-based adventure games soon evolved into mouse-controlled games, where, for example, the player didn't have to type commands like &quot;open the door&quot; but could instead use the mouse to click on the door to open it.  Sierra created games like this, as did Lucasfilm, George Lucas's movie production company.  Lucasfilm teamed up with Atari to produce games under the &quot;Lucasfilm Games&quot; label, which eventually became <em>LucasArts</em>.  They created very successful, well-known adventure games like <em>Maniac Mansion</em>, <em>The Secret of Monkey Island</em>, and <em>Indiana Jones and the Fate of Atlantis</em>, which all used this more updated mouse-based interface.</p>
<h1><a class="header" href="#about-this-book" id="about-this-book">About This Book</a></h1>
<p>This book aims to teach you how to write an adventure game using AGS, from stem to stern, using a game that we designed and wrote specifically for the purpose of this book.  The game you'll be writing in this book is called &quot;Foxy's Quest&quot; and through it, we try to walk you through each aspect of a typical adventure game, using hands-on examples and screenshots along the way so you won't get lost.  The book is designed as a self-paced tutorial, which you should read sequentially, starting at <a href="part1/chapter0/../chapter1">Chapter 1</a> and working your way all the way through.  After you've read the whole book and you've done all the examples, we present to you, you'll be well-prepared to tackle your own adventure game!</p>
<p>Much of the process of making an AGS game involves dealing with the graphical user interface of the AGS Editor, with all of its menus, buttons, and panels.  However, a significant portion of the process involves writing script code to tell AGS how to handle situations and events that come up in your game.  For this reason, we'll teach you how to write code using AGS's scripting language.  If you've never done any programming before, don't worry.  We don't assume that you have any programming experience.  However, if you do have some experience, especially with C/C++, Java, or C#, then learning the AGS scripting syntax will be a piece of cake.</p>
<p>With a little determination and motivation, you will be on your way to your own adventure game in just a short time.  So, sit back, grab a computer, and follow along with us on your AGS journey!</p>
<h2><a class="header" href="#book-conventions" id="book-conventions">Book Conventions</a></h2>
<p>We will be using certain syntax and conventions throughout this book to make it easier to read.</p>
<ul>
<li>Anything that relates to AGS script (source code and function names) will be printed in a code block similar to this:</li>
</ul>
<pre><code>// Say hello to everyone.
Display(&quot;Hello to everyone&quot;);
</code></pre>
<ul>
<li>Anything that you should click on in the AGS editor will be in bold and will look like the following:<br>
        Click the <strong>Change...</strong> button to change the background...</li>
<li>Any folder names or file names will be italicized as in the following two examples:<br>
        Click <strong>Create sub-folder</strong> and call this folder <em>FoxyMonk</em>.<br>
        There you will see a property called <code>StartingRoom</code><br>
        Or, ...find the file called <em>simple_bg.bmp</em>...</li>
<li>Every once in a while, we'll have some rather useless information that's not good enough for <em>Jeopardy</em>, but could be useful to some of you. We'll put this information into a side note.</li>
</ul>
<blockquote>
<p><strong>Side Note:</strong> This is what a side note would look like.</p>
</blockquote>
<ul>
<li>And finally, for things that we're not sure what to do with, we'll italicize them.  Oh, and then we'll make them bold and underline them too.  Oh, Oh, and we'll put them in quotes!  Kind of like:<br>
        If you've ever read the book that was later made into a movie that is also a keyword in a programming language and a newspaper article, called <u><em><strong>&quot;Main&quot;</strong></em></u> you'd understand what we mean.</li>
</ul>
<h2><a class="header" href="#about-the-game-were-going-to-make" id="about-the-game-were-going-to-make">About The Game We're Going to Make</a></h2>
<p>Some of you (ok all of you) will think that our game doesn't make sense.  Well, it all depends on what sense you want to make.  Making sense is only important for your nose. Otherwise, it would be your hands or eyes.  But whatever you decide, it should make sense to you, and that it does.</p>
<h1><a class="header" href="#system-requirements" id="system-requirements">System Requirements</a></h1>
<p>The version of AGS that we will be using throughout this book is 3.5.0 which is the latest version while we're writing this, so everything here will work if you are using that version of the editor.  You may use the newest version available even if it's newer than our version, and we'll promise not to hunt you down and pour hot sauce in your eyes, but some of the features of your fancy new version might be different from ours.  So, you've been warned.  Beware.  (We might decide to use Heinz 57 instead.)</p>
<p>AGS Editor will run on Windows 10, Windows 8, Windows 7, and Windows Vista and requires the .NET Framework 4.5 or later.   If you don't know what .NET Framework is, then you most likely don't need to worry about it, since your system probably has it installed anyway (it comes preinstalled with Windows these days.) You'll also need the <a href="https://download.microsoft.com/download/6/A/A/6AA4EDFF-645B-48C5-81CC-ED5963AEAD48/vc_redist.x86.exe">Microsoft Visual C++ Redistributable for Visual Studio 2015</a>.</p>
<p>The games that you create using AGS have a different set of requirements (which makes sense when you think about it, since the game is a different program from the editor that you used to create the game).  AGS games will run on Windows of course (.NET Framwork is not required for the games themselves), and they will run on other systems as well, like Linux and Mac OS with a little tweaking.  We'll get into that in more detail in <a href="part1/chapter0/../../part2/chapter10/nonwindows.html">Part 2</a> of the book, so hang tight.</p>
<h1><a class="header" href="#installing-ags" id="installing-ags">Installing AGS</a></h1>
<p>Installing the AGS Editor is a simple matter of downloading it from <a href="http://www.adventuregamestudio.co.uk/">http://www.adventuregamestudio.co.uk/</a>. Click on the download link (see <a href="part1/chapter0/installing.html#figure01">Figure 0.1</a>) and get the latest installer.  Double-click the installer and follow the instructions.  If you have any problems, then you might be missing the .NET Framework. If you don't have the .NET Framework for some reason, then run a Windows Update on your computer. If you still don't see it there, then you probably have it or you're running Windows ME or something ridiculous.  (UPGRADE NOW!)  You can also check your Add/Remove Programs under Control Panel for .NET Framework.  If you're running Windows Vista or later, then you should already have the .NET Framework installed.</p>
<p><a name="figure01"></a>
<span><img src="part1/chapter0/../../images/agssite.png" alt="" /><br><strong>Figure 0.1: The AGS Website.  The download link is circled in red.</strong></span></p>
<h1><a class="header" href="#creating-your-first-game" id="creating-your-first-game">Creating Your First Game</a></h1>
<p>After successfully installing the AGS Editor, you should be able to easily find it in you Windows Start menu.  Running the editor will show an AGS splash screen and then the IDE appears as in <a href="part1/chapter0/first_game.html#figure02">Figure 0.2</a>.</p>
<p><a name="figure02"></a>
<span><img src="part1/chapter0/../../images/agside.png" alt="" /><br><strong>Figure 0.2: AGS IDE</strong></span></p>
<p>You should see three options in the wizard that pops up.  More than likely, you don't already have any games to open (otherwise you wouldn't need this book.) Choose the default option to start a new game and click the <strong>Continue</strong> button. The Start New Game wizard will now guide you (<a href="part1/chapter0/first_game.html#figure03">Figure 0.3</a>).  After clicking <strong>Next</strong>, you should see three templates to choose from (<a href="part1/chapter0/first_game.html#figure04">Figure 0.4</a>).</p>
<p><a name="figure03"></a>
<img src="part1/chapter0/../../images/startgame1.png" alt="" /><br><strong>Figure 0.3: Start New Game Wizard</strong>
<br> <br>
<a name="figure04"></a>
<img src="part1/chapter0/../../images/startgame2.png" alt="" /><br><strong>Figure 0.4: Start New Game Wizard</strong></p>
<p>New games created with AGS are always based on templates.  Templates are basically skeletons for games.  You choose your skeleton and build around it.</p>
<ul>
<li><strong>Sierra Style</strong> is the easiest one to get started with.  Choosing this template will create a game that provides you with some default graphics, such as an example character, as well as graphics for the default icons and buttons.  It will also include some actions like <em>Save</em>, <em>Restart</em>, and <em>Quit</em>.  This is the template we'll be using in this book.</li>
<li><strong>Empty Game</strong> will create a game that contains no graphics, GUIs, sounds, rooms, scripts, etc.  It basically gives you nothing, in case you just want to create a brand-new game entirely from scratch. Since we want the graphics and GUIs and extra goodies that are in the <strong>Default Game</strong> template, and since the process of creating graphics isn't the focus of this book anyway, we won't be using this template at all.</li>
<li><strong>Verb Coin</strong> allows you to create a game with a different interface than the one in the default template.  Verb coin can be interesting to work with, but we will not be talking about it in this book.</li>
</ul>
<blockquote>
<p><strong>Side Note:</strong> If you'd like to know more about verb coin you can create a game with the Verb Coin template and try it out.  The Verb Coin template attempts to emulate the interface style used by some of the LucasArts games, like <em>Full Throttle</em> and <em>The Curse of Monkey Island</em>, as opposed to the default icon-based interface that AGS uses, which is based on the Sierra On-Line adventures like <em>King's Quest IV</em>, <em>Police Quest 3</em>, and <em>Freddy Pharkas, Frontier Pharmacist</em>, to name a few.</p>
</blockquote>
<blockquote>
<p><strong>Side Note:</strong> It's important to note that AGS doesn't limit you to creating games that only use the default interface or the Verb Coin interface, despite the fact that these are the only templates you can choose from.  Part of what makes AGS so compelling is the fact that you can customize almost every aspect of the game, including the interface, graphics, and sound.  So, if you want a game that has a particular interface that's not in the templates, just go ahead and create your game using the Default template, and then you can tweak it and change it however you want.  Just about every type of adventure game interface has been done with AGS, from the LucasArts SCUMM interface used in <em>The Secret of Monkey Island</em> and <em>Maniac Mansion</em> to the text-based interface used in the early Sierra adventures; from the interface in <em>Myst</em> to the type of interface in games from the Adventure Company.  It can all be done with AGS, but you might have to customize things a little using the know-how you gain from this book.</p>
</blockquote>
<p>Choose the <strong>Sierra Style</strong> template and click <strong>Next</strong>. Something like <a href="part1/chapter0/first_game.html#figure05">Figure 0.5</a> should appear. Here you should give your game a name.  You can change this later though if you don't like it.  You'll also need to give it a file name to use and a folder to put your game in.  Typically, your file name and the name of your game will be the same.  We're calling our game &quot;My First Game&quot; for now.</p>
<p><a name="figure05"></a>
<span><img src="part1/chapter0/../../images/startgame3.png" alt="" /><br><strong>Figure 0.5: New Game Information</strong></span></p>
<p>And now for the final click.  Yes, click <strong>Finish</strong>. Congratulations, you've created your first AGS game.  It doesn't do much right now, but believe it or not, your first game is actually playable right now!</p>
<h1><a class="header" href="#running-your-game" id="running-your-game">Running Your Game</a></h1>
<p>Let's see what this game can do.  You should see a window similar to the one in <a href="part1/chapter0/running_first_game.html#figure06">Figure 0.6</a>. We'll discuss the editor interface in a moment, but for now let's run this game we just created.  Click on the circle with the green arrow in it. It looks like <a href="part1/chapter0/running_first_game.html#figure07">Figure 0.7</a>.</p>
<p><a name="figure06"></a>
<span><img src="part1/chapter0/../../images/editor.png" alt="" /><br><strong>Figure 0.6: The Editor</strong></span></p>
<p><a name="figure07"></a>
<span><img src="part1/chapter0/../../images/runbutton.png" alt="" /><br><strong>Figure 0.7: The Run Button</strong></span></p>
<p>You'll see some dialog boxes pop up and then, Voila! You have your first Adventure Game running.  The game doesn't do much yet, but as you'll see, there is already a lot of functionality built in for you.  You will see the main character wearing a blue suit and the mouse cursor will look like a shoe (<a href="part1/chapter0/running_first_game.html#figure08">Figure 0.8</a>). This shoe cursor is used to make the main character walk around the screen.  Try clicking around the screen now and the character will walk to wherever you clicked.  Move your mouse cursor to the top of the screen and an in-game menu will pop up (<a href="part1/chapter0/running_first_game.html#figure09">Figure 0.9</a>).</p>
<blockquote>
<p><strong>Side Note:</strong> You might be wondering why the game is running inside a window instead of full screen.  This is because we ran the game in <em>Debug Mode</em> (by clicking the green button in <a href="part1/chapter0/running_first_game.html#figure07">Figure 0.7</a>) which will always run in a window. <em>Debug Mode</em> is the mode you'll be running in while you are designing your game, and the thought is, while you're creating your game you don't need to see it in full screen all the time.  Your users, though, will be able to run the game in all its full screen glory when you distribute it.  There are times when you might want to run your game in full screen mode even while you're designing it, and you can do this at any time by clicking the <strong>Build</strong> menu, then clicking <strong>Run without debugger</strong> (or by pressing <strong>Ctrl+F5</strong>).</p>
</blockquote>
<p><a name="figure08"></a>
<span><img src="part1/chapter0/../../images/firstgame.png" alt="" /><br><strong>Figure 0.8: Your First Game</strong></span></p>
<p><a name="figure09"></a>
<span><img src="part1/chapter0/../../images/ingamemenu.png" alt="" /><br><strong>Figure 0.9: In Game Menu</strong></span></p>
<p>The first four icons on the left are used to change what action is to be done on an object or character.  From left to right, the actions are <strong>walk</strong>, <strong>look</strong>, <strong>touch/interact</strong>, and <strong>talk</strong>. Clicking one of these icons will change the mouse cursor to match the action.  Try each one of these actions on the main character and you can see how they work.  Click the <strong>magnifier</strong> icon, for example, and your mouse cursor will change into a magnifier. Then if you click the <strong>magnifier</strong> on the main character you will see a message that says, &quot;Damn, I'm looking good!&quot; Each of the other two icons will display messages as well.  As an alternative to using this menu bar to switch between actions, you can also use the right mouse button while playing to cycle through all the mouse actions that are available.</p>
<p>Continuing from left to right, the next icon is a <strong>suitcase</strong>. Clicking this icon will bring up a screen that shows the player's inventory of items.  The default game comes with a Blue Cup and a Key.  If you opened the inventory, just click the <strong>OK</strong> button to close it. The next icon in the menu bar is an <strong>empty box</strong>. This is there to show the most recently selected inventory item.  If no item is selected, or you have nothing, then it will remain an empty box. The next two icons are the <strong>save</strong> and <strong>restore</strong> features of the game. These actually work and you can try saving and restoring the game if you like (you know, in case you made a lot of progress so far and want to save).  If you click <strong>save</strong>, you can enter a file name and save the game.  You can also delete previously saved games.  Clicking <strong>restore</strong> will show a menu of previous games that you can choose to load.  The next item in the menu bar brings up an in-game control panel.  As you can see in <a href="part1/chapter0/running_first_game.html#figure010">Figure 0.10</a>, you can save and load games, restart, quit and change other options. The final icon is self explanatory: <strong>Exit</strong> (I wonder what that does).</p>
<p><a name="figure010"></a>
<span><img src="part1/chapter0/../../images/controlpanel.png" alt="" /><br><strong>Figure 0.10: In Game Control Panel</strong></span></p>
<p>Well ok then.  That's how you make a game and run it.  Thanks for buying our book.  Please be sure to check out our other wonderful products.  For the rest of the book, we will recite all the words to &quot;3,890 Bottles of Beer on the Wall.&quot;</p>
<h1><a class="header" href="#long-beer-song" id="long-beer-song">Long Beer Song</a></h1>
<p>3,890 bottles of beer on the wallllll, 3,890 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,889 bottles of beer on the wall.<br>
3,889 bottles of beer on the wallllll, 3,889 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,888 bottles of beer on the wall.<br>
3,888 bottles of beer on the wallllll, 3,888 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,887 bottles of beer on the wall.<br>
3,887 bottles of beer on the wallllll, 3,887 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,886 bottles of beer on the wall.<br>
3,886 bottles of beer on the wallllll, 3,886 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,885 bottles of beer on the wall.<br>
3,885 bottles of beer on the wallllll, 3,885 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,884 bottles of beer on the wall.<br>
3,884 bottles of beer on the wallllll, 3,884 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,883 bottles of beer on the wall.<br>
3,883 bottles of beer on the wallllll, 3,883 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,882 bottles of beer on the wall.<br>
3,882 bottles of beer on the wallllll, 3,882 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,881 bottles of beer on the wall.<br>
3,881 bottles of beer on the wallllll, 3,881 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,880 bottles of beer on the wall.<br>
3,880 bottles of beer on the wallllll, 3,880 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,879 bottles of beer on the wall.<br>
3,879 bottles of beer on the wallllll, 3,879 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,878 bottles of beer on the wall.<br>
3,878 bottles of beer on the wallllll, 3,878 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,877 bottles of beer on the wall.<br>
3,877 bottles of beer on the wallllll, 3,877 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,876 bottles of beer on the wall.<br>
3,876 bottles of beer on the wallllll, 3,876 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,875 bottles of beer on the wall.<br>
3,875 bottles of beer on the wallllll, 3,875 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,874 bottles of beer on the wall.<br>
3,874 bottles of beer on the wallllll, 3,874 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,873 bottles of beer on the wall.<br>
3,873 bottles of beer on the wallllll, 3,873 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,872 bottles of beer on the wall.<br>
3,872 bottles of beer on the wallllll, 3,872 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,871 bottles of beer on the wall.<br>
3,871 bottles of beer on the wallllll, 3,871 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,870 bottles of beer on the wall.<br>
3,870 bottles of beer on the wallllll, 3,870 bottles of beeeeer.<br>
You take one down.  Pass it around.  3,869 bottles of beer on the wall.<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br></p>
<h2><a class="header" href="#you-didnt-think-we-were-serious-did-you" id="you-didnt-think-we-were-serious-did-you">You didn't think we were serious, did you?</a></h2>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<br>
<h1><a class="header" href="#summary" id="summary">Summary</a></h1>
<p>Let's review the important points we discussed in this chapter:</p>
<ul>
<li><strong>Adventure Game History</strong> We discussed a little about what adventure games are and where they came from.</li>
<li><strong>AGS is cool</strong> 'Nuff said.</li>
<li><strong>First Game</strong> We created our first game with AGS.  Although it doesn't do much yet, you'll be adding to it throughout the rest of the book. We created the game using the Default template, which gives us basic functionality, like a main character, a simple room to walk around in, a mouse cursor with several different action modes, save/restore functionality, and a basic GUI style.</li>
</ul>
<h1><a class="header" href="#chapter-1---the-ags-editor" id="chapter-1---the-ags-editor">Chapter 1 - The AGS Editor</a></h1>
<h1><a class="header" href="#the-editor" id="the-editor">The Editor</a></h1>
<p>Just in case you missed the last screenshot of the editor, here it is again.  (I know I hate it when I have to flip back in a book!)</p>
<p><a name="figure11"></a>
<span><img src="part1/chapter1/../../images/editor.png" alt="" /><br><strong>Figure 1.1: The Editor</strong></span></p>
<p>The editor consists of three main parts.  The big part in the middle, the Document Pane, is where you do all of your, um...editing. The section on the top-right shows a tree that looks much like <a href="part1/chapter1/editor.html#figure12">Figure 1.2</a>. This tree, called the Project Tree, allows you to open different editing panes.  Go ahead and get familiar with it by double-clicking the options.  You'll be using it a lot.</p>
<p><a name="figure12"></a>
<span><img src="part1/chapter1/../../images/projecttree.png" alt="" /><br><strong>Figure 1.2: The Project Tree</strong></span></p>
<p>The bottom-right pane will show different things depending on what you're working on.  It is called the Properties Pane and allows you to change detailed attributes of whatever object you are currently editing.  Sounds like fun? Well it is! <a href="part1/chapter1/editor.html#figure13">Figure 1.3</a> shows an example of what the Properties Pane looks like when editing a character.  If you'd like to see it for yourself, expand the <strong>Characters</strong> item in the Project Tree and double-click <strong>cEgo</strong>. In fact, double-click everything and look at the properties that come up.  More about this later.</p>
<p><a name="figure13"></a>
<span><img src="part1/chapter1/../../images/propertiespane.png" alt="" /><br><strong>Figure 1.3: The Properties Pane</strong></span></p>
<p>Let's talk a bit about the different types of editing panes that you can use within AGS.  We won't go into too much detail here, but just enough so you get familiar with what AGS can allow you to do within your game.</p>
<h2><a class="header" href="#general-settings" id="general-settings">General Settings</a></h2>
<p>In the Project Tree, scroll all the way to the top and double-click on the item labeled <strong>General Settings</strong>. This opens the General Settings editor in the Document Pane, which allows you to specify some of the basic settings for your game like the resolution at which your game will run, the name of your game, the maximum score the player can achieve, as well as letting you put in information about who created the game.  There are lots of options here and we'll delve into most of the options in <a href="part1/chapter1/../chapter6/settings.html">Chapter 6</a>.</p>
<h2><a class="header" href="#colors" id="colors">Colors</a></h2>
<p>The Colors editor lets you define colors within your game.  For the most part, you won't be using this editor too much if you selected a 16-bit or 32-bit color palette in the General Settings, but it can be useful for using colors within the AGS scripting engine. (If that last sentence didn't make any sense to you, don't worry about it for now; more will become clear later when we talk about colors in more detail in <a href="part1/chapter1/../chapter6/colors.html">Chapter 6</a>.)</p>
<h2><a class="header" href="#sprites" id="sprites">Sprites</a></h2>
<p>Sprites are simply images within the game.  The character you saw in the default game, for example, is a sprite.  In fact, since the main character animates, it is actually composed of several sprites that play much like the frames of animation in a cartoon.  The Sprites editor is where you go to manage all of the sprites in your game.  Double-click on <strong>Sprites</strong> in the Project Tree, and you'll see several sprites appear in the Document Pane.  This isn't all of the sprites, however.  Notice that a new tree appears in the Document Pane, with the word <em>Main</em> at the top.  Expand this tree and click on the <strong>Defaults</strong> folder. This is where you'll see the sprites that make up the character, and in the subfolders, there are the sprites for all of the icons in the menu bar that we mentioned earlier.  The Sprites editor lets you import new sprites into your game and organize them into folders.  We'll be using sprites throughout the entire book, so you'll get very familiar with the Sprite editor.</p>
<h2><a class="header" href="#text-parser" id="text-parser">Text Parser</a></h2>
<p>Do you remember the old games from Sierra like <em>Police Quest</em> and <em>King's Quest</em> where you had to type commands that you wanted the character to do and the computer would respond with ambiguous answers like, &quot;You're not close enough&quot;? Well, if you want to recreate games like those then the Text Parser is your friend.  Since the game we're creating in this book is not a text-style game, we will only briefly mention it in <a href="part1/chapter1/../../part2/chapter8/text_parser.html">Chapter 8</a>.).</p>
<h2><a class="header" href="#lip-sync" id="lip-sync">Lip Sync</a></h2>
<p>AGS syncs with the lips and the lip syncing is the thing for AGS without lips.  If your adventure game shows a close-up portrait of the characters' faces when they are speaking, then you can use the Lip Sync editor to try to closely match the text that the characters are saying to their mouth movements.  Although this is a fairly rudimentary feature, it does the job quite nicely and it can really make a character look like he is speaking.</p>
<h2><a class="header" href="#guis" id="guis">GUIs</a></h2>
<p>A GUI is a Graphical User Interface.  GUIs allow a user to interact with the game in some way.  It can allow you, as the game creator, to get information from the player of your game by asking questions (<a href="part1/chapter1/editor.html#figure14">Figure 1.4</a>), getting input from the keyboard (<a href="part1/chapter1/editor.html#figure15">Figure 1.5</a>), or allowing the player to change game settings (<a href="part1/chapter1/editor.html#figure16">Figure 1.6</a>). AGS lets you make GUIs for all of these purposes and more.  You can even make GUIs to interact with characters.  You'll have to wait until you get to <a href="part1/chapter1/../../part2/chapter10/guis.html">Part 2</a> for more on this. (NOT KIDDING.  NO PEEKING AHEAD!)</p>
<p><a name="figure14"></a>
<span><img src="part1/chapter1/../../images/questiongui.png" alt="" /><br><strong>Figure 1.4: Question GUI</strong></span>
<br>
<br>
<a name="figure15"></a>
<span><img src="part1/chapter1/../../images/inputgui.png" alt="" /><br><strong>Figure 1.5: Input GUI</strong></span>
<br>
<br>
<a name="figure16"></a>
<span><img src="part1/chapter1/../../images/settingsgui.png" alt="" /><br><strong>Figure 1.6: Settings GUI</strong></span></p>
<h2><a class="header" href="#inventory-items" id="inventory-items">Inventory Items</a></h2>
<p>Inventory items are used extensively in most adventure games.  Usually, the main character collects items during the game to use at specific points in the game.  This is the editor to use to create all these items.  Go ahead a look at the default items that are in there now.  You'll soon get very familiar with this editor.</p>
<h2><a class="header" href="#dialogs" id="dialogs">Dialogs</a></h2>
<p>The Dialogs editor allows you to create interactive conversations that can take place between characters.  You can develop question and answer interactions between characters and have the game proceed differently depending on the answers the player chooses.  This is actually a lot of fun.  We'll see more of this in <a href="part1/chapter1/../../part2/chapter8/">Chapter 8</a></p>
<h2><a class="header" href="#views" id="views">Views</a></h2>
<p>A view is simply a collection of animations.  Any animation that you use in your game will be represented by a view.  For example, the animation that you see when your main character is walking comes from a view, as does the animation that you see if a cup falls off of a table and smashes on the ground.  Go ahead and double-click on <strong>VIEW1</strong> and take a look at the editing pane.  This is the default view for the main character's walking animation.  Since animations are an integral part of an adventure game, making views is going to be one of the most important parts of creating your game.  We'll delve extensively into views in <a href="part1/chapter1/../../part1/chapter2/">Chapter 2</a></p>
<h2><a class="header" href="#characters" id="characters">Characters</a></h2>
<p>The Characters editor is where you create the characters that are in the game.  Not only is the main character created here, but any character that the main character interacts with would be here as well.  The Character editor allows you to specify attributes of each character; including which room the character starts in, which views are used to represent the character, the speed at which the character walks around on the screen, and other such things.</p>
<h2><a class="header" href="#mouse-cursors" id="mouse-cursors">Mouse Cursors</a></h2>
<p>AGS allows you to make many differently shaped mouse cursors to use throughout the game.  If you look at the first four cursors in the Project Tree, you will notice that they are the ones that appear in the sample game you created earlier.  The mouse cursors you create here can be a single image, or they can be associated with a view, which allows your mouse cursors to animate. You'll learn more about cursors in <a href="part1/chapter1/../../part1/chapter6/cursors.html">Chapter 6</a> </p>
<h2><a class="header" href="#fonts" id="fonts">Fonts</a></h2>
<p>AGS lets you use different fonts to represent text in your game.  However, you cannot use a font without first importing it into the Fonts editor.  The Fonts editor supports true type fonts (TTF) as well as SCI (Sierra Creative Interpreter) fonts, which are fonts used in the old Sierra games like <em>King's Quest</em> and <em>Space Quest</em>. More about this when we talk about GUIs later.</p>
<h2><a class="header" href="#global-variables" id="global-variables">Global Variables</a></h2>
<p>Global variables are associated with scripting (If you don't know what a script is, look at the next section really quick and come back here).  Variables are objects that you use in scripts that hold values.  Normal (non-global) variables can only be used within a specific script file or room.  A global variable, however, can be used in any script.  This editor is a place to define your global variables for use within your game.  If this is all foreign to you, don't worry about it now.  You'll pick all this up as we go along.</p>
<h2><a class="header" href="#scripts" id="scripts">Scripts</a></h2>
<p>Scripts are, more or less, instructions that you give AGS to tell it to do specific tasks.  It's basically the nuts and bolts of your game.  There are certain things you will want to do within your game that you just can't do with any of the other editors in AGS, and scripting allows you to do those things.  You will quickly find out that scripting is a very important part of creating adventure games.  Go ahead and double-click a few scripts and get a feel for what they look like but know that we will be including scripting all throughout this book and you'll get familiar with it soon enough, so don't let it scare you right now.</p>
<h2><a class="header" href="#plugins" id="plugins">Plugins</a></h2>
<p>Plugins are extensions to AGS that give it extra functionality.  They can be written by anyone and distributed to be used in making games.  Plugins are not necessary to create a game and are beyond the scope of this book.</p>
<h2><a class="header" href="#rooms" id="rooms">Rooms</a></h2>
<p>Rooms are very, very important.  Think of it this way: There would be NO game if there was not at least one room and one character.  A room is where the action takes place in your game.  Don't let the word &quot;room&quot; confuse you - a room is anywhere action takes place in your game, regardless of whether it's a typical room with four walls, a floor, and a ceiling.  A forest, for example, can be a room, and a meadow could also be a room.  A room in AGS will contain the background graphic, any objects that are in the room, the room script, and other room goodies like regions, hotspots, walkable areas, edges, and walk-behinds.  There is one room already created in the default game.  Open the Rooms item in the Project Tree, then expand the item labeled <strong>&quot;1:.&quot;</strong> This is the default room.  Double-click <strong>Edit room</strong> to see the graphics.  Double-click <strong>Room script</strong> to see the script file.  There's not much to see here now, but this will grow as we add things to our room later on.</p>
<h2><a class="header" href="#translations" id="translations">Translations</a></h2>
<p>Je ne sais pas ce que c'est.  Was? Verstehest du nicht?  That's why you need translations.  If you're going to make your game to be playable by people who speak different languages, you'll want to use the Translations editor.  This allows the text in your game to be translated into different languages. We will tell you more about this later.</p>
<h1><a class="header" href="#summary-1" id="summary-1">Summary</a></h1>
<p>This chapter focused on the AGS Editor, a very import piece of AGS:</p>
<ul>
<li><strong>AGS Editor Components</strong> The AGS Editor is made up of three main parts: the Document Pane, the Project Tree, and the Properties Window.  The Project Tree gives you access to all of the components in your game.</li>
</ul>
<h1><a class="header" href="#chapter-2---sprites-views-and-characters" id="chapter-2---sprites-views-and-characters">Chapter 2 - Sprites, Views, and Characters</a></h1>
<p>A quick revisit of what sprites, views, and characters are is in order here.  Sprites are simply images within the game.  Because a character animates, it usually takes several sprites to make up a character.  Views are, simply put, collections of sprites that make up animations.  So basically, characters are made up of views which in turn are made up of sprites.</p>
<blockquote>
<p><strong>Side Note:</strong> You can find the graphics for the following examples on <a href="https://github.com/ensadi/FoxysQuest/tree/main/Sprites" target="_blank">https://github.com/ensadi/FoxysQuest/tree/main/Sprites</a></p>
</blockquote>
<h1><a class="header" href="#sprites-1" id="sprites-1">Sprites</a></h1>
<p>The first step in creating a character is to draw some sprites.  Our character is going to be a fox in a monk outfit with angel wings.  (hmm.  SOMEONE was drunk!)  Find the file named <em>foxy_monk.bmp</em> to follow along. <a href="part1/chapter2/sprites.html#figure21">Figure 2.1</a> shows a quick snapshot of the file.  I know you can't tell that it's a fox.  So what!?  If you want to create your own sprites, then go for it.  We'll wait...</p>
<p><a name="figure21"></a>
<span><img src="part1/chapter2/../../images/foxy_monk.png" alt="" /><br><strong>Figure 2.1: Foxy Monk Sprites</strong></span></p>
<p>As you can see, there are 12 sprites in this file.  They each take up the same amount of space to make importing them easier, but that is not necessary.  Most of the time, an artist will put many individual sprites into one image file to reduce the number of files needed to create the game, making each sprite the same width and height.  That way, the sprites can be aligned in a tiled pattern, as in our example above.</p>
<p>Once you have your sprites saved in a file, the next step will be importing them into your game.  Open the Sprites editor by double-clicking <strong>Sprites</strong> in the Project Tree.  You will see two panes open up in the editing area (<a href="part1/chapter2/sprites.html#figure22">Figure 2.2</a>). On the left is a list of folders that contain sprites.  This is simply a way for you to organize the sprites within your editor.  For example, you might want to have all of the sprites associated with a character in a folder with the same name as that character.  Your final game could easily contain hundreds, if not thousands, of sprites, and getting into this habit of organizing your sprites will make it easier to find and manipulate sprites later.</p>
<p><a name="figure22"></a>
<span><img src="part1/chapter2/../../images/spriteseditor.png" alt="" /><br><strong>Figure 2.2: Sprites Editor</strong></span></p>
<p>Let's create a folder to contain all of our sprites for Foxy Monk.  First, right-click on the <strong>Main</strong> folder on the left editing pane and click <strong>Create sub-folder</strong> and call this folder <em>FoxyMonk</em>. The right editing pane will now be empty since there are no sprites in this folder (duh!).  Let's fix that by adding a few sprites.</p>
<p>To start importing your sprites, <strong>right-click</strong> in the right editing pane and choose <strong>Import new sprite from files</strong>... This will bring up the good ol' Windows file open dialog.  Find your file and <strong>double-click</strong> it. You should then see the Import Sprite window open as in <a href="part1/chapter2/sprites.html#figure23">Figure 2.3</a>.</p>
<p><a name="figure23"></a>
<span><img src="part1/chapter2/../../images/importspriteswindow.png" alt="" /><br><strong>Figure 2.3: Import Sprites Window</strong></span></p>
<p>As you can see, AGS loaded your file and is ready to import the sprites.  Let's tell it how we want the file divided up.  Use the zoom slider to make the picture bigger so you can see it easier. Hold the mouse at the top-left corner of the picture.  Click and hold the mouse button.  Drag the mouse down and to the right until the first image has a box around it as in <a href="part1/chapter2/sprites.html#figure24">Figure 2.4</a>. Note that in this case, the mouse location needs to end up at position (24,32) because that's the size of each of our sprites (you can see your mouse location as you are highlighting the sprite).  Click the <strong>Import</strong> button now and your first sprite is imported!  Feels good on the inside, doesn't it? Well good.  Now all we have to do is repeat the above steps 11 more times to import the rest of the sprites for Foxy Monk.  (sigh)  If only there was a better way...</p>
<p>Well, there is!  But first let's delete the sprite you just imported (it will be easier this way, trust me.)  Click on the newly imported sprite and hit the <strong>delete</strong> key and click <strong>Yes</strong> when asked to confirm.</p>
<p><a name="figure24"></a>
<span><img src="part1/chapter2/../../images/highlightsprite.png" alt="" /><br><strong>Figure 2.4: Highlighting a Sprite to Import</strong></span></p>
<p>Let's start the process again, and this time we'll use the fact that the sprites are tiled to our advantage.  <strong>Right-click</strong> the middle pane and choose <strong>Import new sprite using previous files...</strong> This option will open up the last file so you don't have to hunt for it again.  Zoom in if you like, but make sure that the entire image stays visible (this will be important in just a second).  Click the <strong>Tiled sprite import</strong> checkbox on the left. Tiled sprite import allows you to select all the sprites that you want to import at once, as long as they are all the same size.  Change the <strong>Number of tiles</strong> to 12. Move the mouse pointer to the top-left corner of the image and highlight the first sprite exactly as you did before.  Now when you let go of the mouse button, you'll notice all 12 sprites are outlined as in <a href="part1/chapter2/sprites.html#figure25">Figure 2.5</a>. Click the <strong>Import</strong> button now and all your sprites should be imported! Yay!</p>
<p><a name="figure25"></a>
<span><img src="part1/chapter2/../../images/tiledimport.png" alt="" /><br><strong>Figure 2.5: Tiled Import</strong></span></p>
<p>One other thing to note.  Did you notice that our sprites have a green background?  This green area won't be drawn when the game is played, thanks to something called <em>transparency</em>. The Import Sprite dialog has an area on the left called <em>Transparent colour</em>. This allows you to tell AGS what the transparent color is in your sprite.  Any pixel that is the same color as the transparent color will be invisible when you play your game.  If this weren't set correctly in our sprite, Foxy Monk would always have a green rectangle behind her (<a href="part1/chapter2/sprites.html#figure26">Figure 2.6</a>).</p>
<p><a name="figure26"></a>
<span><img src="part1/chapter2/../../images/notransparency.png" alt="" /><br><strong>Figure 2.6: On the left, the Foxy Monk sprite has proper transparency.  On the right, transparency is not correct and you can see a green box around the sprite.</strong></span></p>
<h1><a class="header" href="#views-1" id="views-1">Views</a></h1>
<p>Now that we have the sprites imported for our character, we need to create a View for the character.  We told you earlier that a view is a collection of sprites that make up an animation.  We lied (sorry!).  A view is actually a collection of loops, and a loop is a collection of sprites.  Put another way, a loop is an animation, and a view is a collection of animations.  To understand this, let's use our Foxy Monk as an example.  In our image, we had 12 sprites.  The first 3 images show Foxy Monk walking away from us, the second 3 show her walking to the right, the next 3 show her walking towards us, and the last 3 show her walking to the left.  Each of these directions (up, down, left, and right) is a separate animation (loop), and they will all be contained in a single view that represents Foxy Monk walking (<a href="part1/chapter2/views.html#figure27">Figure 2.7</a>).</p>
<p><a name="figure27"></a>
<span><img src="part1/chapter2/../../images/foxysview.png" alt="" /><br><strong>Figure 2.7: Foxy's View</strong></span></p>
<p>In AGS, the 4 loops that are associated with Foxy Monk walking will all reside in the same View.  So later, when we assign this view to Foxy Monk, AGS will automatically know to use loop 0 when she's walking down, loop 1 when she's walking to the left, loop 2 when she's walking to the right, and (you guessed it) loop 3 when she's walking up.  In case you're wondering how AGS knows that those loop numbers go with those directions, it's something that's built into AGS.  Loop 0 is <em>always</em> the loop for down, loop 1 is <em>always</em> the loop for left, etc.  The list of loops and the associated directions is listed in <a href="part1/chapter2/views.html#figure28">Figure 2.8</a>. The first four loops (loops 0 - 3) are required; if your view does not contain at least four loops, AGS will create them for you automatically.  However, the rest of the loops are optional; that is, you don't have to create loop 4 if you don't want to have a separate animation for your character walking down and to the right.  In this case, AGS will make an educated guess as to which of the four &quot;cardinal&quot; directions to apply to your character when it is walking in a direction that is not explicitly up, down, left, or right.</p>
<p><a name="figure28"></a></p>
<table width=100%>
<tr><td><b>Loop</b></td><td><b>Direction</b></td></tr>
<tr><td>0</td><td>Down</td></tr>
<tr><td>1</td><td>Left</td></tr>
<tr><td>2</td><td>Right</td></tr>
<tr><td>3</td><td>Up</td></tr>
<tr><td>4</td><td>Down-Right</td></tr>
<tr><td>5</td><td>Up-Right</td></tr>
<tr><td>6</td><td>Down-Left</td></tr>
<tr><td>7</td><td>Up-Left</td></tr>
</table>
<p><strong>Figure 2.8: Loops and their directions</strong></p>
<p>Let's create the view shown in <a href="part1/chapter2/views.html#figure27">Figure 2.7</a>. Expand <strong>Views</strong> under the Project Tree.  If you created the default game and have been following along, you will already have two views listed there (VIEW1 and VIEW2).  We could change one of those views to suit our needs, but for purposes of demonstration let's go ahead and make a new one. Right-click on <strong>Views</strong> in the Project Tree, select <strong>New View</strong> from the popup menu, and name the view <code>vFMNormal</code>. Whoa! That's a weird name.  What the heck does <code>vFMNormal</code> mean, anyway? Well, as a general rule, you can name things in AGS whatever you want, but if you follow some simple nomenclature it will make your life much easier when your game gets larger.  In this case, our view name begins with a lowercase &quot;<strong>v</strong>.&quot; This stands for &quot;view&quot; and it's there just so that we immediately know just from looking at the name that <code>vFMNormal</code> is a view. The &quot;<strong>FM</strong>&quot; part of the name stands for Foxy Monk, and &quot;<strong>Normal</strong>&quot; means that this is Foxy Monk's normal view.  (We'll talk about what a normal view is in the next section.)</p>
<blockquote>
<p><strong>Side Note:</strong> You might be wondering why we're making such a big deal about how things are named within AGS.  After all, why name a view starting with a lowercase &quot;v&quot; when it's obvious that the view is a view, since it's in the Views section of the Project Tree?  This is a good question, and if we always dealt with our views and other things solely from the Project Tree then we might not need to be picky about the names.  But, as you'll find out later, we will be using many of the names we create when we talk about scripting, and we won't want to have to refer back to the Project Tree to remember what we named our stuff.  If we're always consistent with the way we name things, then a name like vFMNormal will actually be much easier to remember than if we'd named the view Banana or something arbitrary!</p>
</blockquote>
<p>Ok, we've created a view, now what?  If you've been paying attention you should be able to answer this question yourself.  We need to create our four loops!  Open <code>vFMNormal</code> view if it isn't already and notice that there are no loops created yet (<a href="part1/chapter2/views.html#figure29">Figure 2.9</a>).</p>
<p><a name="figure29"></a>
<span><img src="part1/chapter2/../../images/emptyview.png" alt="" /><br><strong>Figure 2.9: Our new view with no loops or sprites</strong></span></p>
<p><a name="figure210"></a>
<span><img src="part1/chapter2/../../images/oneloopview.png" alt="" /><br><strong>Figure 2.10: Our new view with one loop.  It doesn't have any sprites assigned to it yet.</strong></span></p>
<p>Let's fix that now.  Click the <strong>Create new loop</strong> button and Loop 0 will be created as in <a href="part1/chapter2/views.html#figure210">Figure 2.10</a>.  There are three buttons here: <strong>Create New Frame</strong>, <strong>Create new loop</strong>, and <strong>Delete last loop</strong>. These should be self-explanatory, but just in case, we'll discuss each of them.  Click the <strong>Create new loop</strong> button. A second loop will appear called (Loop 1).  Now click <strong>Delete last loop</strong> to delete it. This is how you would create and delete loops from within the view editor.  Go ahead and click <strong>Create new loop</strong> three times to get our four main loops.  Now we'll assign sprites to Loop 0.  Click the <strong>Create New Frame</strong> button under Loop 0, and you'll see a blue cup sprite appear (<a href="part1/chapter2/views.html#figure211">Figure 2.11</a>). The blue cup is the default sprite that AGS uses when it knows a sprite should be there but you haven't told it which sprite to use yet. Double-click the blue cup and AGS will bring up a dialog box to let you choose a sprite to use.  Click the <em>FoxyMonk</em> folder on the left, and choose the first of the three sprites that shows Foxy Monk walking down.  Click <strong>Use this sprite</strong> (<a href="part1/chapter2/views.html#figure212">Figure 2.12</a>). The blue cup has been replaced by Foxy Monk.  Rock on!  Since we have three sprites for Foxy Monk walking down, this loop will need to have three frames.  <strong>Click Create New Frame</strong> and watch closely at what happens.  Now, instead of a blue cup appearing, AGS is smart and it automatically selected the <em>next sprite</em> in the animation.  Click <strong>Create New Frame</strong> again and it will get the third frame.  How does AGS know which sprite to use when you create a new frame?  Well, it doesn't really.  AGS just selected the next sprite in our list of sprites.  Since we imported all the Foxy Monk sprites at the same time, the next sprite in our list was the next sprite in the animation.  This is common enough that AGS automatically selects the next sprite for you.  This is also why it's always a good idea for your sprite file to have the images in the right order and not strewn about every which way.</p>
<p><a name="figure211"></a>
<span><img src="part1/chapter2/../../images/bluecupview.png" alt="" /><br><strong>Figure 2.11: The default Blue Cup appears when AGS doesn't know which sprite to use</strong></span></p>
<p><a name="figure212"></a>
<span><img src="part1/chapter2/../../images/choosesprite.png" alt="" /><br><strong>Figure 2.12: Choose the first down facing sprite</strong></span></p>
<p>Now that we have three frames of animation for loop 0, it would be nice to see what the animation looks like.  The view editor provides a nice way for you to preview the animation without having to run the game.  To see the loop animated, click the <strong>Show Preview</strong> checkbox above Loop 0 (<a href="part1/chapter2/views.html#figure213">Figure 2.13</a>), and then click <strong>Animate</strong> from amongst the new checkboxes that appeared.  Aww, look.  Foxy Monk is walking, ain't she just precious?  Wittle Foxy-woxy Monky-wunky is just da cutest wittle thing!  Errr.. ahem...</p>
<p><a name="figure213"></a>
<span><img src="part1/chapter2/../../images/showpreview.png" alt="" /><br><strong>Figure 2.13: The Show Preview and Animate checkboxes</strong></span></p>
<p>What we just walked through was one way to create a loop and assign it to a view.  Let's look at another (easier) way to do the other three.  This time choose <strong>Sprites</strong> from the Project Tree to bring up the Sprite editor.  Click the <em>FoxyMonk</em> folder so we can see Foxy Monk's sprites.  Let's select all the sprites that will make up Loop 1 (left).  Find the three frames that show Foxy Monk walking to the left.  Click the first of those three sprites, hold down the shift key, and click the last one.  This will highlight all three sprites of her walking to the left.  Now <strong>right-click</strong> on any of those three sprites and click <strong>Assign to View</strong>. You will see the Assign Sprites to View window, as shown in <a href="part1/chapter2/views.html#figure214">Figure 2.14</a>. Under View, choose the view to which you want to assign this animation (view number 3 in our case).  (Alternatively, you can click the Choose button and select the view that way, but if you know the view number you can just type it in.)  For Loop, choose Loop 1 (left).  The next question it asks is, &quot;How would you like to assign the new frames?&quot; Select Overwrite existing loop, since our loop is empty anyway.  Leave the default options for everything else and click <strong>OK</strong>. A dialog box will appear that says, &quot;The selected sprites were assigned successfully.&quot; Click <strong>OK</strong>. Now, go back to your view, and you'll see Loop 1 populated with Foxy Monk walking left!</p>
<p>Repeat the above steps to create Loops 2 and 3 for Foxy Monk walking right and up, respectively.  Your view should end up looking like <a href="part1/chapter2/views.html#figure215">Figure 2.15</a> when you finish. </p>
<p><a name="figure214"></a>
<span><img src="part1/chapter2/../../images/assigntoview.png" alt="" /><br><strong>Figure 2.14: Assign to View dialog</strong></span></p>
<p><a name="figure215"></a>
<span><img src="part1/chapter2/../../images/foxynormalview.png" alt="" /><br><strong>Figure 2.15: Foxy Monk's Normal View</strong></span></p>
<h1><a class="header" href="#characters-1" id="characters-1">Characters</a></h1>
<p>Now that we have a view for Foxy Monk, we should be able to easily create a character of her.  Start by right-clicking on <strong>Characters</strong> in the Project Tree and selecting <strong>New character</strong>. This will create a new item in the tree called <code>1:cChar1</code>. Ick! What a horrible name.  Let's give our character a proper name.  Click on <code>cChar1</code> in the tree to select it.  Remember when we talked about the Properties Pane?  We'll get to use it now to set up our new character.  Look at the Properties Pane and find the section called <code>Design</code>. In this section you should find two important properties: <code>RealName</code> and <code>ScriptName</code>.  <code>RealName</code> is the actual name you want to give to your character.  As you can see, the real name of the character right now is &quot;New character.&quot; Double-click on <code>RealName</code> and Type in Foxy Monk, and then hit Enter. Now isn't that better? Let's turn our attention to the <code>ScriptName</code> field now. The script name is the name that you will be using to refer to your character when writing scripts.  In other words, this is the name that AGS will use to refer to the character.  AGS assigned the name <code>cChar1</code> to it by default. The lowercase <strong>c</strong> in this case stands for &quot;character&quot; and is there to let you know that this is a script name for a character when you're scripting later.  (Remember we did something similar with a view in the previous section.)  Double-click on <code>ScriptName</code> and type in <strong>cFoxyMonk</strong> and then hit <strong>Enter</strong>. Please note that this name shouldn't have spaces.  And that's all there is to naming a character.</p>
<blockquote>
<p><strong>Side Note:</strong> For you programmers, the script name is the variable name.</p>
</blockquote>
<p>Now that your character has a name, we need to give it a face.  Well, a view actually.  Find the section in the Properties Pane named <code>Appearance</code>. Under this section you should find 5 types of views: <code>BlinkingView</code>, <code>IdleView</code>, <code>NormalView</code>, <code>SpeechView</code>, and <code>ThinkingView</code>. The names of these views should give you a hint as to what they're for.</p>
<ul>
<li>The blinking view is the animation that is displayed when the character blinks.</li>
<li>The idle view is the animation for the character when it's just standing there doing nothing.  This view is activated automatically after a certain amount of time passes without doing anything (we'll talk about this later.)</li>
<li>The normal view is, well, the normal view.  This is the view that the character will have when it's standing or walking and is the most used view.  We created this view earlier in this chapter.</li>
<li>The speech view is the animation used when the character is talking.</li>
<li>The thinking view can be used to make the character look like it's thinking about something.</li>
</ul>
<p>AGS automatically uses the right view when the character is doing each of these actions, so you don't have to think about it.  For example, if you have a view assigned for the speech view, then AGS will automatically switch the character's view to the speech view when it's talking, and switches back to the normal view when it's done.</p>
<p>What is most important for us is the normal view.  We want Foxy Monk to look like the view we just created when she's standing and walking. AGS assigned View 1 to Foxy Monk by default but that's not the one we want.  Double-click <code>NormalView</code> in the Properties Pane and type in <strong>3</strong>, and then hit <strong>Enter</strong> (view 3 was the view we created in the last section, remember?) Now if you look at the Editing Pane you should see Foxy Monk appear as in <a href="part1/chapter2/characters.html#figure">Figure 2.16</a>.</p>
<p><a name="figure216"></a>
<span><img src="part1/chapter2/../../images/foxycharacter.png" alt="" /><br><strong>Figure 2.16: Foxy Monk's Character</strong></span></p>
<p>Let's play around in the Editing Pane and watch Foxy Monk in action.  Start by clicking the <strong>Animate</strong> checkbox. You should see Foxy Monk start walking.  Neat huh?  Click the <strong>up</strong> or <strong>down</strong> arrow under Loop and you should see Foxy Monk change directions.  There should be 4 loops that you can cycle through.  Also, note that the Frame box continuously changes as Foxy Monk walks.  Let me know when you're done playing with that...</p>
<p>Ok, so we have a character, and she walks. I'd say it's about time to see this character in action.  Go ahead and run the game now.  Seriously! Don't read anymore until you run the game.</p>
<p>Oh no! Where's Foxy Monk?  Don't panic.  Now, I know we haven't talked about rooms yet, but in order to see Foxy appear in the game, we have to move her to the first room in the game; the room that the default blue-suite character is currently occupying.  By the way, his name is Roger, if you haven't already figured that out.  Go back to the Properties Pane and find the <code>Design</code> section.  There you will see a property called <code>StartingRoom</code>. Change this property to 1 and run the game again.  Voila! Foxy is here! And so is the default guy, errr, I mean Roger.  Now click somewhere to move her around.  Oh, wait wait wait.  She's not moving.  Roger is.  Back to the drawing board!  We want Foxy to be the main character, not Roger.  Did you notice that large button labeled &quot;Make this the player character&quot; back in the editing pane (<a href="part1/chapter2/characters.html#figure216">Figure 2.16</a>)? Click this button to make Foxy Monk the main character.  Now she will replace Roger as the character that you play.  While we're at it, let's go ahead and take Roger out of the game.  Double-click on <strong>cEgo</strong> (yes, that's his script name) under Characters in the Project Tree and change his starting room to <code>(None)</code>. While you're there, go ahead and look at the <code>StartX</code> and <code>StartY</code> parameters in the <code>Design</code> section. These are the X and Y coordinates for where in the room the character will initially be.  Copy those numbers (127, 142) over to Foxy Monk's properties.  If you don't do this, she'll start in that tree trunk looking thing and won't be able to move (We'll talk about Walkable areas of rooms later.) Now run the game again.  Foxy Monk should appear all by herself and you should be able to move her around.</p>
<p>Let's explore a few other character options.  I don't know about you, but to me, Foxy was moving a bit too slow around the screen.  Double-click on Foxy's character in the Project Tree and go back to the Properties Pane.  Find the <code>MovementSpeed</code> option under the <code>Movement</code> settings and increase it from 3 to 6.  Run the game now and see if you like her speed better.  Woohoo!</p>
<h1><a class="header" href="#summary-2" id="summary-2">Summary</a></h1>
<p>In this chapter, we learned about how to create your first character, and along the way we learned about sprites and views.</p>
<ul>
<li><strong>Sprites</strong> Sprites are the individual graphics that are in your game; for example, the animations that are associated to a character are each made up of one or more sprites.  Sprites aren't just for animations, though.  A button's image is a sprite, and so is the mouse cursor image.  Sprites are imported and managed through the Sprites editor in the Project Tree.</li>
<li><strong>Views</strong> Views are collections of animations.  An individual animation is called a Loop.  Views are made up of one or more Loops.  Loops that contain grapes, apples, and oranges are called Fruit Loops.</li>
<li><strong>Characters</strong> Your game has to contain at least one character, and most games will have many more than that.  Characters that the player controls are called Player Characters (PCs), and characters that are computer-controlled are called Non-Player Characters (NPCs).  More on NPCs later.</li>
</ul>
<h1><a class="header" href="#chapter-3---rooms-and-events" id="chapter-3---rooms-and-events">Chapter 3 - Rooms and Events</a></h1>
<p>A game with no room is like a forest with no trees.  Now that we got the philosophy out of the way, let's give our friend Foxy Monk a better place to play than the default screen.  Like we said before, a room in AGS will contain the background graphic, any objects that are in the room, the room script, and many other things.</p>
<blockquote>
<p><strong>Side Note:</strong> You can find the graphics for the following examples on <a href="https://github.com/ensadi/FoxysQuest/tree/main/backgrounds" target="_blank">https://github.com/ensadi/FoxysQuest/tree/main/backgrounds</a></p>
</blockquote>
<h1><a class="header" href="#simple-backgrounds" id="simple-backgrounds">Simple Backgrounds</a></h1>
<p>The default background for room 1 was good enough to get our character walking around.  But let's change the room and give Foxy Monk a place where she can frolic in some grass.  If you want to make your own background, then go ahead.  Otherwise find the file called <em>simple_bg.bmp</em>. This file will contain a nice little tree and a small pond.  The file is 320 pixels wide and 200 pixels high. &quot;Hmmm...Where did they get those numbers from?&quot; you might be asking yourself.  Well, let's take a little detour and explain that.  Do you remember the General Settings option in the Project Tree?  It's all the way at the top.  If you double-click that, the General Settings editor should open up and you should see that the default game's <code>Resolution</code> option is set to 320x200. So, we made our background image that size in order to fit perfectly in the room.  Now that you understand that let's go ahead and put that image into the game as room 1's background.</p>
<p><a name="figure31"></a>
<span><img src="part1/chapter3/../../images/resolutionsetting.png" alt="" /><br><strong>Figure 3.1: General Settings and Game Resolution</strong></span></p>
<p>Open the room editor and edit room 1 by expanding the Rooms node in the Project Tree and double-clicking on <strong>Edit Room</strong> under the <strong>1:</strong> node.  Room 1's editor should be in the Editing Pane now and you should be looking at our famous default background.  Changing the background is so easy that you're going to laugh at me when I tell you.  Click the <strong>Change...</strong> button at the top of the edit screen.  (<a href="part1/chapter3/simple_bg.html#figure32">Figure 3.2</a>).</p>
<blockquote>
<p><strong>Side Note:</strong> This would be a good time to learn how to name your rooms.  Click on <strong>1:</strong> under Rooms in the Project Tree.  Now look at the Properties Pane and change the <code>Description</code> option to something descriptive.  We're going to name room 1 <strong>Pond</strong>.</p>
</blockquote>
<p><a name="figure32"></a>
<span><img src="part1/chapter3/../../images/thechangebgbutton.png" alt="" /><br><strong>Figure 3.2: The Change... Button for Room 1</strong></span></p>
<p>A File Chooser window should pop up.  Navigate to the file <em>simple_bg.bmp</em> and choose it, then click <strong>Open</strong>. You should see the background turn into your new Tree-Pond-Grass background.  And yes, that's what I want to call it.  Press <strong>F5</strong> now to run the game and have Foxy run amok around our beautiful scenery.  Click on different parts of the screen to have Foxy walk around.  Ok, ok, so you may have noticed that Foxy is walking on everything!  I mean, not only is she walking on the grass where she's supposed to walk, but she can walk on the water and on the tree!  As an exercise, why don't you change Foxy's starting position so she's on the grass somewhere (on some other grass than where she is now).  As a hint, go to the room editor and move your mouse around the background.  You should notice that the Mouse Position coordinates, which are right above the background image, are changing.  Choose a nice place to start Foxy (we're choosing 110,167) and set her starting coordinates.  If you don't remember how to do it, look at the previous chapter.  Now run the game and walk around...are you stuck? Are you? Are you?</p>
<p><a name="figure33"></a>
<span><img src="part1/chapter3/../../images/simple_bg.png" alt="" /><br><strong>Figure 3.3: Tree-Pond-Grass background</strong></span></p>
<h1><a class="header" href="#walkable-areas" id="walkable-areas">Walkable Areas</a></h1>
<p>That's right ladies and gentlemen; it's time to make sure Foxy Monk doesn't walk on things that she shouldn't walk on. Walkable areas in AGS are special areas that are drawn onto the background where characters are allowed to walk.  AGS allows you to have up to 15 different walkable areas that you can turn on and off at will.  As you should already know, there is one walkable area that was automatically created for you when the game was created.  Now we're going to fine tune this walkable area so Foxy only walks where she's supposed to.</p>
<p>Now let's see; people don't normally walk on the sides of houses and on the sky, right?  We'll go with that for now. Look at the room editor, just above the background image, where it says <strong>Edit this room's</strong>. Click the ellipses next to <strong>Room</strong> and select Walkable areas (<a href="part1/chapter3/walkable_areas.html#figure34">Figure 3.4</a>). Notice that a gray looking area is now highlighted starting at the tree and going into the water; this is the walkable area.  Now, click on the Fill tool at the top of the screen (circled in red in <a href="part1/chapter3/walkable_areas.html#figure35">Figure 3.5</a>) and then <strong>RIGHT-CLICK</strong> anywhere on that gray walkable area, and poof, it's deleted. So, you should <strong>right-click</strong> to get rid of a walkable area and <strong>left-click</strong> to create one. Now we need to recreate the area right.  Click the ellipses next to <strong>Walkable areas</strong> and choose <strong>Walkable area ID 1</strong>. If you look between the Properties Pane and the Project Tree (<a href="part1/chapter3/walkable_areas.html#figure36">Figure 3.6</a>), you will notice a drop-down box that says &quot;Walkable area ID 1.&quot; This tells us that we're currently editing the first walkable area, which happens to be the default one.</p>
<p><a name="figure34"></a>
<span><img src="part1/chapter3/../../images/editwalkableareas.png" alt="" /><br><strong>Figure 3.4: Choose Walkable areas from the Drop-down box</strong></span></p>
<p><a name="figure35"></a>
<span><img src="part1/chapter3/../../images/filltool.png" alt="" /><br><strong>Figure 3.5: The Fill Tool</strong></span></p>
<p><a name="figure36"></a>
<span><img src="part1/chapter3/../../images/walkableidlocation.png" alt="" /><br><strong>Figure 3.6: Walkable area ID location</strong></span></p>
<p>Now comes the fun part.  We have to create a new walkable area that makes more sense.  Choose the <strong>Freehand</strong> tool from the toolbar (Highlighted in <a href="part1/chapter3/walkable_areas.html#figure37">Figure 3.7</a>). Now we're going to see how good you are at free-hand tracing around the picture. Start anywhere you like and trace right at the horizon, and around the base of the tree so that Foxy doesn't trample the flowers, and around the pond because Foxy is a fox and not a duck.</p>
<p><a name="figure37"></a>
<span><img src="part1/chapter3/../../images/freehandtool.png" alt="" /><br><strong>Figure 3.7: Freehand Tool</strong></span></p>
<p>When you're done, it should look something like <a href="part1/chapter3/walkable_areas.html#figure38">Figure 3.8</a>.</p>
<p><a name="figure38"></a>
<span><img src="part1/chapter3/../../images/freehandtracing.png" alt="" /><br><strong>Figure 3.8: Freehand Tracing (blue line)</strong></span></p>
<p>Choose the <strong>Fill</strong> tool from the toolbar and click anywhere Foxy is ALLOWED to walk.  You should have something that looks like <a href="part1/chapter3/walkable_areas.html#figure39">Figure 3.9</a>. The blue (not including the water) is Walkable Area 1 and will be the only place that Foxy can walk.  If your blue covers more area, then undo and check your edges.  You might not have closed your line somewhere.  Notice that we left a bit of an edge around everything so that Foxy doesn't go right up to something and smack right into it.  Also notice that we didn't trace around the tree itself.  This does mean that Foxy will still be able to walk right onto it, but that's ok for now (we have plans for that tree).  Ok now for the fun part:</p>
<p><a name="figure39"></a>
<span><img src="part1/chapter3/../../images/walkablearea1.png" alt="" /><br><strong>Figure 3.9: Completed Walkable Area</strong></span></p>
<p>Run the game and walk around.  You'll find that you will not be able to walk anywhere that is not blue (of course, you can't see the blue areas in the actual game!) In fact, click on one side of the pond and wait for Foxy to get there.  Then click on the opposite side of the pond.  You'll see that Foxy is now smart enough to go around the pond to her new destination.</p>
<h1><a class="header" href="#scrolling-backgrounds" id="scrolling-backgrounds">Scrolling Backgrounds</a></h1>
<p>Before we fix the problem of Foxy walking everywhere that she's not supposed to, let's do a couple more things first.  As we said earlier, we imported a background that was exactly the same size as the game's resolution (320x200 in this case).  This is fine and dandy, and it means that the player will be able to see the entire background all the time.  What would happen, you might wonder, if we used an image for the background that was bigger than the game's resolution?  That is, instead of a background of 320x200, what if we used one that was 721x200 for example?  We're glad you asked!  We just happen to have a file of that size.  Let's load it up and test it out!</p>
<p>Quit out of the game if it's still running and go back to the room editor.  We're going to change the background that we just imported to a bigger one so we can see what happens.  Click on the <strong>Change</strong> button again, and this time when the file dialog opens, choose the file <em>scrolling_bg.bmp</em>. After you click <strong>Open</strong>, you'll get a warning message like the one in <a href="part1/chapter3/scrolling_bg.html#figure310">Figure 3.10</a>, letting you know that this new background image is a different size than the one you're currently using.  If we had done a lot of work with our room, like adding lots of regions or hotspots or something, then changing a background like this would clear all of those areas, which is basically what this message box is telling you.  This new background does cause us to have to redo the walkable area in this room, which we'll do in just a minute.  Click <strong>Yes</strong> on the dialog box.</p>
<p><a name="figure310"></a>
<span><img src="part1/chapter3/../../images/warningmessage.png" alt="" /><br><strong>Figure 3.10: Warning Message</strong></span></p>
<p>Our new room's background looks very similar to the one we just loaded, but with one important difference: it's longer! Now let's fix that walkable area issue.</p>
<p><a name="figure311"></a>
<span><img src="part1/chapter3/../../images/walkablearea1long.png" alt="" /><br><strong>Figure 3.11: Scrolling Tree-Pond-Grass background with walkable area</strong></span></p>
<p>Use what you already learned and create a new walkable area by tracing right at the horizon, around the shack, around the pond, and around the base of the tree and the flowers like in <a href="part1/chapter3/scrolling_bg.html#figure311">Figure 3.11</a>. Oh, and don't forget that rock.</p>
<p>Ok, now that we've fixed the walkable area, run the game again.  Now click close to the right side of the screen to have Foxy walk there.  When she gets about halfway across the screen, the background will start to scroll!</p>
<h1><a class="header" href="#animating-backgrounds" id="animating-backgrounds">Animating Backgrounds</a></h1>
<p>Let's do one more cool thing with backgrounds before we move on.  As you might have guessed from this section's title, we're going to add animation in the background.  And what better to animate than the pond.  Normally, when one is taking a long stroll by a water pond, with a windowless shed and a tree in the park, one would notice that the water ripples ever so slightly as the wind whispers around it.</p>
<p>To make an animating background, you need to simply copy your background image for each frame of animation you want and change the parts of each image that should be animated (in our case, the pond).  AGS allows you to have up to 5 frames of animation that make up your animating background.  We've already created 5 background images for you that show the animating water (aren't we nice?) In each image, the water in the pond is slightly different so, when they are animated it will look like the water is rippling or waving.</p>
<p>Ok then! Let's ripple us some water.</p>
<p>Quit the game if it's running and go back to the room editor and edit room 1 by double-clicking it. Click the <strong>Change...</strong> button to change the background and choose the file named <em>RipplePond1.bmp</em>. You should see some white areas show up in the pond.  This will be the first image that we're going to add to the background to create the ripple effect.  To add the other 4 images, open the drop-down box next to <strong>Background:</strong> (this will say &quot;Main background&quot;) and choose <strong>Import new background</strong>. Say <strong>Yes</strong> to the popup and choose the file <em>RipplePond2.bmp</em>. Do the same thing 3 more times choosing the next <em>RipplePond</em> files in the series.  Ta da! You have an animating background.</p>
<p>Run the game now.  When Foxy shows up to the tree-pond-windowless-shed park now, she'll be able to enjoy a nice ripply pond to stroll next to.  But hang on a minute.  We think the water is moving just a bit too fast.  With that speed, we'd have to make the tree sway back and forth too.  We're too lazy for that, so let's just slow the water down.  Look at the properties pane for the room and find the <code>Settings</code> section. You'll see a setting called <code>BackgroundAnimationDelay</code> (<a href="part1/chapter3/animating_bg.html#figure312">Figure 3.12</a>). Change this setting from 5 to 15. (We played with it and thought 15 looked best.  You can do whatever delay you like.) And that's it!  Now to take care of that whole walk-on-the-tree-trunk business...</p>
<p><a name="figure312"></a>
<span><img src="part1/chapter3/../../images/bganimationdelay.png" alt="" /><br><strong>Figure 3.12: Background Animation Delay</strong></span></p>
<h1><a class="header" href="#walk-behinds" id="walk-behinds">Walk-Behinds</a></h1>
<p>Foxy shouldn't be able to walk <em>on</em> the tree, but she should be able to walk <em>behind</em> it. That's where walk-behind areas come in.  Walk-behind areas in AGS give your game an illusion of depth by allowing characters and objects to appear to walk behind sections of your background.  Since we want Foxy to be able to walk behind the tree, we have to allow her to walk across that area (which is why we kept the walkable area on top of the tree in the last section), but we need to create a walk-behind area so that Foxy will disappear when she walks behind the tree.  Let's do that now.</p>
<p>First, select <strong>Walk-behinds</strong> from the ellipsis next to <strong>Edit this room's</strong>, then select &quot;Walk-behind area ID 1&quot; to create the first area. Now, trace the tree just like you traced the walkable area in the last section.  You'll need to be a little more precise here so zoom in as far as you can to make the outline of the tree follow as closely as possible to the picture.</p>
<blockquote>
<p><strong>Side Note:</strong> If you want more control over drawing the walkable areas or walk-behind areas of your room than AGS editor allows, you can always use a paint program of your choice to create an image mask and use it instead.  More information on this can be found in <a href="part1/chapter3/../../part2/chapter10/masks.html">Chapter 10</a>.</p>
</blockquote>
<p>Once you have the tree outlined, your room's walk-behind should look something like <a href="part1/chapter3/walk_behinds.html#figure313">Figure 3.13</a>. Notice the very top of the picture, just above the sky.  Do you see a blue dashed line going across the picture?  This line is the <strong>baseline</strong> of the walk-behind area.  The baseline is important, so pay attention here. </p>
<p><a name="figure313"></a>
<span><img src="part1/chapter3/../../images/walkbehindtree.png" alt="" /><br><strong>Figure 3.13: Walk-behind on the Tree</strong></span></p>
<p>Every walk-behind has a baseline, which is an imaginary line that gives AGS information on when the character should be drawn behind the walk-behind area. You can click and drag this baseline up and down to wherever you want it to be.  Whenever a character's baseline<sup>*</sup> is above the walk-behind's baseline, the character will be drawn behind the walk-behind area.  Conversely, whenever a character's baseline is below the walk-behind's baseline, the character will be drawn in front of the walk-behind area.  Occasionally, the placement of the walk-behind's baseline takes a little thought, but most of the time the baseline should be placed snug against the bottom of the walk-behind area.  <a href="part1/chapter3/walk_behinds.html#figure314">Figure 3.14</a> shows where we put the baseline of the tree walk-behind area. With the baseline in that position, Foxy will disappear behind the tree when she's above the line.</p>
<blockquote>
<p><strong>Side Note:</strong> By default, the character's baseline is set to the very bottom of the sprite that is used to display the character.  If that sounds confusing, just think about the character's baseline as being the same thing as the character's feet.  Unless your character is an inverted Squirkle with 7 feet from the planet Vexus, this analogy should work pretty well for you.</p>
</blockquote>
<p><a name="figure314"></a>
<span><img src="part1/chapter3/../../images/treebaseline.png" alt="" /><br><strong>Figure 3.14: Baseline for the Walk-behind</strong></span></p>
<p>Now that we've defined the walk-behind area, Foxy should be able to walk behind the tree.  Run the game and see if it works.  When Foxy goes behind the tree, she should really go <em>behind</em> the tree (<a href="part1/chapter3/walk_behinds.html#figure315">Figure 3.15</a>)! If Foxy doesn't walk behind the tree for you, go back and make sure your baseline is set correctly.</p>
<blockquote>
<p><strong>Side Note:</strong> By the way, remember how we outlined the flowerbed at the base of the tree when we were creating our walkable area in the last section?  The reason we excluded the base of the tree from the walkable area was that it adds to the illusion of depth by making it appear that Foxy walks around the tree.  If she could walk directly up to the tree, it would make the tree seem paper thin, which is obviously not what we want.  If you want to see what we mean, go back to your walkable area, and fill in the flower bed so that Foxy can walk there, then run the game and have Foxy walk around the tree.  The tree seems kinda flat, huh?</p>
</blockquote>
<p><a name="figure315"></a>
<span><img src="part1/chapter3/../../images/foxyhiding.png" alt="" /><br><strong>Figure 3.15: Foxy Hiding</strong></span></p>
<h1><a class="header" href="#regions" id="regions">Regions</a></h1>
<p>A Region is basically a place that the character walks onto and something happens.  That makes no sense; let me try again.  A region can be a spot that triggers an event and/or changes the environment.  For example, you could change the light level or color tint in that region.  You can also trigger events when a player walks INTO the region, OUT OF the region, or is just STANDING in the region.  I believe this could best be explained with an example.  So, guess what?</p>
<p>Nope, you guessed wrong! We're going to add another room!!!  And what better place to add a new room than inside our shack?  You can draw your own room of course, but we did the hard work, and you should be able to find a file called <em>ShackRoom1.png</em>, which will become the inside of our shack.</p>
<p>To start, right-click on <strong>Rooms</strong> in the Project Tree and choose <strong>New Room</strong>. Keep the default options and click <strong>OK</strong>. Double-click on <strong>Edit room</strong> under <strong>2:</strong>. in the Project Tree and go ahead and give this room a good name by typing in a name in the <code>Description</code> field of the Properties Pane. We're calling ours <code>Main Hall</code>.</p>
<p>Now think way back to when you first added a background to a room.  Do you remember how you did it?  Good! Add a background to this room using the file <em>ShackRoom1.png</em> (or one that you made).</p>
<p>Great! Now we need a way for Foxy Monk to be able to walk from outside the shack to inside.  That's what we'll use a region for.  We're going to put a region right in front of the door on the outside of the shack.  Basically, when Foxy Monk steps onto the region it would be as if she walked through the door.  Go back to the Project Tree and double-click <strong>Edit room</strong> under <strong>1: Pond</strong> to edit room 1. (Notice that AGS will only allow you to edit one room at a time.  Whenever you start editing a room, it will close the previously opened room.)  Scroll and zoom the background of the Pond room so you can see the shack's door on the right.  Now, select <strong>Regions</strong> from the ellipsis next to <strong>Edit this room's</strong>. Look at the space between the Project Tree and the Properties Pane.  You should see a drop-down box.  This is where you select which region you want to work with.  AGS allows you to have up to 15 regions.  Region 0 is an eraser region and can't be used for what we want (you use it to get rid of other regions.) Choose <strong>Region ID 1</strong> from the drop-down box so we can draw our first region. (<a href="part1/chapter3/regions.html#figure316">Figure 3.16</a>). </p>
<p><a name="figure316"></a>
<span><img src="part1/chapter3/../../images/chooseregion1.png" alt="" /><br><strong>Figure 3.16: Choosing Region 1</strong></span></p>
<p>Drawing a region is very much like drawing a walkable area.  Enclose the area for the region with a drawing tool and fill it in.  To make our door-to-the-shack region, we chose the Rectangle tool (The blue box in <a href="part1/chapter3/walkable_areas.html#figure35">Figure 3.5</a>) and made a small rectangle right in front of the door as in <a href="part1/chapter3/regions.html#figure317">Figure 3.17</a>. Don't make this rectangle too big, otherwise Foxy Monk will go inside the shack when she's far away from the door and that would be just crazy.</p>
<p><a name="figure317"></a>
<span><img src="part1/chapter3/../../images/doorregion.png" alt="" /><br><strong>Figure 3.17: Region in Front of the Door</strong></span></p>
<p>That's all there is to making a region; Except for that whole scripting thing.  But before we start scripting, we need to add an event to that region. You see that thunderbolt symbol in <a href="part1/chapter3/regions.html#figure316">Figure 3.16</a>? Good.  Go ahead and click that.  Once you click it, the Properties Pane will change to show 3 different events:</p>
<ul>
<li>Walks off region</li>
<li>Walks onto region</li>
<li>While standing on region</li>
</ul>
<p>This tells us that we can do something when the character walks off of the region, do something else when the character walks onto it, or do something repeatedly as long as the character is standing on the region.  For our purposes, we want to use the <code>Walks onto region</code> event to make Foxy Monk change rooms when she walks up to the door.  To create the script, click on <code>Walks onto region</code> and then click the <strong>ellipses</strong> that will show up to the right of the input area next to the <code>Walks onto region</code> option (Red circle in <a href="part1/chapter3/regions.html#figure318">Figure 3.18</a>). Doing this will open the script editor for room 1.  (The script editor can also be opened by double-clicking <strong>Room script</strong> in the Project Tree, but that will not add events; it will just open the script editor.)</p>
<p><a name="figure318"></a>
<span><img src="part1/chapter3/../../images/addscriptellipses.png" alt="" /><br><strong>Figure 3.18: Click the Ellipses to Add a Script</strong></span></p>
<p>Now for the fun stuff.  Oh boy, we're going to get into a bit of scripting now.  Don't worry; it's really not as hard as it sounds.  AND it doesn't sound hard.<br>
Huh?<br>
You should see a new function called <code>region1_WalksOnto()</code>. A function is a set of instructions that are grouped together to perform a certain task.  Nifty huh?  Make the function look like <a href="part1/chapter3/regions.html#listing31">Listing 3.1</a>.</p>
<p><a name="listing31"></a></p>
<pre><code class="language-agsscript">function region1_WalksOnto()
{
  cFoxyMonk.ChangeRoom(2, 155, 184);
}
</code></pre>
<p><strong>Listing 3.1</strong></p>
<p>Let's dissect this line-by-line:</p>
<pre><code class="language-agsscript">function region1_WalksOnto()
</code></pre>
<p>This line declares the function <code>region1_WalksOnto</code> that AGS created for us. Notice that the word <code>function</code> is <font color="blue">blue</font> -- this tells you that it's a word that has special meaning in AGS's scripting language.  In this case, the word <code>function</code> means that we are beginning to define a function, and the name that follows, <code>region1_WalksOnto</code>, is the name of the function we're defining.</p>
<p>Following the name of the function we would define any parameters that need to be passed to the function to help it work.  For example, there's a function called <code>Say</code> that is used to cause a character to say something.  Well, if we were using that function, we would need to tell it what the character should say.  This text would be passed to the function as a parameter. Function parameters are included in parentheses after the function name.  (The <code>region1_WalksOnto</code> function doesn't require any parameters, so there's nothing within the parentheses.)</p>
<pre><code class="language-agsscript">{
  cFoxyMonk.ChangeRoom(2, 155, 184);
}
</code></pre>
<p>These next lines are the body of the function.  Everything within the curly braces is considered part of the function.  In our case, there's only one instruction in our function.</p>
<p>Remember when we were creating Foxy Monk, there was an attribute in her character properties called <code>ScriptName</code> and we set it to <code>cFoxyMonk</code>? Any time we want to refer to Foxy in the script, we have to call her by her Script Name (appropriate, eh?).  So, you can see above that we say <code>cFoxyMonk.ChangeRoom</code>. This causes Foxy Monk to eat a jelly donut.  No wait!  I mean it causes her to change rooms.  This time we're <em>calling</em> a function instead of <em>defining</em> one. But what are all those numbers for in the parentheses?  Those are the parameters that the <code>ChangeRoom</code> function needs. If you were observant (and assuming you didn't just copy and paste the code above but actually typed it) you would have noticed that when you typed that open parenthesis after the <code>ChangeRoom</code> function, there was a tool tip that popped up (<a href="part1/chapter3/regions.html#figure319">Figure 3.19</a>). If you did happen to copy and paste the code, or if you just didn't see this tool tip pop up before, you might want to try to re-type this line into AGS by hand so that you can see it.  This tool tip is there to help you remember what parameters are required for the function that you are using.  The first parameter for <code>ChangeRoom</code> is called <code>room</code>, and it's an integer number (we know that because it has an &quot;int&quot; in front of it, which stands for integer.) This is the room that we want Foxy to change to.  In our case, we want her to change to room #2 (the Main Hall) so we type 2 for the room parameter. The second and third parameters are both optional (hence the &quot;optional&quot; keyword in front of each parameter) so we don't have to supply these at all, but we will anyway.  These two parameters are the x and y coordinates of where Foxy should be located in the new room when she shows up there.  We chose coordinates 155 for x and 184 for y.</p>
<p><a name="figure319"></a>
<span><img src="part1/chapter3/../../images/tooltip.png" alt="" /><br><strong>Figure 3.19: Tooltip Pop-up</strong></span></p>
<blockquote>
<p><strong>Side Notes:</strong> </p>
<p>You MUST use AGS to create the function as we did here.  You CAN'T just open the script editor and type a whole function in because AGS won't know to connect the function to its event.  See the Scripting appendix for more.</p>
<p>If you're controlling the main character, you can use the keyword <code>player</code> instead of <code>cFoxyMonk</code>. It will always stand for the player character.</p>
<p>How do you know what x and y coordinates to use?  Well, open your room in the room editor (double-click <strong>Edit room</strong>) and move your mouse around on your room.  Do you see at the top, where it says Mouse coords?  This tells you the x and y position of your mouse cursor.  So, just put your mouse at the spot in your room where you want Foxy's feet to be, and then look at the value of Mouse coords.  Plug those numbers into the script and that's all you need to do!</p>
<p>What happens if you don't supply those optional parameters?  Many functions in AGS have optional parameters and each function behaves differently if you don't supply them.  In the case of <code>ChangeRoom</code>, for example, if you didn't supply the x and y coordinates then Foxy's position wouldn't change in the new room.  In other words, her x and y coordinates would remain the same from one room to the other. So, if she were standing at x, y coordinate (10, 137) and you called <code>ChangeRoom</code> but didn't specify a new x, y location, then she would be at location (10, 137) in the new room as well.  Other functions that have optional parameters have fixed default values that they will take if you don't supply them.  When in doubt, just hit <strong>F1</strong> and refer to the manual. It will tell you what the default values are for each optional parameter in AGS.</p>
</blockquote>
<p>That's all there is to the function.  Let's review real quick:</p>
<ul>
<li>We created a region in front of the house that will be used to cause Foxy to enter the shack.</li>
<li>We created an Event that was associated to that region so that whenever Foxy walks onto the region it calls our function <code>region1_WalksOnto</code>.</li>
<li>Inside this function is the scripting command that actually causes Foxy to change rooms.</li>
</ul>
<p>Cool huh?</p>
<p>Now run your game and have Foxy walk just in front of the door to the shack.  If everything worked correctly, Foxy will now be inside the shack!  Yippee! Oh, hang on a second...She can't move around in this new room at all (are her feet stuck in cement?) and she can't get back to the pond yet.</p>
<p>First things first: Foxy can't walk around in the new room because we haven't created a walkable area for her yet.  Remember that a walkable area defines the area on the screen where characters can walk, and since we haven't created one yet in our new room, Foxy can't walk around at all!  That's easily fixed.  Go back to the room editor by double-clicking on <strong>Edit room</strong> under the Main Hall room in the Project Tree. Select <strong>Walkable areas</strong> and ... you should be quite familiar with this now.  Trace around the floor area using the Line tool (<a href="part1/chapter3/regions.html#figure320">Figure 3.20</a>) and then fill that with the Fill area tool (<a href="part1/chapter3/regions.html#figure321">Figure 3.21</a>). Make sure to add a little extra walkable area that goes up into the top room (You'll see why later.)</p>
<p><a name="figure320"></a>
<span><img src="part1/chapter3/../../images/hallwalkable1.png" alt="" /><br><strong>Figure 3.20: Trace the Walkable Area in the Main Hall</strong></span></p>
<p><a name="figure321"></a>
<span><img src="part1/chapter3/../../images/hallwalkable2.png" alt="" /><br><strong>Figure 3.21: Complete Walkable Area in the Main Hall</strong></span></p>
<p>Now if you run the game you should find that Foxy can walk around in the shack, but there's still one problem: once she enters the shack, there's no way for her to leave!  Don't worry Foxy, we'll fix that in the next section.</p>
<h1><a class="header" href="#room-edges" id="room-edges">Room Edges</a></h1>
<p>Regions are one way to change rooms, but it's not always the best way.  Most of the time room changes will occur as the character walks off one of the room's edges.  Unless you want to do some teleporting, of course.</p>
<p>The first thing we should do is allow Foxy to leave the shack and get back out that door.  We could create a region at the bottom of the shack floor and put some code in place for that region to move Foxy out to the pond area, or we could use the room's bottom edge for that.  Since changing rooms happens at the edges most of the time, room edges cut down on some of the work of having to draw the regions.</p>
<p>tart by choosing <strong>Edges</strong> from the ellipsis at the top of the room editor. (We're assuming you know where this is by now.)  You should see 4 yellow lines -- one for each edge (<a href="part1/chapter3/edges.html#figure322">Figure 3.22</a>)</p>
<p><a name="figure322"></a>
<span><img src="part1/chapter3/../../images/roomedges.png" alt="" /><br><strong>Figure 3.22: Room Edges</strong></span></p>
<p>Be aware that one or more of the edges might be, literally, right up along the edge, so look hard to find them (The left edge in <a href="part1/chapter3/edges.html#figure322">Figure 3.22</a> is flush against the left side.) Just like you can create a function that runs when a character enters a region, you can also set up a function that runs when a character crosses one of these edges.  To leave the shack, we want to fire up a function when Foxy crosses the bottom edge (where she came in).   We need the bottom edge to be moved up a little so that Foxy can actually cross it.  Click and drag the bottom edge so that the y coordinate (the second number in the Mouse Position) is set at about 188.</p>
<p>Now let's write the function. Make sure that the Properties Pane is set for the room itself by choosing <code>Main Hall</code> from the drop-down then click the lightning bolt between the Project Tree and the Properties Pane (see <a href="part1/chapter3/regions.html#figure318">Figure 3.18</a> if you don't remember where the lightning bolt is.) You should see some events pop up.  One of these events should be <code>Walks off bottom edge</code>. Click on that event and then click on the ellipses button on the far right that will pop up.  This is going to create the function, link to the event, and place you in the function (script) editor.  The code for this function is going to be very similar to the code for the region we created earlier and looks like <a href="part1/chapter3/edges.html#listing32">Listing 3.2</a>.</p>
<blockquote>
<p><strong>Side Note:</strong> From now on, when we refer to the edges of a room, we will be talking about the edges that we can drag and NOT the physical edge of the picture.</p>
</blockquote>
<p><a name="listing32"></a></p>
<pre><code class="language-agsscript">function room_LeaveBottom()
{
  cFoxyMonk.ChangeRoom(1, 634, 108);
}
</code></pre>
<p><strong>Listing 3.2</strong></p>
<p>As you can see, the differences between this function and the last one we wrote are the name of the function, the room number to change to, and the x,y coordinates.  We chose those coordinates by looking at room 1 (the Pond) and placing the mouse where we want Foxy to be when she comes out.  Oh, and make sure not choose chose any x,y coordinates that are right in the region we created in room 1. Otherwise, Foxy will never be able to leave the shack because as soon as she does, she'll step on the region and come right back in.</p>
<p>And that's all there is to edges.  While we're here, let's go ahead and create the two remaining rooms in the shack and create edges to get into and out of them.  Find two files named <em>ShackRoom2.png</em> and <em>ShackRoom3.png</em>. Create two new rooms with those files as backgrounds.  Make <em>ShackRoom2.png</em> room 3 and <em>ShackRoom3.png</em> room 4. Well ok, so the numbering can get confusing.  Live with it.  Name room 3 &quot;Bathroom&quot; and room 4 &quot;Longroom.&quot; Hopefully, you remember how to do all that.  Now create walkable areas in both rooms that look something like <a href="part1/chapter3/edges.html#figure323">Figure 3.23</a>. </p>
<p><a name="figure323"></a>
<span><img src="part1/chapter3/../../images/shackrooms.png" alt="" /><br><strong>Figure 3.23: The Other 2 Rooms in the Shack</strong></span></p>
<p>And yes, we know that the walkable area in the bathroom goes behind the wall, so guess what you have to do with that.  Yep, create a walk-behind for it so it looks like <a href="part1/chapter3/edges.html#figure324">Figure 3.24</a> (we created two.) And remember to set the baseline for your walk-behind all the way at the bottom so that Foxy will always be behind that wall when she walks there. (You can see ours as a dotted blue line all the way at the bottom.)</p>
<p><a name="figure324"></a>
<span><img src="part1/chapter3/../../images/walkbehindbathroom.png" alt="" /><br><strong>Figure 3.24: Walk-behinds in the Bathroom</strong></span></p>
<p>Great! Now we're ready to add some functions for two more edges in our first shack room.  Let's start with the bathroom.  Go back to editing room 2's edges and drag the top edge so that it's just at the junction where the floor meets the walls (<a href="part1/chapter3/edges.html#figure325">Figure 3.25</a>). Once the edge is in the correct spot, create a new function for the <code>Walks off top edge</code> event (hint: click the ellipses button next to the event) and make it so it looks like <a href="part1/chapter3/edges.html#listing33">Listing 3.3</a>. </p>
<p><a name="figure325"></a>
<span><img src="part1/chapter3/../../images/halledges.png" alt="" /><br><strong>Figure 3.25: Set the Top Edge at the Bottom of the Wall</strong></span></p>
<p><a name="listing33"></a></p>
<pre><code class="language-agsscript">function room_LeaveTop()
{
  cFoxyMonk.ChangeRoom(3, 160, 189);
}
</code></pre>
<p><strong>Listing 3.3</strong></p>
<p>Before running the game, go ahead and add the right edge function to move Foxy to room 4.  I'll let you do that on your own.  Run the game and walk around.  Then, once you realize that your stuck either in the bathroom or the longroom, go ahead and write the functions to exit out of those rooms using the bottom edge of the bathroom and the left edge of the longroom.  Our code for that is in <a href="part1/chapter3/edges.html#listing34">Listing 3.4</a>. The first function is in room 3's file and the second function in room 4's. </p>
<p><a name="listing34"></a></p>
<pre><code class="language-agsscript">function room_LeaveBottom()
{
  cFoxyMonk.ChangeRoom(2, 159, 118);
}

function room_LeaveLeft()
{
  cFoxyMonk.ChangeRoom(2, 310, 168);
}
</code></pre>
<p><strong>Listing 3.4</strong></p>
<h1><a class="header" href="#lighting" id="lighting">Lighting</a></h1>
<p>Some of you may have noticed that there's a light in the Long Room.  I'd say as   long as there's that light there, let's use it to our advantage and create a lighting effect for Foxy.  Edit room 4 and create two regions right under the light (blue region) and in the cone of the light (green region) as in <a href="part1/chapter3/lighting.html#figure326">Figure 3.26</a></p>
<p><a name="figure326"></a>
<span><img src="part1/chapter3/../../images/lightingregions.png" alt="" /><br><strong>Figure 3.26: The Two Lighting Regions</strong></span></p>
<p>Now here's how easy it is to set the lighting.  Choose <strong>Region ID 1</strong> (left image) from the dropdown between the Project Tree and the Properties Pane. Change the <code>lightLevel</code> property from 100 to 150.  Choose <strong>Region ID 2</strong> (right image) and change that light level from 100 to 120.  Run the game and go into that room.  Walk around in and out of the regions and watch how the lighting on Foxy changes.</p>
<p>All regions start out with a default lighting level of 100%, but AGS allows you to change that level from 0% (pitch black) all the way up to 200% (very bright). Easy peasy.</p>
<h1><a class="header" href="#scaling" id="scaling">Scaling</a></h1>
<p>When Foxy is walking around in the bathroom she looks like a little child who can't reach anything.  Foxy is not a little child though.  We have to make sure she fits into her surroundings well, especially if she needs to use the toilet.  Let's scale her up a notch when she's in the bathroom.  Edit the bathroom and choose the room's walkable area.  In the Properties Pane, change the <code>ScalingLevel</code> propery to 220.  Take Foxy into the bathroom and check it out.  She's HUMONGOUS.</p>
<p>Let's also add some scaling in the Long Room.  It would be nice if Foxy got smaller as she walked towards the back wall since she's walking away from us.    There's another property called <code>UseContinuousScaling</code>, which is set to <code>False</code> by default. Turning this option on will replace the <code>ScalingLevel</code> property with two new ones called <code>MinScalingLevel</code> and <code>MaxScalingLevel</code>. This will cause Foxy to gradually change her scaling as she moves from the bottom of the room to the top.  The &quot;Min&quot; property is the top and the &quot;Max&quot; is the bottom. Edit the Long Room and view its walkable areas.  Change the <code>UseContinuousScaling</code> property to <code>True</code> and set the &quot;Min&quot; to 100 and the &quot;Max&quot; to 200. This will cause Foxy to get smaller as she moves to the back of the room.  Run the game and make Foxy walk next to the green table on the right of the room.  You should notice that she gets smaller and her head stays mostly in the same position relative to the table.</p>
<h1><a class="header" href="#room-transitions" id="room-transitions">Room Transitions</a></h1>
<p>Now that Foxy can go to the different rooms in the shack, we need to talk about something called Room Transitions.  This isn't something that's really a feature of AGS but it's something to keep in mind to give your game a little bit of a professional touch.  Right now, when Foxy walks from room to room, as soon as she passes the room edge, Foxy freezes in place and the game immediately moves to the next room and Foxy instantly jumps to the correct (x, y) coordinates in the new room.</p>
<p>Let's pretend like we're a player of your game.  We've just entered the shack for the first time and we're exploring a bit and walking around.  We walk Foxy over near the right side of the screen because we want to see something over there, and BOOM!  We cross the right edge of the room and we're suddenly in another room.  If we didn't know that we just crossed the right edge of the screen, we might be a little confused as to why we're suddenly somewhere else.</p>
<p>A much more elegant alternative would have been, as soon as Foxy crosses the right edge of the screen, she continues to walk off the screen before the room changes and then, when the new room appears, we see Foxy walk into the screen from the left side.  This kind of attention to detail is what will make your game stand out and will give it a bit more of a polished look and feel.</p>
<p>So, how would we go about doing this?  Well, we've really already outlined what we need to do; we just need to write it into the script.</p>
<p>There are two things we need to accomplish here.  First, we said that when Foxy crosses the edge of the screen we want her to continue to walk off the screen instead of just freeze in place before the room changes.  And the second thing we want is, when Foxy enters the new room, she should walk in from the left side of the screen.</p>
<h2><a class="header" href="#walking-off-the-screen" id="walking-off-the-screen">Walking off the screen</a></h2>
<p>Open the room script for the Main Hall room.  Find the function we created in the last section called <code>room_LeaveRight</code>. Change that function so it looks like this:</p>
<pre><code class="language-agsscript">function room_LeaveRight()
{
  cFoxyMonk.Walk(335, cFoxyMonk.y, eBlock, eAnywhere);
  cFoxyMonk.ChangeRoom(4, -15, cFoxyMonk.y);
}
</code></pre>
<p>You can probably figure out what that Walk statement does.  This is where we tell Foxy to walk off the right edge of the screen before the room changes.  The first two parameters are the <code>x</code> and <code>y</code> location that we want her to walk to.  We're doing something a little strange with each of these parameters (so pay attention!). Remember back to our background image of this room.  Its dimensions are 320 pixels wide by 200 pixels high.  Why, then, did we choose an x location of 335 to pass to the Walk function?  That's not even within the bounds of the background!  But wait, we want Foxy to walk <em>off the screen</em> before she changes rooms so this is ok.  An x location of 335 will give us this effect. But what about that y location?  What the heck is <code>cFoxyMonk.y</code>? This simply refers to the current y location of Foxy.  By using this value instead of hard-coding a number, she will walk in a horizontal direction as she walks off the edge of the screen.</p>
<p>The next parameter to the Walk function is the <code>BlockingStyle</code>. This tells AGS whether or not to wait for this command to finish before moving on to the next line of scripting.  There are two possible values you can use here: <code>eBlock</code> and <code>eNoBlock</code>. We're using <code>eBlock</code> in this case, because we don't want Foxy to switch rooms until after she has finished walking.</p>
<p>Finally, the last parameter, <code>WalkWhere</code>, tells Foxy whether she has to obey the walkable areas we've defined in the room in order to reach her destination.  If we use <code>eWalkableAreas</code> here, then Foxy will only walk on the Walkable areas.  This isn't what we want since we're explicitly telling her to walk off the edge of the screen where there's no walkable area defined. So, we'll use the other option for this parameter, <code>eAnywhere</code>, which allows Foxy to walk anywhere on the screen (or even off the screen!).</p>
<p>So that takes care of the walking part.  But we also changed the <code>ChangeRoom</code> line. As we learned in a previous section, the <code>ChangeRoom</code> function takes 3 parameters -- namely, a room number, and an x and y location of where she will be in the new room.  The room number didn't change but we did change the x and y location.  We're using an x location of -15 for the same reason we used 335 for x earlier: we want Foxy to walk into the new room from off the screen, so we need to set her x location to be off the left edge of the screen. This will be her starting location in the new room.  The y location doesn't need to change from room to room, so we can just use <code>cFoxyMonk.y</code> for it. So to reiterate:  To walk Foxy <strong>OFF</strong> the screen, tell her to walk completely off the edge of the screen and then set her new (x,y) coordinates (for the new room) also off the screen so that she can start there and walk onto the new screen.  Confused?  Don't worry.  You just need to see it in action, and you'll get it soon enough.</p>
<h2><a class="header" href="#walking-onto-the-screen" id="walking-onto-the-screen">Walking onto the screen</a></h2>
<p>So that takes care of walking off the screen.  Now we need to handle the situation where Foxy walks back onto the screen in the new room.  Double click <strong>Edit Room</strong> under <strong>Room 4: Longroom</strong> to bring up the room in the editor.  Now, click on the <strong>Events</strong> button to bring up the events tab, and click the ellipses next to <code>Enters room after fade-in</code>. This will create a new script function called <code>room_AfterFadeIn</code>. Edit that function so it looks like this:</p>
<pre><code class="language-agsscript">function room_AfterFadeIn()
{
  if(cFoxyMonk.PreviousRoom == 2)
  {
    cFoxyMonk.Walk(23, cFoxyMonk.y, eBlock, eAnywhere);
  
  }
}
</code></pre>
<p>Here, we're doing two things.  First, we're checking to make sure that the room that Foxy was just in was the Main Hall.  If it was, then we're going to have her walk from her current position to somewhere just inside the room.</p>
<pre><code class="language-agsscript">if (cFoxyMonk.PreviousRoom == 2)
</code></pre>
<p>This line does the checking part.  We're using an <code>if</code> statement to look at Foxy's <code>PreviousRoom</code> attribute to see if she was just in the Main Hall (room 2).  Note the use of the double equals signs.  Double equals signs are used for testing equality, so don't let that throw you.</p>
<p>Next, we have an open curly brace, followed by:</p>
<pre><code class="language-agsscript">cFoxyMonk.Walk(23, cFoxyMonk.y, eBlock, eAnywhere);
</code></pre>
<p>This is our good friend the Walk function again.  This should be familiar now, but just for clarity's sake, I'll explain it briefly.  We're telling Foxy to walk to x location 23 but ensuring that her y location doesn't change so she walks in a straight horizontal line.  We don't want anything else to happen until she gets there so we use <code>eBlock</code> for the <code>BlockingStyle</code>.  And finally, since we're walking outside of our normal walkable areas, we have to use <code>eAnywhere</code> as the <code>WalkWhere</code> parameter.</p>
<p>That should do it.  Run the game and try it out.  Walk Foxy into the shack then walk to the right to see our transitions in action!  Notice how she walks off the screen to the right, then the screen changes, and we see her walk onto the screen from the left.  Man! How I wish we could do video screenshots!!!</p>
<h2><a class="header" href="#a-little-scripting-detour" id="a-little-scripting-detour">A Little Scripting Detour...</a></h2>
<p>So far, our functions have been simple.  You have a name for the function preceded by the word <strong>function</strong>, you follow the name with parentheses, and then you put the statements within curly braces like this:</p>
<pre><code class="language-plaintext">function myFunction()
{
   do something here;
}
</code></pre>
<p>In the preceding sub-section, we introduced something new: the <code>if</code> statement. This statement examines a condition and only does the statements under it if the condition is true.  So to do something only if Foxy is in room 1 we say <code>if(cFoxyMonk.Room == 1)</code>. If we want her to do something if she's in any room <em>except</em> room 1 <code>we say if(cFoxyMonk.Room != 1)</code>. Just like a function, an <code>if</code> statement can be a block.  All the statements in an <code>if</code> block will execute if the <code>if</code> statement is true. Use curly braces to distinguish an <code>if</code> block just like you do with a function, like this:</p>
<pre><code class="language-plaintext">function myFunction()
{
   if(cFoxyMonk.Room == 1)
   {
     do something here;
		do some more;
   }
   if(cFoxyMonk.Room != 1)
   {
		do something else;
   }
}
</code></pre>
<p>In this example we do two statements if Foxy is in room 1, and we do one other statement if she's not in room 1.  This would be a good time to introduce the <code>else</code> clause. An <code>if</code> statement can have an <code>else</code> clause that happens only if the <code>if</code> statement is <code>false</code>, like this:</p>
<pre><code class="language-plaintext">function myFunction()
{
   if(cFoxyMonk.Room == 1)
   {
     do something here;
		do some more;
   }
   else
   {
		do something else;
   }
}
</code></pre>
<p>This gives us the same function, but we don't have to check the room twice.  If Foxy is in room 1 do the first block, otherwise do the second.</p>
<blockquote>
<p><strong>Side Note:</strong> If an <code>if</code> or <code>else</code> clause only has one statement in it, then the curly braces are optional.</p>
</blockquote>
<p>Another importan feature of <code>if</code> statements is the <code>else/if</code> block. You can have one or more of these to test for different cases.  Let's say you want to do one thing if Foxy is in room 1, something else if she's in room 2, and something completely different if she's in any other room.  It would look like this:</p>
<pre><code class="language-plaintext">function myFunction()
{
   if(cFoxyMonk.Room == 1)
   {
     do something here...
		do some more...
   }
   else if(cFoxyMonk.Room == 2)
		do something else;
   else
		do something completely different;
}
</code></pre>
<p>One last thing to cover about <code>if</code> statements is checking for multiple cases all at once.  Let's say we want to do something if Foxy is in room 1 AND her x coordinate is 35:</p>
<pre><code class="language-agsscript">if(cFoxyMonk.Room == 1 &amp;&amp; cFoxyMonk.x == 35)
</code></pre>
<p>The double ampersand makes the <code>if</code> statement true ONLY if Foxy is in room 1 AND at the x coordinate 35. If we want to do something if EITHER she's in room 1 OR she's in room 2 it would look like this:</p>
<pre><code class="language-agsscript">if(cFoxyMonk.Room == 1 || cFoxyMonk.Room == 2)
</code></pre>
<p>The double pipe ( |  ) symbol is an OR.  The <code>if</code> statement will be true if Foxy is either in room 1 or room 2.</p>
<p>And finally, here's a table of the tests you can do in an <code>if</code> statement:</p>
<table width=100%>
<tr><td><b>Test</b></td><td><b>What</b></td></tr>
<tr><td>==</td><td>Left term is equal to right term</td></tr>
<tr><td>!=</td><td>Left term is not equal to right term</td></tr>
<tr><td>&lt;</td><td>Left term is less than right term</td></tr>
<tr><td>&gt;</td><td>Left term is greater than right term</td></tr>
<tr><td>&lt;=</td><td>Left term is less than or equal to right term</td></tr>
<tr><td>&gt;=</td><td>Left term is greater than or equal to right term</td></tr>
</table>
<h1><a class="header" href="#homework" id="homework">HOMEWORK</a></h1>
<p>Make 3 more screen transitions: One for going into the bathroom, one for coming back to the main hall from the bathroom, and one for coming back to the main hall from the longroom.  You can also add the same code to the region in room 1 and <code>afterFadeIn</code> of room 2 to walk Foxy in from the outside.  Just as a bit of help, here's the final code for the <code>afterFadeIn</code> function of room 2.</p>
<pre><code class="language-agsscript">function room_AfterFadeIn()
{
  if (cFoxyMonk.PreviousRoom == 1)
  {
    cFoxyMonk.Walk(cFoxyMonk.x, 184, eBlock, eAnywhere);
  }
  else if (cFoxyMonk.PreviousRoom == 3)
  {
    cFoxyMonk.Walk(cFoxyMonk.x, 120, eBlock, eAnywhere);
  }
  else if(cFoxyMonk.PreviousRoom == 4)
  {
    cFoxyMonk.Walk(300, cFoxyMonk.y, eBlock, eAnywhere);
  }
}
</code></pre>
<h1><a class="header" href="#summary-3" id="summary-3">Summary</a></h1>
<p>Rooms are an integral part of any game in AGS.  In this chapter we talked about the main elements of rooms:</p>
<ul>
<li><strong>Rooms</strong> The Room editor in AGS is actually one of the more complex editors, but it's important to understand how to use it.  Rooms are where the game action happens.  Rooms in AGS aren't necessarily &quot;rooms&quot; in the traditional sense, in that they might not have four walls, a floor, and a ceiling.  A room can be an outdoor area just as well as a traditional room inside.</li>
<li><strong>Backgrounds</strong> The room's image is called the background.  A background that is larger than the game's native resolution will automatically scroll when the character moves around the room.  Also, a background can have up to 5 animated frames and AGS will cycle through them all, creating an animated background.</li>
<li><strong>Walkable Areas</strong> The areas of the screen where the character is allowed to walk are called Walkable Areas.</li>
<li><strong>Walk-behinds</strong> Walk-behinds give the room a 3-D effect by allowing the character to appear to walk behind areas of the room's background.  This is useful, for example, if you have a tree, a table, a wall, or any other object that is part of the room background that characters should be able to walk behind.</li>
<li><strong>Regions</strong> A player might decide to interact with the room's background.  Using regions, you can distinguish between different parts of the background and have each part of the room react differently to player interactions.</li>
<li><strong>Room Edges</strong> Walking off the edge of the screen can trigger events to happen, like changing to another room, for example.  The Room Edges define where the player must walk to for those events to occur.</li>
<li><strong>Lighting</strong> AGS gives you the illusion of lighting by setting the light level of regions in each room.  When a character is within a region, its brightness is affected by the light level of that region.  You can cause a character to ignore light levels by setting the <code>IgnoreLighting</code> attribute of the character to <code>True</code> within the script, or by setting <code>UseRoomAreaLighting</code> to False in the Character editor.</li>
<li><strong>Scaling</strong> Things in your game can grow and shrink with distance by using scaling.  This is a feature of walkable areas.</li>
<li><strong>Transitions</strong> When your characters leave and enter rooms, it's nice to give the player feedback of this happening by, instead of triggering a new room as soon as the player crosses the room's edge, have the character continue to walk off the edge of the screen before triggering the new room.</li>
</ul>
<h1><a class="header" href="#chapter-4---interacting-with-your-world" id="chapter-4---interacting-with-your-world">Chapter 4 - Interacting with Your World</a></h1>
<p>Our game is coming along quite nicely at this point.  We have a main character that is fully animated, and she can walk around and visit 4 different rooms.  But we're far from finished yet.  After all, even though we've accomplished a lot, Foxy still can't really <em>do</em> anything yet. All she can do is walk.  There are several more actions that the player can do, and we'll start to focus on them in this chapter in the section about <em>Hotspots</em>. Also, Foxy should be able to pick up things to put in her inventory and interact with objects in her environment (after all, this <em>is</em> an adventure game!). Well don't worry; we'll cover that in this chapter as well when we talk about <em>Objects</em> and <em>Inventory Items</em>.</p>
<h1><a class="header" href="#interaction" id="interaction">Interaction</a></h1>
<p>So far, we've had Foxy walk around each room by clicking the little mouse icon (which looks like a shoe) on different parts of the screen.  But have you tried right-clicking?  We briefly mentioned this before, but let's try it again.  Load up the game and try it now.  You'll notice that your mouse cursor changes from a shoe to a magnifying glass (<a href="part1/chapter4/interaction.html#figure41">Figure 4.1</a>). If you right-click again, it will change to a hand, and if you right-click yet again it will change to a speech bubble with exclamation point and question mark.  If you continue to right-click, it will simply cycle back through these four mouse cursors.  (We know, this is all basic stuff but not everyone read the first chapter.)  Each of these mouse cursors represents a different action that the player can take.  The shoe, as we've seen, is used for walking; the maginifying glass is used for looking around; the hand is for interacting with things; and the speech bubble is used to talk to someone or something. When you left-click you are performing that action on whatever you left-clicked on.  Rocket science, right?</p>
<p><a name="figure41"></a>
<span><img src="part1/chapter4/../../images/magnifycursor.png" alt="" /><br><strong>Figure 4.1: The Magnifying Glass Cursor</strong></span></p>
<p>Notice, though, that none of the mouse modes does anything except the walk mode.  That's because we haven't told AGS to do anything with those modes yet!  That's all about to change.</p>
<h1><a class="header" href="#hotspots" id="hotspots">Hotspots</a></h1>
<p>Let's just say that we want Foxy to be able to look at the big tree next to the pond.<br />
What we'd really like is for the game to say something witty and clever when the player clicks the magnifying glass cursor on the tree, like, &quot;That's a big tree next to the pond.&quot; (<a href="part1/chapter4/hotspots.html#figure42">Figure 4.2</a>)</p>
<p><a name="figure42"></a>
<span><img src="part1/chapter4/../../images/lookattree.png" alt="" /><br><strong>Figure 4.2: Foxy Looks at the Tree</strong></span></p>
<p>We'll do that using a hotspot.  To get started, edit the Pond room, and select <strong>Hotspots</strong> from the <strong>Edit this room's</strong> area. Since we don't have any hotspots yet, all you see is the pond, but let's draw a hotspot on the tree.  Select <strong>hHotspot1</strong> from the dropdown list of Hotspots by clicking the ellipses. Using the drawing tools at the top of the window, outline the tree, and then flood fill the area inside your outline.  This should color the tree blue, as in <a href="part1/chapter4/hotspots.html#figure43">Figure 4.3</a>.</p>
<p><a name="figure43"></a>
<span><img src="part1/chapter4/../../images/treehotspot.png" alt="" /><br><strong>Figure 4.3: A Hostspot on the Tree</strong></span></p>
<p>Before we start to use the hotspot, let's rename it to something that makes a little more sense than &quot;hHotspot1.&quot; Make sure that <strong>hHotspot1</strong> is still selected and look in the Properties Pane for an attribute called <code>Name</code>. Change the value of that attribute from <code>hHotspot1</code> to <code>hTree</code> (the &quot;h&quot; stands for &quot;hotspot.&quot;) While we're at it, let's go ahead and change the description of the tree to something descriptive like, &quot;The tree by the pond.&quot; When you're done, the Properties Pane should look like <a href="part1/chapter4/hotspots.html#figure44">Figure 4.4</a>. </p>
<p><a name="figure44"></a>
<span><img src="part1/chapter4/../../images/hotspotprops.png" alt="" /><br><strong>Figure 4.4: The Properties Window for Our First Hotspot</strong></span></p>
<p>Now we need to tell AGS to display our message whenever the player clicks the magnifying glass mouse cursor on the tree.  Bring up the Events for the hotspot by clicking the lightning bolt icon in the Properties Pane (<a href="part1/chapter4/hotspots.html#figure45">Figure 4.5</a>). </p>
<p><a name="figure45"></a>
<span><img src="part1/chapter4/../../images/hotspotevents.png" alt="" /><br><strong>Figure 4.5: Events for the Tree Hotspot</strong></span></p>
<p>Here we have all the events that can occur with a hotspot.  There's one for each mouse mode (Interact [Hand], Look at [Magnifying Glass], Stands on [Walk], and Talk to [Speech Bubble]), as well as some other events that can occur, like when the mouse moves over the hotspot, when the player uses an inventory item on the hotspot, and also a couple of &quot;Usermode&quot; events which can be used if you want to create your own custom mouse modes (we'll go over each of these later).</p>
<p>At the moment we're interested in the magnifying glass cursor, so click on the event <strong>Look at hotspot</strong>, and then click the ellipses button next to the event to create the function in the room script.  The function that AGS creates for you is called <code>hTree_Look</code>. All that's left to do now is to add one simple line to that function:</p>
<pre><code class="language-agsscript">Display(&quot;That's a big tree next to the pond.&quot;);
</code></pre>
<p>That line causes AGS to display a message on the screen with the text &quot;That's a big tree next to the pond.&quot;</p>
<p>Run the game and right-click to change to the magnifying glass cursor, then left-click on the tree. If you did everything right, the message will appear just like in <a href="part1/chapter4/hotspots.html#figure42">Figure 4.2</a> above.  Cool!</p>
<h1><a class="header" href="#objects" id="objects">Objects</a></h1>
<p>Objects are exactly what their name implies they are.  They're objects; things in the game that can move.  They can disappear and come back.  They can move up and down the screen.  Or even side to side if that's your fancy.  A good example of an object is a door, or a tree branch.  Or maybe even a light switch.</p>
<p>Let's add a door to the bathroom.  Most people enjoy the ability to do their business in private.  In addition, most people like having huge garage-door-like doors in their house that lead to the bathroom.  Let's do that now.  Use your favorite painting program to draw a door that fits into the opening to the bathroom. Or...you can use the one we provided in our sprites section called <em>BathroomDoor.bmp</em>. Let's begin by creating a new folder under Sprites.  Double-click on <strong>Sprites</strong> in the Project Tree to open the sprites editor.  Right-click on the <strong>Main</strong> folder on the left and choose to <strong>Create sub-folder</strong> and name it <em>Objects</em>. Of course, you don't have to do this, but it will keep all your sprites organized.  Now open that folder and import the door sprite from the file.  You should know how to do this by now.  The final result is in <a href="part1/chapter4/objects.html#figure46">Figure 4.6</a>.</p>
<p><a name="figure46"></a>
<span><img src="part1/chapter4/../../images/importbathroomdoor.png" alt="" /><br><strong>Figure 4.6: Importing the Bathroom Door</strong></span></p>
<p>Great! Now let's add that door as an object to our Main Hall.  Edit the Main Hall room and choose Objects from the <strong>Edit this room's</strong> area. Now right-click on the background somewhere and choose <strong>Place New Object Here</strong>. As you can see, that created a new object in the room and made it look like a little blue cup (<a href="part1/chapter4/objects.html#figure47">Figure 4.7</a>).</p>
<p><a name="figure47"></a>
<span><img src="part1/chapter4/../../images/bluecupobject.png" alt="" /><br><strong>Figure 4.7: Our Little Blue Cup Object (up on the ceiling)</strong></span></p>
<p>The blue cup is the default look of all objects.  Now let's make that cup transform into a door.  Go back to the sprite editor and get the sprite number of the door.  You should find it right under the sprite as in <a href="part1/chapter4/objects.html#figure46">Figure 4.6</a>. </p>
<p>For our game here, the number is 18 (in your game the number might be different so be sure to check.) Now back in the room editor click on the blue cup to make sure it's selected and change the <code>Image</code> property to the sprite's number as in <a href="part1/chapter4/objects.html#figure48">Figure 4.8</a>. Oh, go ahead give the object a name.  We call it <code>oDoor</code> (the little o means object.)</p>
<blockquote>
<p><strong>Side Note:</strong> If you don't give it a name you won't be able to associate any events to it.  But AGS will tell you that if you forget.</p>
</blockquote>
<p><a name="figure48"></a>
<span><img src="part1/chapter4/../../images/changeobjectimage.png" alt="" /><br><strong>Figure 4.8: Changing the Object's Image</strong></span></p>
<p>You should see the blue cup change into the door.  Use the mouse to drag the door to its proper position.  Ta da!  We now have privacy.  But how do we open this door?</p>
<p><a name="figure49"></a>
<span><img src="part1/chapter4/../../images/bathroomdoor.png" alt="" /><br><strong>Figure 4.9: Our Bathroom Door</strong></span></p>
<p>To open the door, we need to create an event for when Foxy interacts with the door.  This is going to be much like the event created for the hotspot on the tree.  Click the lightning bolt to open the door events in the Properties Pane and add a function to the <strong>Interact object</strong> event. Now we want to tell the door to slide up when Foxy interacts with it (Yes, we're making a sliding door). For this function we need to move the object up when it's clicked on, and down when it's clicked on again.  Look at the Properties Pane for the door and find the <code>StartY</code> value.</p>
<p><a name="figure410"></a>
<span><img src="part1/chapter4/../../images/startyvalue.png" alt="" /><br><strong>Figure 4.10: See the StartY Value?</strong></span></p>
<p>This is, by default, the bottom left pixel of an object.  We want to move this pixel up and down as necessary.  As you can see from <a href="part1/chapter4/objects.html#figure410">Figure 4.10</a>, the <code>StartY</code> value for our door is 114.  Moving it up to about 55 should accomplish what we want, but feel free to play with the value once you get the thing moving.  So, to move this object up, use the <code>Move</code> function as follows:</p>
<pre><code class="language-agsscript">oDoor.Move(oDoor.X, 55, 3, eBlock, eAnywhere);
</code></pre>
<p>This function will keep the door's x coordinate in the same spot and move the y coordinate up to 55.  To move the door back down we just reverse this as follows:</p>
<pre><code class="language-agsscript">oDoor.Move(oDoor.X, 114, 3, eBlock, eAnywhere);
</code></pre>
<p>The <code>eBlock</code> and <code>eAnywhere</code> is nothing new, but what does that 3 do? Well, that's the speed of movement.  Again, feel free to play with that as needed.  So, our finished function should look like this:</p>
<pre><code class="language-agsscript">function oDoor_Interact()
{
  if (oDoor.Y == 114)
  {
    oDoor.Move(oDoor.X, 55, 3, eBlock, eAnywhere);
  }
  else 
  {
    oDoor.Move(oDoor.X, 114, 3, eBlock, eAnywhere);
  }
}
</code></pre>
<p>First, we check to see where the door is.  If it's resting in the down position, we move it to the up position.  If it's in the up position, we move it to the down position.  Go ahead and run the game now and click on the door using the hand mouse icon.  You should see it move up and down with every click.</p>
<p>I'm sure you've noticed something about the door.  It just looks very weird moving up and down the way it does.  It doesn't make sense for it to just hover up and down like that.  Maybe, just maybe, if we make it go behind the wall, then it would look a lot more natural.  Let's do just that.  For this exercise, we're going to use our good friend the walk-behind.  Create a walk behind that looks like <a href="part1/chapter4/objects.html#figure411">Figure 4.11</a>. </p>
<p><a name="figure411"></a>
<span><img src="part1/chapter4/../../images/doorwalkbehind.png" alt="" /><br><strong>Figure 4.11: Walk-behind for the Bathroom Door</strong></span></p>
<p>Set the baseline at the bottom of it.  Run the game now and see how the door looks.  Neat huh?  We still have one little problem that you may or may not have noticed.  Run the game and tell Foxy to walk into the bathroom with the door closed.  Freaky!!!!  Either she's a ghost or we've got more work to do.  Let's prevent Foxy from going into the bathroom without opening the door first.</p>
<p>Open the script editor for the Main Hall and find the function that gets called when Foxy moves beyond the top edge (probably called <code>room_LeaveTop</code>). Change that function to look like this:</p>
<pre><code class="language-agsscript">function room_LeaveTop()
{
  if (oDoor.Y == 114)
  {
    cFoxyMonk.y = cFoxyMonk.y + 1;
  }
  else
  {
    cFoxyMonk.ChangeRoom(3, cFoxyMonk.x, 220);
  }
}
</code></pre>
<p>As you can see, we added a check to see if the door is down, and if it is, move Foxy back down one pixel and don't change her room.  Moving back one pixel puts her back under the top edge of the room so that she can attempt to move past it again.  Now the door has to be opened before Foxy can go into the bathroom.</p>
<p>Ok, we know we said we only had one little problem left, but there are actually two more.  One problem is that Foxy can open the door from anywhere in the room.  Clicking the hand icon on it will open it even if Foxy is all the way on the other side of the room.  That just won't do at all because unlike the rest of our game, it's just not realistic!  This is easy to fix.  Change the function for interacting with the door (<code>oDoor_Interact</code>) to first move Foxy to it before opening or closing it.   All we have to do is add one line to it.  Add the following line as the first line in the function:</p>
<pre><code class="language-agsscript">cFoxyMonk.Walk(oDoor.X + 20, Room.TopEdge, eBlock, eAnywhere);
</code></pre>
<p>Before the door is moved, Foxy will walk to the door's x position plus 20 pixels.  That will put her somewhere in the vicinity of the middle of the door.  And, she'll walk to the top edge of the room.  Remember that this is the edge at which she will actually walk into the next room.  So now when Foxy interacts with the door, she will walk up to it, open it, and proceed into the bathroom.  If you don't want her going into the bathroom after opening the door, then just add 1 to Room.TopEdge and she won't pass the edge and will just open the door and stand there.  But why open the door if you're not going through.</p>
<p>And now for the final little problem: When Foxy tries to walk into the bathroom with the door closed, she'll stop but will appear to flicker there for a bit.  This is actually because she's passing through into the other room and then getting thrown back out.  Let's fix this by splitting our walkable area into two walkable areas.  We'll put one in the bathroom and one outside it and only activate the one inside the bathroom when the door is opened.</p>
<p>Go back to editing the room and view its walkable areas.  It should look something like <a href="part1/chapter4/objects.html#figure412">Figure 4.12</a>. You might have to hide the door object to see it.</p>
<p><a name="figure412"></a>
<span><img src="part1/chapter4/../../images/hallwalkable2.png" alt="" /><br><strong>Figure 4.12: The Main Hall Walkable Area</strong></span></p>
<p>Remember how we added that extra lip that goes into the bathroom so that Foxy will pass the room's edge? Well, that lip should be made into its own walkable area.  To do this, use the eraser to get rid of the lip. You'll find the eraser by choosing <strong>Walkable area ID 0</strong> from the dropdown box between the Project Tree and Properties Pane (<a href="part1/chapter4/objects.html#figure413">Figure 4.13</a>). Use the eraser on the walkable area to remove it, then recreate it without that lip.  Now choose <strong>Walkable area ID 2</strong> from the dropdown to draw a second walkable area and redraw the lip.  It should end up looking like <a href="part1/chapter4/objects.html#figure414">Figure 4.14</a>.</p>
<p><a name="figure413"></a>
<span><img src="part1/chapter4/../../images/chooseeraser.png" alt="" /><br><strong>Figure 4.13: Choosing the Eraser</strong></span></p>
<p><a name="figure414"></a>
<span><img src="part1/chapter4/../../images/hallwalkable3.png" alt="" /><br><strong>Figure 4.14: Adding the Second Walkable Area</strong></span></p>
<p>The only thing we have to do now is turn our new area off when the door is closed and on when it's opened.  We should do this in two places: whenever Foxy first enters the room and whenever she interacts with the door.  Put the following block of code in the <code>room_AfterFadeIn</code> function:</p>
<pre><code class="language-agsscript">if (oDoor.Y == 114)
{
  RemoveWalkableArea(2);
}
else
{
  RestoreWalkableArea(2);
}
</code></pre>
<p>What this says is, if the door is down, remove the walkable area we just created.  Now Foxy can't go up there at all.  If the door is up, then we restore the area so Foxy can move into the bathroom. The reason we do this in the after fade-in function is because it's possible that Foxy enters the Main Hall, opens the door, then leaves the Main Hall. When she comes back to the Main Hall, the door is still open, so we make sure the walkable area is active in that case.</p>
<p>The <code>RemoveWalkableArea</code> and <code>RestoreWalkableArea</code> functions should also be placed in the <code>oDoor_Interact</code> function. Make that function look like the following:</p>
<pre><code class="language-agsscript">function oDoor_Interact()
{
  cFoxyMonk.Walk(oDoor.X + 20, Room.TopEdge, eBlock, eAnywhere);
  if (oDoor.Y == 114)
  {
    oDoor.Move(oDoor.X, 55, 3, eBlock, eAnywhere);
    RestoreWalkableArea(2);
  }
  else 
  {
    oDoor.Move(oDoor.X, 114, 3, eBlock, eAnywhere);
    RemoveWalkableArea(2);
    cFoxyMonk.PlaceOnWalkableArea();
  }
}
</code></pre>
<p>Notice we also added the function <code>cFoxyMonk.PlaceOnWalkableArea</code>. This makes sure that Foxy is placed on walkable area 1 since we're turning off walkable area 2 by moving her to the closest position on walkable area 1.  Otherwise, Foxy might get stuck in a non-walkable area and not be able to move.</p>
<h1><a class="header" href="#inventory-items-1" id="inventory-items-1">Inventory Items</a></h1>
<p>Now we're really getting some interaction going.  We can look at things, and we can manipulate objects within the game.  But, of course, an adventure game just isn't an adventure game unless the player can pick things up and carry them around, and that's where the inventory system comes in.  Every adventure game from <em>King's Quest</em> to <em>Monkey Island</em> uses an inventory system; after all, without an inventory, how can you do really obscure things like in <em>Monkey Island</em> where Guybrush used a wad of spit from Largo to make a voodoo doll?  Adventure Games Need Inventory Items.</p>
<p>By default, AGS uses a Sierra-style inventory system, where the player's inventory is managed through a separate &quot;inventory screen&quot; which displays all the items the player is currently carrying.  <a href="part1/chapter4/inventory.html#figure415">Figure 4.15</a> shows an example of an inventory screen from <em>King's Quest VI</em>.  (<em>King's Quest VI</em> wasn't written using AGS, of course, but it shows the type of Inventory Screen you get by default with AGS.) Just like about everything else in AGS, the inventory system you use is entirely configurable and you can use any other style of inventory system you wish.  For now, though, we'll use this Sierra-style one.</p>
<p><a name="figure415"></a>
<span><img src="part1/chapter4/../../images/sampleinventory.png" alt="" /><br><strong>Figure 4.15: Sample Inventory Screen</strong></span></p>
<p>In the Inventory Screen, the player is presented with the inventory items that he or she has collected throughout the game.  Notice that each inventory item is represented by its own sprite image.  This sprite image is usually different than the sprite that was actually used when the character picked up the item.  For example, in the image above, the sprite for the black feather would be much too large if it were actually placed in a room in the game (compare it to the size of the fawn in the background to see what we mean.) So, each inventory item that is in your game will most likely need two sprites to represent it; one for the object when it's in the game, and one for the inventory item that appears on the inventory screen once the player picks it up.</p>
<p>Enough talk about that.  Let's create an inventory item!</p>
<p>We're going to put a stick on the ground in front of the big tree and allow Foxy to pick up the stick to use later in the game.  First thing we need is a sprite of the stick so that we can import it into AGS.  Once again, we've done the hard work for you and provided you with a stick sprite you can use.</p>
<p>Double-click on <strong>Sprites</strong> in the Project Tree.  Let's create a new folder again just like we did for the Door sprite in the last section, but this time let's call it <em>Inventory Items</em>.  Find the file <em>LittleStick.bmp</em> and import it. </p>
<p>Great!  Now we have our sprite imported that will represent the stick.  This is the stick that will be placed near the tree.  Now let's import the sprite for that same stick that will be used in the inventory screen, so find the file <em>InventoryStick.bmp</em> and import that one.</p>
<p>That's our sprites taken care of.  The next step is to create the inventory item.  In the Project Tree, expand <strong>Inventory Items</strong>, where you'll see two items listed: <code>iBlueCup</code> and <code>iKey</code>. These are just examples that are built into the default game, so you can delete them if you want by right-clicking them and selecting <strong>Delete this item</strong> (just say Yes to the confirmation dialog that pops up; deleting these items won't be a problem for us.) Create a new inventory item by right-clicking <strong>Inventory Items</strong> and selecting <strong>New Inventory Item</strong>. This will create a new inventory item called <code>iInvItem1</code>. That's a really useless name, so let's rename it to something more descriptive like <code>iStick</code>. Double-click the inventory item and change its <code>Name</code> attribute to <code>iStick</code>. While you're changing attributes, we need to set the image of the stick to the sprite we just imported.  Click on the <em>Image</em> property, then click the ellipses button next to it.  This will bring up the Sprites browser, where you can browse to the image of the inventory stick, select it, and click <strong>Use this sprite</strong>. (Make sure you choose the big stick and not the small one, since we're creating the inventory item and not the object.) Each inventory item has an associated Mouse Cursor Image, which is the image used for the mouse cursor when the player selects the inventory item.  We need to set the sprite of the mouse cursor image, so just change this property (called <code>CursorImage</code>) to the same number as the <code>Image</code> property.</p>
<p>Now comes the part where we will add the stick in our game under the tree.  This is just like when you added the door to the Main Hall earlier. Edit the Pond room and select <strong>Objects</strong> from the <strong>Edit this room's</strong> area. Right-click in the room somewhere near the base of the tree, and select <strong>Place New Object Here</strong>. Change the <code>Image</code> attribute of the new object to the sprite for the little stick, change the Name to <code>oStick</code>, and change the Description to &quot;Stick&quot;. Once you've done that, your room should look something like <a href="part1/chapter4/inventory.html#figure416">Figure 4.16</a>.</p>
<p><a name="figure416"></a>
<span><img src="part1/chapter4/../../images/stickundertree.png" alt="" /><br><strong>Figure 4.16: Our Stick Under the Tree (squint your eyes!)</strong></span></p>
<p>Since we want the player to be able to pick up the stick, we need to create an event for the stick object.  With the stick selected, click the lightning bolt icon to bring up the events and, just like with the door, select the <strong>Interact object</strong> and click the ellipses icon next to it.</p>
<blockquote>
<p><strong>Side Note:</strong> So why didn't we use the <em>Pick up object</em> event for the stick, since we're wanting to pick it up?  Well, the Pick up event is used when the player uses the Pick Up mode of the mouse on the object.  By default, there is no Pick Up mouse mode enabled, so this event really doesn't do anything.  Some adventure games use different mouse modes for the different actions like Pick Up, Open, Move, Operate, etc., and you can do this too if you want, but in our game all of those actions are represented with the Interact mouse mode. </p>
</blockquote>
<p>This brings up the room script and creates a function for us called <code>oStick_Interact</code>. Put the following code in the function:</p>
<pre><code class="language-agsscript">cFoxyMonk.Walk(oStick.X, oStick.Y, eBlock, eWalkableAreas);
oStick.Visible = false;
cFoxyMonk.AddInventory(iStick);
Display(&quot;You stick the stick in your pocket and hope it's not a sticky stick that will stick you.&quot;);
</code></pre>
<p>Let's talk about what each line does:</p>
<pre><code class="language-agsscript">cFoxyMonk.Walk(oStick.X, oStick.Y, eBlock, eWalkableAreas);
</code></pre>
<p>The first statement should be all-too-familiar by now.  It causes Foxy to walk over to where the stick is.</p>
<pre><code class="language-agsscript">oStick.Visible = false;
</code></pre>
<p>This line sets the <code>Visible</code> property of the <code>oStick</code> object to <code>false</code>, which (surprise!) makes the stick invisible.  Once an object is invisible, the player can no longer interact with it at all, so this effectively turns the object off.</p>
<pre><code class="language-agsscript">cFoxyMonk.AddInventory(iStick);
</code></pre>
<p>This is where the item is added to the player's inventory.  Notice that we used <code>iStick</code> here, and not <code>oStick</code>.  The <code>iStick</code> is the inventory item, whereas the <code>oStick</code> is the object in the room.  (See?  We told you the letters at the beginning of those names would be helpful later on!)</p>
<p>And finally, we display a message to the user to tell them they picked up the stick:</p>
<pre><code class="language-agsscript">Display(&quot;You stick the stick in your pocket and hope it's not a sticky stick that will stick you.&quot;);
</code></pre>
<p>That's it.  Run the game now and click the hand icon on the stick.  You should see Foxy walk over, the stick will disappear, and our message will be displayed on the screen.  Click to dismiss the message and then look at your inventory.  You can do this either by pressing the <strong>Tab</strong> key, or by moving your mouse to the top of the screen and clicking the <strong>suitcase</strong> icon.  You should see the stick in your inventory now!  Yay!  Mission accomplished!</p>
<p><a name="figure417"></a>
<span><img src="part1/chapter4/../../images/stickinventory.png" alt="" /><br><strong>Figure 4.17: Our First Inventory Item</strong></span></p>
<h1><a class="header" href="#using-inventory-items" id="using-inventory-items">Using Inventory Items</a></h1>
<p>That was so awesome.  Let's add another inventory item now, but this time we'll make Foxy work a little harder to get it.  If there was an apple way up high in the tree, maybe Foxy could use her newly acquired stick to throw at the apple and knock it down.  (Yeah, we know, Foxy has wings and could just fly up there to get an apple, but let's forget about that and just play along.)</p>
<p>This would accomplish a couple of things.  First, it would let us get more practice adding inventory items.  But more importantly, requiring that Foxy use the stick on the apple in the tree lets us see how to use inventory items on other objects in the game.  We'll have to figure out a way to make something happen when the stick is used on the apple... hmm...</p>
<p>Before we get too far ahead of ourselves, we need to first put the apple in the tree and create an inventory item for it.  Go to your game's <strong>Sprites</strong> and import two new sprites: <em>LittleApple.bmp</em> and <em>InventoryAppleWithWorm.bmp</em>. Just like with the stick before, these sprites will be used to represent the apple in the game and in the inventory, respectively.  Ewww, the apple looks like it has a worm!  That's ok, we'll let Foxy get the worm out as another exercise later.</p>
<p>Putting the apple in the tree is very similar to when we put the stick on the ground, except for one very important difference.  Open the Pond room and select <strong>Objects</strong> from the <strong>Edit this room's</strong> area. Right-click somewhere in the tree and select <strong>Place New Object Here</strong> from the context menu.  Find the <code>Image</code> attribute in the new object's Properties Pane and change this to the sprite of the Little Apple you just imported (you can click the ellipses button to browse for the right sprite, just make sure to select the little apple and not the big one.) Now, change the <code>Description</code> to &quot;Apple,&quot; and the <code>Name</code> to <code>oApple</code>. When you're done, your Pond should look something like <a href="part1/chapter4/using_inventory.html#figure418">Figure 4.18</a>.</p>
<p><a name="figure418"></a>
<span><img src="part1/chapter4/../../images/appleofmytree.png" alt="" /><br><strong>Figure 4.18: The Apple of My Tree</strong></span></p>
<p>Here's the part that's different from when we added the stick.  If you run your game, you'll see a problem.  Actually, you <em>won't</em> see a problem because you won't see the apple at all!  What happened?  Where'd the apple go?  The apple really is there, but it's hidden by the walk-behind area on the tree we created back in <a href="part1/chapter4/../chapter3/walk_behinds.html">Chapter 3</a>. Let's think about what's happening here.  There's a walk-behind area on our tree, which we put there so that Foxy could walk behind the tree.  The problem is, objects obey walk-behind areas as well, and so the apple we put in the tree is being drawn behind the tree, since it is above the baseline of the tree's walk-behind area.  Well great, how do we fix that?  We need the apple to ignore the tree's walk-behind area so that it's always drawn in front of the tree. It just so happens that AGS allows you to do that relatively easily.  You might think there's an attribute on the apple object called <code>IgnoreWalkBehinds</code> or something like that, but there's not.  There is, however, something that will work just as well.</p>
<p>Find the attribute <code>BaselineOverridden</code> in the apple's Properties Pane.  This value is set to <code>False</code> by default, and that means that the object's Baseline is set to the very bottom of the object.  This is similar to how the character's baseline is at the very bottom of the character, like we mentioned when we created the walk-behind way back in <a href="part1/chapter4/../chapter3/walk_behinds.html">Chapter 3</a>. Change the <code>BaselineOverridden</code> value to <code>True</code>. You should see a new attribute appear, called <code>Baseline</code>. This lets us set a new y location for the object's baseline.  If we set the baseline to 200, which is the very bottom of the screen, this will effectively create a situation such that the apple's baseline is always <em>below</em> the walk-behind's baseline, causing the apple to be drawn in front of the tree.  After you've changed the apple's Baseline attribute, run the game again and you'll be able to see the apple up in the tree.</p>
<p>Eventually, Foxy will be able to pick up the apple, so we'll need an inventory item for it also.  Right-click on <strong>Inventory Items</strong> and select <strong>New Inventory Item</strong>. Under the Properties, change the <code>Description</code> to &quot;Apple&quot; and change the <code>Name</code> to <code>iApple</code> (please don't sue us, Tim Apple!) Browse for the <code>Image</code> and this time, select the big apple with the worm in it.  That's all there is to that, so let's go back to the Pond room and put all this together!</p>
<p>When Foxy uses the stick on the apple in the tree we want the apple to fall out of the tree onto the ground.  When the apple is on the ground, Foxy should be able to interact with the apple to pick it up.  We have to be sure that we don't let Foxy pick up the apple while it's still in the tree.</p>
<p>Click on the apple in the tree and create a new Event for <strong>Use Inventory on object</strong>. This should create a function for you in the room script called <code>oApple_UseInv</code>. Edit this function so it looks like the function below, then we'll discuss it.</p>
<pre><code class="language-agsscript">function oApple_UseInv()
{
  if (cFoxyMonk.ActiveInventory == iStick) 
  {
    if (Game.DoOnceOnly(&quot;StickIsInTree&quot;) == true) 
    {
      oApple.Move(oApple.X, 170, 4, eBlock, eAnywhere);
      oApple.Baseline = 0;
      Display(&quot;Good shot! The apple falls out of the tree and lands on the ground with a thud.&quot;);
    }
  }
}
</code></pre>
<p>The <code>oApple_UseInv</code> function will be called by AGS any time the player uses an inventory item on the apple object.  Since the player might have several inventory items throughout the game, we have to make sure that it was the stick that was used and not some other item the player might have.  We use the <code>ActiveInventory</code> property of the character to do this:</p>
<pre><code class="language-agsscript">if (cFoxyMonk.ActiveInventory == iStick)
</code></pre>
<p>Here, we're checking that the active inventory item (<code>cFoxyMonk.ActiveInventory</code>) is the stick (<code>iStick</code>). If it is, the code inside the if block's curly braces will run.</p>
<p>The first instruction in that <code>if</code> block is another <code>if</code> statement:</p>
<pre><code class="language-agsscript">if (Game.DoOnceOnly(&quot;StickIsInTree&quot;) == true)
</code></pre>
<p>The function <code>Game.DoOnceOnly</code> does just what it sounds like it might do: it ensures that something happens only one time.  The function will return a <code>true</code> value the first time AGS encounters this statement and a <code>false</code> value every time after that.  The string that we passed as a parameter to the function, <code>StickIsInTree</code>, can be anything you want, and this is how AGS knows if this particular <code>DoOnceOnly</code> statement has been done before.  For example, suppose you have two events in your game, and you want each event to happen only once.  You can use <code>DoOnceOnly</code> for each event, but each one needs to have a different string passed to it.</p>
<p>The next statement causes the apple to fall down to the ground.</p>
<pre><code class="language-agsscript">oApple.Move(oApple.X, 170, 4, eBlock, eAnywhere);
</code></pre>
<p>We're using the <code>Move</code> function here just like we did with the bathroom door.<br />
We changed the apple's <code>Baseline</code> property earlier so that the apple would always appear in front of the tree's walk-behind area.  Well, now that the apple is on the ground, that Baseline property will also make it always appear on top of Foxy whenever she walks over to it.  That's not what we want!  So, just after we make the apple fall on the ground, let's set the <code>Baseline</code> property of the apple back to 0, which effectively turns the Baseline back to its default behavior.</p>
<pre><code class="language-agsscript">oApple.Baseline = 0;
</code></pre>
<p>Finally, we display a message to the player to let them know what just happened.</p>
<pre><code class="language-agsscript">Display(&quot;Good shot! The apple falls out of the tree and lands on the ground with a thud.&quot;);
</code></pre>
<p>To try this out, run the game and pick up the stick by interacting with it.  Then, open the inventory by rolling the mouse all the way up the screen and clicking on the suitcase icon.  You should see the stick there.  Click on the stick and your mouse cursor will change into it.  Then click <strong>Close</strong>. Now click the stick on the apple to use it.  The apple should fall from the tree.</p>
<p>That was the hard part and now's the easy part.  If the player interacts with the apple while it's on the ground, we want Foxy to walk over to it and pick it up.  Create a new Event for the apple object for <strong>Interact object</strong>. AGS will create a function for you called <code>oApple_Interact</code>. Edit it so it looks like this:</p>
<pre><code class="language-agsscript">function oApple_Interact()
{
  if (oApple.Y == 170) 
  {
    cFoxyMonk.Walk(oApple.X, oApple.Y, eBlock, eWalkableAreas);
    oApple.Visible = false;
    cFoxyMonk.AddInventory(iApple);
    Display(&quot;Foxy puts the apple away. Maybe she can eat it as a snack later.&quot;);
  }
  else 
  {
    Display(&quot;The apple is too high for Foxy to reach it!&quot;);
  }
}
</code></pre>
<p>This looks very similar to when we picked up the stick earlier.  The difference here is, we added that initial <code>if</code> statement to make sure that the apple is on the ground first before Foxy walks over to it (if the apple's Y location is 170, we know it's on the ground because that's what we set the Y location to in the <code>oApple_UseInv</code> function.) If it isn't on the ground, then we display the message telling the player that the apple is too high for Foxy to reach.</p>
<h2><a class="header" href="#homework-1" id="homework-1">HOMEWORK</a></h2>
<p>Add code to this function so that you see the stick fly from Foxy's position to hit the apple before it falls.  Don't forget to make Foxy lose the stick from the inventory when she throws it. (Hint: use <code>cFoxyMonk.LoseInventory(iStick)</code>.) Also, have Foxy turn to face the apple before she throws the stick at it. (Hint: use <code>cFoxyMonk.FaceObject(oApple)</code>.)</p>
<h2><a class="header" href="#using-inventory-items-on-each-other" id="using-inventory-items-on-each-other">Using Inventory Items on Each Other</a></h2>
<p>get Foxy to take the worm out of the apple now.  I don't think Foxy wants to actually touch the worm with her hand, so let's have her dig the worm out with the stick. (Note that if you did the homework from the previous section, then Foxy no longer has the stick here, so go ahead and take that part out so that Foxy will keep the stick after throwing it.) This will be a good exercise on how to use one inventory item on another.  We'll need a few more sprites for this.  We're going to need a sprite of the apple without a worm in it, and a sprite of a stick with a worm on it.  That way the worm can crawl out of the apple and onto the stick.  Import the files <em>InventoryApple.bmp</em> and <em>InventoryStickWithWorm.bmp</em> and create two new inventory items using those sprites called <code>iAppleNoWorm</code> and <code>iStickWithWorm</code>. Now it's just a matter of adding some events.  Select <code>iApple</code> from the Inventory Items section of the Project Tree and click the Events lightning bolt.  You should see an event named <strong>Use inventory item on this item</strong>. Create an function for that event (it will be called <code>iApple_UseInv</code>) and make it look like this:</p>
<pre><code class="language-agsscript">function iApple_UseInv()
{
  if(cFoxyMonk.ActiveInventory == iStick)
  {
    cFoxyMonk.LoseInventory(iStick);
    cFoxyMonk.LoseInventory(iApple);
    cFoxyMonk.AddInventory(iStickWithWorm);
    cFoxyMonk.AddInventory(iAppleNoWorm);
    Display(&quot;Oh goody! You got the worm out of the apple and onto the stick.&quot;);
  }
}
</code></pre>
<p>Basically, what we did is make Foxy lose the stick and the apple with the worm in it, then we gave her the stick with the worm and the apple without the worm.  Then we displayed a message to the user to say what just happened.  The inventory window should now show the new items.</p>
<blockquote>
<p><strong>Side Note:</strong> the function is created in the global script and not the room script.  This is because inventory interactions can happen in any room.</p>
</blockquote>
<h1><a class="header" href="#non-player-characters-npc" id="non-player-characters-npc">Non-Player Characters (NPC)</a></h1>
<p>Even though there are games out there that only have one character, I don't think our game would be complete without at least one more character.  We figure that since we have a pond, then we should have a duck.  Therefore, we created a duck name Dork.  Dork the Duck is a happy sort of duck that likes to play around the pond, splashing in the water, and happily waddling his way around the tree. </p>
<p>The first part of introducing a new character is of course drawing the character's sprites. We've already done that and put the sprites in a file called <em>Dork.bmp</em>. If you look at those sprites, you'll notice that Dork has a swimming view.  Also, notice that he has walk and swim right views, but no walk or swim left views.</p>
<p>Even though you're now an expert at importing sprites and creating views, let's import Dork and create his views together.  Start by opening the Sprites editor and creating a new folder for Dork.  Choose to import new sprites from a file and import the sprites any way you wish.  When you've finished, you should have 24 sprites in all.  They should be walk right, swim right, walk up, walk down, swim up, and swim down.</p>
<p><a name="figure419"></a>
<span><img src="part1/chapter4/../../images/dorksprites.png" alt="" /><br><strong>Figure 4.19: The Many Sprites of Dork</strong></span></p>
<p>We need to create two views for Dork: one of him walking and one of him swimming.  Let's start with the walking view.  Create a new view and call it <code>vDNormal</code>. Select the 4 &quot;walk right&quot; sprites for Dork, right-click, and choose to assign them to a view. Put in your new view number (probably 4), choose Loop 2 (right), and click <strong>OK</strong>. Remember how we don't have a walk left view?  Here's how to make it.  Select the <strong>SAME 4</strong> walk right sprites, right-click, and choose to assign them to a view. Put in view 4 again, choose Loop 1 (left), and check the box at the bottom that says: <strong>Set all new frames as Flipped</strong>. Click <strong>OK</strong> and check your view.  Neat huh?  This way our walk right and walk left will look the same.  Now go ahead and create the walk up and walk down loops on your own.</p>
<p>For the swimming view, create a new view called <code>vDSwim</code>.  Add the loops just as above but choosing the swimming sprites.  Be sure to flip the walk left loop.</p>
<p>Now that we have the views for Dork, we need to actually create the character.  Right-click the <strong>Characters</strong> node in the Project Tree and choose <strong>New Character</strong>. Make sure the character is selected and change the <code>ScriptName</code> property to <code>cDork</code> and the <code>RealName</code> property to <code>Dork</code>. Set the <code>StartingRoom</code> property to 1 to make him show up at the pond. Set the <code>NormalView</code> property to 4 (or whatever your normal Dork view was) and set the <code>StartX</code> and <code>StartY</code> to 250 and 60 to put him near the pond when the game starts but not in the pond.  Set the <code>MovementSpeed</code> property to 6 to match that of Foxy's. Run the game and check him out.  He won't do anything, but it'll be fun to see him standing there.</p>
<p><a name="figure420"></a>
<span><img src="part1/chapter4/../../images/dorkstanding.png" alt="" /><br><strong>Figure 4.20: Hey Look! Dork is Standing There!</strong></span></p>
<p>When you're done staring in awe at your new character, close the game and go on with this lesson.  We know exactly what you want to do now: you want to see that duck swim!  But why would he swim?  Let's take this one step at a time.  First, let's make Dork walk over to the middle of the pond when Foxy interacts with him.  Double-click Dork's view to edit him and click on the lightning bolt to bring up his events.  Notice that characters have the same kinds of events as objects and hotspots do. Create a new event for <code>Interact character</code>, which will create a function named <code>cDork_Interact</code> in the script. In this function tell Dork to walk to position (334, 95), which is the middle of the island.  Remember to tell him to walk anywhere because there is no walkable area over the pond. You'll need to make Foxy walk over in that direction too, otherwise Dork will walk off the screen and you won't see him, so we'll make Foxy walk up to him and then he'll run away from her when she gets close, and we only want that to happen if Dork is not already on the island.  The function should have the following:</p>
<pre><code class="language-agsscript">if(cDork.x != 334)
{
    cFoxyMonk.Walk(230, 60, eBlock, eWalkableAreas);
    cDork.Walk(334, 95, eNoBlock, eAnywhere);
}
</code></pre>
<p>First, we check Dork's x coordinate and if it's not on the island, we tell Foxy to walk over to Dork.  We also tell her to make sure to only walk on walkable areas.  The second line of the <code>if</code> block tells Dork to run away from Foxy and to ignore walkable areas while NOT blocking.  The reason we don't want him to block will become apparent in a few minutes.  Run the game, use the hand icon on Dork, and watch the fun.</p>
<blockquote>
<p><strong>Side Note:</strong> the function is created in the global script and not the room script.  This is because character interactions can happen in any room.</p>
</blockquote>
<h2><a class="header" href="#animations" id="animations">Animations</a></h2>
<p>Let's make him swim now.  This is what we've all been waiting for.  In order to make Dork swim, we have to change his view to the swim view when he's on water, and the best way to do that is to create a region.</p>
<p>Open the editor for room 1 and view the room's regions.  You'll notice we already created a region in front of the shack's door, so we'll need to change the region ID to 2.  Find that in the dropdown box between the Project Tree and Properties Pane (<a href="part1/chapter4/npc.html#figure421">Figure 4.21</a>). Once you choose Region ID 2, use the pen to trace all around the pond enclosing all the water.  Be sure to leave out the island though.  Then, use the flood tool to fill in the water.  When finished, it should look like <a href="part1/chapter4/npc.html#figure422">Figure 4.22</a>.</p>
<p><a name="figure421"></a>
<span><img src="part1/chapter4/../../images/chooseregion2.png" alt="" /><br><strong>Figure 4.21: Choosing Region 2</strong></span></p>
<p><a name="figure422"></a>
<span><img src="part1/chapter4/../../images/region2.png" alt="" /><br><strong>Figure 4.22: Region 2 is the Pond</strong></span></p>
<h2><a class="header" href="#repeatedly-execute" id="repeatedly-execute">Repeatedly Execute</a></h2>
<p>If Dork were the main character then at this point, we would add two event handlers for the water region, one for walking onto the region and one for walking off of it.  We would change the view to the swimming view when he walks onto the region and back to normal when he walks off of it.  But, since these events are only called when the main character walks onto and off of a region, and since Dork is not the main character, we have to do something special. There is an event in every room called <code>Repeatedly Execute</code>. This event fires every <em>game cycle</em>, which equates to 40 times per second, or once every 25 milliseconds.  So, anything that we put in this event will happen 40 times every second that the room is on the screen (See side note).  We need to add some code to this function that constantly checks where Dork is and changes his view accordingly.</p>
<blockquote>
<p><strong>Side Note:</strong> Remember the eBlock parameter we've been using for various function calls?  Anytime a function runs with eBlock, it's called a <em>blocking function</em>. Script instructions, including those in the Repeatedly Execute event, will not fire while a blocking function is running.  There is a special Repeatedly Execute event that does get called even through blocking routines, called <code>repeatedly_execute_always</code>. If you put a function with this name in your room script (or in the global script), it will get called even when a blocking function is running.</p>
</blockquote>
<p>Choose the room from the dropdown between the Project Tree and Properties Pane and then click the lightning bolt to bring up the room's events.  You've done this before when you added the after fade in and leave right/leave left events in other rooms.  You should see an event called <code>Repeatedly execute</code>. Add a handler to this event by clicking the ellipses.  This will create a function called <code>room_RepExec</code>. Edit the function to make it looks as follows:</p>
<pre><code class="language-agsscript">function room_RepExec()
{
  if(Region.GetAtRoomXY(cDork.x, cDork.y) == region[2])
  {
    if(cDork.View != VDSWIM)
      cDork.ChangeView(VDSWIM);
  }
  else if(cDork.View != VDNORMAL)
  {
      cDork.ChangeView(4);
  }
}
</code></pre>
<p>This function consists of two <code>if</code> blocks. The first block checks Dork's position in the room to see if he's in the pond region. The function <code>Region.GetAtRoomXY</code> takes an x and a y and gives you the region number that the (x,y) coordinates is in.  If the coordinates are not in any region, then you'll get a zero back. So, we compare the return from that function to see if it equals region 2, which is our pond region.  If so, we check to see if Dork's view is already the swim view and, if not, change it to the swim view. So now Dork will have the swim view activated whenever he's in the pond.  Notice that we used <code>VDSWIM</code> instead of the actual number of the view.  We could have used the number 5, which is our swim view, but this is more readable. </p>
<blockquote>
<p><strong>Side Note:</strong> AGS will always create an all-caps version of the view names that you create to make it easier to refer to them in scripts.</p>
</blockquote>
<p>The second <code>if</code> block in the function is actually an <code>else/if</code> block. This will only happen if the first block is <code>false</code> and Dork's view is not the normal view (i.e., it's the swimming view). In that case, we change the view back to normal.  Notice this time we used the number so you can see that they really are interchangeable.  One thing to note:  We could not have written the function like this:</p>
<pre><code class="language-agsscript">function room_RepExec()
{
  if(Region.GetAtRoomXY(cDork.x, cDork.y) == region[2])
  {
      cDork.ChangeView(VDSWIM);
  }
  else
  {
      cDork.ChangeView(VDNORMAL);
  }
}
</code></pre>
<p>This way, the view is always changed.  We don't want to do this because of a couple of reasons: first, it's not very efficient to change Dork's view 40 times per second when it doesn't need to be changed; and second, every time Dork's view is changed, his position changes as well, which actually has a peculiar side effect of making him walk really fast (try it out for yourself.)  Oh, and now for the reason we didn't let Dork block while moving:  Since the Repeatedly Execute event doesn't fire when a blocking function is running, this would mean that the view would not change.  Try that out too and see for yourself.</p>
<h2><a class="header" href="#more-animation" id="more-animation">More Animation</a></h2>
<p>Now let's do a bit of animating with Foxy.  Earlier in the chapter, we gave you a homework assignment to show the stick fly out of Foxy's hands and hit the apple.    We're going to do that here and add a little bit more pizzazz to it.  Foxy is going to first walk to a good position to better see the apple and turn to face the apple.  Then you'll see her hand go up and throw the stick at the apple.</p>
<p>To start this, we'll need to create a whole new view of Foxy throwing the stick.  There's a sprites file called <em>FoxyThrowingAnimation.bmp</em> that contains the proper sprites.  Import those sprites into the <em>FoxyMonk</em> folder of the Sprites editor (or create a new folder if you wish).  You should now have 6 new sprites of Foxy (We actually don't need all 6 here, so just use the first 4.  The other two are there for you to play with if you want to extend the animation.) Create a new view for Foxy called <code>vFMThrow</code> using the new sprites.  We'll just need one loop here so it will be loop zero by default.  That's it for the easy part.  The rest is the code in the function.  Find the <code>oApple_UseInv</code> function in the Pond room's script and change it to the following: (The comments in the code should explain what's going on.)</p>
<pre><code class="language-agsscript">function oApple_UseInv()
{
  if (cFoxyMonk.ActiveInventory == iStick) 
  {
    if (Game.DoOnceOnly(&quot;StickIsInTree&quot;) == true) 
    {
      // Have Foxy walk to a prime throwing position
      cFoxyMonk.Walk(116, 164, eBlock, eWalkableAreas);
      
      // Turn Foxy to face the apple
      cFoxyMonk.FaceObject(oApple);
      
      // Since she's going to throw the stick, it needs to disappear from her inventory.
      cFoxyMonk.LoseInventory(iStick);
      
      // Change her view to the new throwing view and lock it
      cFoxyMonk.LockView(VFMTHROW);
      // Animate the new view
      cFoxyMonk.Animate(0, 5, eOnce, eBlock, eForwards);
      // Unlock the view
      cFoxyMonk.UnlockView();
      // Lock frame 2 of the view so her arm stays up in throwing position
      cFoxyMonk.LockViewFrame(VFMTHROW, 0, 2);
      
      // Set the x and y location of the stick object to be wherever Foxy is, and then make it visible.
      oStick.X = cFoxyMonk.x;
      oStick.Y = cFoxyMonk.y - 10;
      oStick.Visible = true;

      // Override the baseline of the stick so it doesn't appear behind the tree.
      oStick.Baseline = 200;
      
      // Move the stick to where the apple is.
      oStick.Move(oApple.X, oApple.Y, 6, eBlock, eAnywhere);
      
      // Now move the stick down to the ground with the apple.  Notice the use of eNoBlock here, since we want the apple to fall at the same time.
      oStick.Move(oApple.X, 160, 5, eNoBlock, eAnywhere);
      oApple.Move(oApple.X, 170, 4, eBlock, eAnywhere);

      // Reset the baselines for both the apple and the stick back to the default.
      oApple.Baseline = 0;
      oStick.Baseline = 0;
      
      // Unlock the view
      cFoxyMonk.UnlockView();
      
      Display(&quot;Good shot! The apple falls out of the tree and lands on the ground with a thud.&quot;);
    }
  }
}
</code></pre>
<p>The things to note here are the view locking and unlocking functions.  Locking a view will keep it from changing until you call the unlock function.  This way, if you change a view and then ask a character to walk, the walking view will not come back automatically unless you unlock the view first.  Always remember that for every lock view call you need an unlock view call: <strong>NO EXCEPTIONS</strong>.</p>
<pre><code class="language-agsscript">cFoxyMonk.LockView(VFMTHROW);
cFoxyMonk.Animate(0, 5, eOnce, eBlock, eForwards);
cFoxyMonk.UnlockView();
cFoxyMonk.LockViewFrame(VFMTHROW, 0, 2);
</code></pre>
<p>The code snippet above demonstrates this.  Here we lock Foxy's view to the throwing view and animate.  The <code>Animate</code> function says to animate using loop 0 with a delay of 5 (game cycles).  The <code>eOnce</code> parameter says to do the animation only one time.  We want to block while animating and we want to animate forward.  After that we unlock the view then we lock the view again using only one frame with the <code>LockViewFrame</code> function. This will hold the view at frame 2, which is the frame of Foxy's arm being in the up, or extended, position.  We keep the lock while the stick flies and the apple falls, then we unlock her view with the <code>UnlockView</code> function so that she can go back to her normal view.</p>
<h1><a class="header" href="#summary-4" id="summary-4">Summary</a></h1>
<p>An adventure game becomes a lot more enjoyable and engrossing when it has some interaction.  Here are some of the ways a player can interact with your game:</p>
<ul>
<li><strong>Objects</strong> Objects are things in your game that are moveable, as opposed to items that are part of a room's background.  Objects have their own attributes and events and can be manipulated through the game's script files.</li>
<li><strong>Hotspots</strong> Items that the player can interact with that are not moveable and are part of the room's background are called Hotspots.  These behave similarly to objects, but objects are more versatile.</li>
<li><strong>Inventory Items</strong> We discussed how to give your character inventory items, and how they are used in conjunction with objects to let the player interact with them on the screen.</li>
<li><strong>NPCs</strong> Characters that are not controlled by the player are called Non-player Characters, or NPCs.  All of the actions that an NPC does are controlled through the game script.  In this chapter we created an NPC named Dork the Duck that Foxy could interact with.</li>
<li><strong>Custom Animations</strong> If something in your game should animate, you have two options: either use the built-in views that are associated with every character (Normal View, Speech View, Idle View, etc.), or, if these don't suit your needs, you can create custom animations.</li>
</ul>
<h1><a class="header" href="#chapter-5---sounds-and-music-make-some-noise" id="chapter-5---sounds-and-music-make-some-noise">Chapter 5 - Sounds and Music (Make Some Noise!)</a></h1>
<p>We know what you're thinking: our game is great so far, but what about sounds and music?  (Or if you weren't thinking that then you are now, because we're Jedi and we make you think what we want you to think.)  Sounds and music are a very important part of any game, and AGS makes it simple to add them to your game.</p>
<p>In this chapter, we'll take a look at the different kinds of audio you can use in your game.  We'll show you how you can use standard sound effects when things happen in your game.  But AGS offers more than just that.  You can use ambient sounds like crickets chirping in the background, room music, and you can even give a voice to your characters and have them speak their lines.</p>
<blockquote>
<p><strong>Side Note:</strong> You can find the sounds and music for the following examples on GitHub:
<a href="https://github.com/ensadi/FoxysQuest/tree/main/Music" target="_blank">https://github.com/ensadi/FoxysQuest/tree/main/Music</a><br>
<a href="https://github.com/ensadi/FoxysQuest/tree/main/Sound" target="_blank">https://github.com/ensadi/FoxysQuest/tree/main/Sound</a><br>
<a href="https://github.com/ensadi/FoxysQuest/tree/main/Speech" target="_blank">https://github.com/ensadi/FoxysQuest/tree/main/Speech</a></p>
</blockquote>
<h1><a class="header" href="#sound-effects" id="sound-effects">Sound Effects</a></h1>
<p>Creating sound effects is one of those things that's a lot of fun to do, but you'll quickly realize that you can easily get carried away with making a sound effect for every action in your game.  That's definitely not a bad thing necessarily, but having too many sound effects - or, I should say, having too many <em>obnoxious</em> sound effects - can drive your player bonkers, so be careful with them.  We're only going to put in a couple of sound effects into our game, just to show you an example of the different types of sound effects that can be used.</p>
<p>AGS supports several file formats when it comes to audio files.  All the major sound formats are supported: OGG, MP3, WAV, and VOC.  To use sounds in your game, you have to import it just like you've imported sprites and backgrounds.  Look in the <strong>Project Tree</strong> and you'll see <strong>Audio</strong>. Under <strong>Audio</strong> there's a folder for Music and one for Sounds.  This is where the importing magic will happen.</p>
<blockquote>
<p><strong>Side Note:</strong> Windows hides file extensions by default.  You may need to set your properties to show file extensions.  Look online if you don't know how because we don't want to waste all this space teaching you something that you can just as easily find online by using Google.  I mean, after all, what's the point of explaining something here in the book that's documented online in about a gazillion places?  That would not only waste your time to have to read it, but it would also waste our time by having to type it out.  Especially when this book is about AGS and not about Windows.  Do you see our point here?  Should we also go into how to disable the display of file extensions in Linux and Mac?  Well, come to think of it, AGS doesn't even run on these platforms so that would be an even BIGGER waste of time and space.  So, you can see why we didn't want to waste the time and space to explain a simple concept like showing or hiding file extensions.</p>
</blockquote>
<h2><a class="header" href="#footsteps----no-more-sneaking-up-on-people" id="footsteps----no-more-sneaking-up-on-people">Footsteps -- no more sneaking up on people</a></h2>
<p>We've got an idea.  It would be nice if the player could hear Foxy's footsteps when she walks around.  AGS makes this really easy to do, because it lets you assign a sound effect to any frame of a view.  In Foxy's case, we want to assign two footstep sounds to two different frames of her walking view.  Here's how to do that.</p>
<p>Once again, we've done the hard work for you and created the files you'll need.  Look for the files called <em>Step1.wav</em> and <em>Step2.wav</em> in the <em>Sound</em> folder. Next, open the Audio properties in the Project Tree and right-click on <strong>Sounds</strong> to add those two files.  Notice that in the Properties Pane they have the name <em>aStep1</em> and <em>aStep2</em>. Next, open Foxy's normal view by expanding <strong>Views</strong> in the Project Tree and double-clicking on <code>vFMNormal</code>. Each loop of this view contains three frames.  What we're going to do is assign a sound to two of the three frames in each loop, and AGS will play that sound when it displays that frame of animation in the game.  Click on the second frame of loop 0.  If you look at the Properties Pane, you'll see a property called <code>Sound</code> (<a href="part1/chapter5/sound_effects.html#figure51">Figure 5.1</a>). Change this to <code>aStep1</code>, which is the sound that represents the first footstep (<em>Step1.wav</em>). Now click on the third frame of loop 0 and change its Sound property to <code>aStep2</code> to play <em>Step2.wav</em>. Repeat this for the second and third frames of each of the other three loops in this view.</p>
<p>Now run the game!  As Foxy walks around you should hear her footsteps.  (If you don't hear anything, you might need to turn your volume up; the footstep sounds we created are fairly quiet - remember, we don't want to totally annoy our player!) Why did we use the second and third frames? Well, because AGS treats the first frame as the character's standing around and twiddling thumbs view, and we don't want any footstep sounds while we're just standing there, now do we?</p>
<p><a name="figure51"></a>
<span><img src="part1/chapter5/../../images/framesounds.png" alt="" /><br><strong>Figure 5.1: Properties for the Second Frame of Loop 0</strong></span></p>
<h2><a class="header" href="#homework-2" id="homework-2">HOMEWORK</a></h2>
<p>Create splish splash sounds for Dork and add them to his swimming view.</p>
<blockquote>
<p><strong>Side Note:</strong> AGS will create a new folder in your game called <em>AudioCache</em> and it will copy your sound and music files into that folder. That way, your files can be anywhere on your computer and AGS will just take care of adding them to your game's files.  Generally, you won't need to worry about this folder.</p>
</blockquote>
<h2><a class="header" href="#ambient-sounds" id="ambient-sounds">Ambient Sounds</a></h2>
<p>Most of the time you won't need ambient sounds, but AGS provides the possibility just in case you want to use it. Ambient sounds are simply sounds that can be heard in the background, like crickets chirping, water running, etc.</p>
<p>To play ambient sounds, you have to create the sound object and use the script functions <code>Play</code> and <code>SetRoomLocation</code>. The Play function is used on a sound object and takes 2 optional parameters: <code>AudioPriority</code> and <code>RepeatStyle</code>. To make the sounds actually ambient though, the options will be required since the default for sound (not music) is to only play a sound once. (Those function are for audio in general and not just for ambient sounds.)  The priority can just be set to normal, but the <code>RepeatStyle</code> must be set to <code>eRepeat</code> in order for the sound to keep playing.</p>
<p>When the <code>Play</code> function is called, it will return an instance of an <code>AudioChannel</code>. This is the sound channel to play the ambient sound through. AGS supports 8 sound channels, which are numbered from 0 to 7.  Basically, you can think of a sound channel as a tunnel which carries one sound at a time.  So, if you have 2 sounds that you want to play at the same time, you have to play them through 2 different sound channels.  So, with 8 channels, AGS allows you to play up to 8 sounds at the same time. Once you have the channel, call the <code>SetRoomLocation</code> function to set the X and Y location of the sound. These are the coordinates of the source of the sound.  These parameters let you use ambient sounds that appear to be emanating from a certain spot in your game.  If a sound is coming from a waterfall on the right side of your screen, for example, you can specify the x and y coordinates of the sound to match the location of the waterfall and the sound will get louder as the player approaches the waterfall and quieter as the player walks away from it.  This gives the illusion of a location to the sound.  If you don't want this effect, you can simply use 0 for both x and y and the sound will be played at the same volume throughout the room.  By the way, the volume can also be set on the audio channel with the <code>Volume</code> property.</p>
<p>Example to play a sound called <code>aSound1</code> at low volume from location (10,10):</p>
<pre><code class="language-agsscript">AudioChannel *myChannel = aSound1.Play(eAudioPriorityNormal, eRepeat);
myChannel.Volume = 20;
myChannel.SetRoomLocation(10, 10);
</code></pre>
<h1><a class="header" href="#background-music" id="background-music">Background Music</a></h1>
<p>Background music can give a nice ambiance to any room.  Just like in the movies, proper background music can convey different feelings and change a player's mood.  Let's add some background music to the long, dark, hall to make it seem a bit scary.  Find the file named <em>music1.mid</em>. Open the Audio properties in the Project Tree and right-click on Music to add it (name it <code>aMusic1</code>.)</p>
<p>Now let's add the music with scripting.  Go to the Longroom's script and find the <code>room_AfterFadeIn</code> function. Add the following 2 lines to the top of the function:</p>
<pre><code class="language-agsscript">AudioChannel *myChannel = aMusic1.Play(eAudioPriorityNormal);
myChannel.Volume = 15;
</code></pre>
<p>The first line will set the music to play and give back an audio channel.  No need to tell it to repeat since that's the default behavior for music (not for sounds). The second line will set the music volume on the low end for an increased creepiness factor.  With these two lines and adding a call to <code>aMusic1.Stop()</code> in the <code>room_LeaveLeft</code> function, you'll have your scary, yet soft, music in that room.  Run the game, go into that room, and be afraid...</p>
<p>Some other functions and properties you should be aware of are <code>System.Volume</code>, and <code>Game.SetAudioTypeVolume()</code>. <code>System.Volume</code> is not a function; it's a property like the volume we've seen before, so you just set it equal to a number between 0 and 100 to set overall volume of the game.  This volume is somewhat overridden by the volume set for each sound or music object though. <code>Game.SetAudioTypeVolume</code> takes three parameters: the first parameter sets what type of volume to set, which is one of <code>eAudioTypeSound</code>, <code>eAudioTypeMusic</code>, <code>eAudioTypeAmbientSound</code>. Each one will set the volume of the respective type of audio.  The second parameter is a number between 0 and 100 for the actuall volume.  The third parameter is one of <code>eVolChangeExisting</code>, <code>eVolExistingAndFuture</code>, <code>eVolSetFutureDefault</code>. So, the volume of all existing, all existing and any future audio, or just future audio can be set for the type of audio in parameter one.</p>
<h1><a class="header" href="#speech" id="speech">Speech</a></h1>
<p>Unless you're creating a game like <em>Myst</em>, you'll probably want your characters to be able to say stuff throughout your game.  There are two paradigms when it comes to speech in AGS: there's basic, scripted talking, either in response to events that happen in the game (like when Foxy looks at things or when she breaks the fourth wall by talking to the player) or a linear sequence of conversation between characters (&quot;Hi, Fred!&quot;, &quot;Howdy Billy, how's the weather?&quot;); and then there's the interactive dialog that can occur between characters, where the player is given a choice of conversation topics and can choose which one(s) to talk about and in which order.  We'll be talking about the first kind of speech here; the second kind is called simply &quot;Dialogs&quot; in AGS parlance, and we'll cover that later in <a href="part1/chapter5/../../part2/chapter8/">Part 2</a>.</p>
<h2><a class="header" href="#speech-views" id="speech-views">Speech Views</a></h2>
<p>The first thing we need to do to make Foxy and Dork talk is to create a Speech View for them.  The Speech View is the animation that is displayed for the character when that character is speaking.  AGS automatically uses the character's Speech View anytime the character is saying something, so we don't have to think about it.</p>
<p>We'll do Foxy's view first, so create a new view for her by right-clicking <strong>Views</strong> in the Project Tree and click <strong>New View</strong>. Name this view <code>vFMSpeech</code>. Go to the Sprites section of the Project Tree and import a new set of sprites by opening the Foxy sprites folder, right clicking in the sprite list, and selecting <strong>Import new sprite from files...</strong>. Find the file called <em>foxy_monk_speech.bmp</em> and import the twelve sprites in that file (if you need a refresher, refer back to <a href="part1/chapter5/../chapter2/sprites.html">Chapter 2 </a> where we imported our sprites earlier.) Once those sprites have been imported, assign them in groups of three to each of the four loops in the new view you just created.  (Again, if you need help remembering how to do this, refer back to <a href="part1/chapter5/../chapter2/sprites.html">Chapter 2 </a>.) Finally, open the <code>cFoxyMonk</code> character from the Characters list in the Project Tree, and assign this new view for the Speech View in the Properties as in <a href="part1/chapter5/speech.html#figure52">Figure 5.2</a>. Now, do the same thing for Dork the Duck, using the sprite sheet file <em>DorkSpeech.bmp</em>.</p>
<p><a name="figure52"></a>
<span><img src="part1/chapter5/../../images/setspeechview.png" alt="" /><br><strong>Figure 5.2: Setting the SpeechView</strong></span></p>
<h2><a class="header" href="#the-say-function" id="the-say-function">The Say Function</a></h2>
<p>So, let's make Foxy and Dork say something already!  We're going to have a short, scripted conversation between Foxy and Dork.  When the player clicks the &quot;Talk to&quot; mouse cursor on Dork, Foxy will walk over to him, and the following conversation will take place:</p>
<p><strong>Foxy</strong>: Hi!  My name is Foxy.<br>
<strong>Dork</strong>: Quack, quack, quack.<br>
<strong>Foxy</strong>: Oh, I thought you could talk.<br>
<strong>Dork</strong>: Quaaaaaack!<br>
<strong>Foxy</strong>: I feel silly talking to a duck.<br>
<strong>Dork</strong>: Thanks a lot!</p>
<p>Yeah, it's not great, but it will do for our purposes.</p>
<p>Create a &quot;Talk to&quot; event for Dork (double-click <code>cDork</code> in the Project Tree, click the <strong>Events</strong> thunderbolt icon, click the &quot;Talk to character&quot; event, and click the ellipses button.) This creates a new function called <code>cDork_Talk</code> in the global script file. The function we'll be using to actually have the characters say stuff is the <code>Say</code> function.  You'll use it like this:</p>
<pre><code class="language-agsscript">function cDork_Talk()
{
  cFoxyMonk.Walk(cDork.x - 20, cDork.y, eBlock, eWalkableAreas);
  cFoxyMonk.FaceCharacter(cDork);
  cFoxyMonk.Say(&quot;Hi!  My name is Foxy.&quot;);
  cDork.Say(&quot;Quack, quack, quack.&quot;);
  cFoxyMonk.Say(&quot;Oh, I thought you could talk.&quot;);
  cDork.Say(&quot;Quaaaaaack!&quot;);
  cFoxyMonk.Say(&quot;I feel silly talking to a duck.&quot;);
  cDork.Say(&quot;Thanks a lot!&quot;);
  cDork.Say(&quot;&amp;1 Quack-quack-quack-quack quack-quack-quack-quack!&quot;);
}
</code></pre>
<p>You've seen the first two lines before -- they cause Foxy to walk over to where Dork is and then turn to face him.</p>
<p>The next 7 lines use the <code>Say</code> function, and we put the text we want the character to say in double quotation marks.  AGS will animate the character with the Speech View while the text is on the screen and stop animating the character when the text goes away.  By default, the text goes away either with a mouse click or after a certain time has passed proportional to the amount of text that is being displayed.  This behavior can be changed, however, in the General Settings, by changing the value of the <code>Allow speech to be skipped by which events property</code>.</p>
<p>One thing to note is the last line.  Notice that there is a <code>&amp;1</code> and a space right before &quot;Quack-quack-quack-quack quack-quack-quack-quack!&quot; This tells AGS to play the file called <em>Dork1.wav</em> in the <em>Speech</em> folder of your game's folder (see side note.) Unlike importing sounds into the Audio section of the project, you place sound files into that <em>Speech</em> folder. Sound files have a certain naming scheme and must be named after the character that speaks them along with a number.  Note though that you only use the first FOUR letters of the character name.  So, for Dork's sound 1, the file name would be <em>Dork1.wav</em>. This way, you can have actual speech in your game and tell AGS which recording to play just by using the ampersand and a number.  If you had a character named Micheal, his first speech file would be named <em>Mich1.wav</em>.  How simple is that?</p>
<p>Now to try it out! Find that file and move it into the <em>Speech</em> folder. Run the game and click the Speech mouse cursor on Dork.  You should see the conversation take place, and you should see both characters animate while they are speaking. Furthermore, you should hear Dork quack his last line so turn up the sound.</p>
<blockquote>
<p><strong>Side Note:</strong> All speech files should be placed in a folder called <em>Speech</em> that sits alongside other AGS folders like <em>Sprites</em>, and <em>Music</em>. These are folders that are all inside your game's AGS folder.  It's likely that the <em>Speech</em> folder does not exist so you may need to create it.  Note that you DO NOT add speech sound files through the Project Tree like all the other types of sound files.</p>
</blockquote>
<h1><a class="header" href="#summary-5" id="summary-5">Summary</a></h1>
<p>In this chapter, we saw how AGS allows us to use sounds and music in our game through the use of sound effects, background music, and speech. </p>
<ul>
<li><strong>Sound Effects</strong>  Sound effects &lt;BANG!&gt; are a cool way to &lt;POP!&gt; give your game some realism &lt;WHIZZZ!&gt; and help to engross your player &lt;CLAP! CLAP! CLAP!&gt; into your game.  But just &lt;SSSREEEEEEEEEEEEEEEK!&gt; make sure you don't get too annoying with &lt;SNARF!&gt; the sound effects or it could &lt;BEEEEP!&gt; cause your players to walk away &lt;CRUNCH CRUNCH CRUNCH CRUNCH&gt; in frustration!</li>
<li><strong>Background Music</strong> Every good game should have background music and with AGS it's a simple matter to play ambient music either on a room-by-room basis, or play music throughout your whole game.</li>
<li><strong>Speech</strong> If you have voice actors that can act out the speech in your game, then you can add those voices by just prepending the speech lines in your script with an ampersand (&amp;) followed by the number of the speech file which contains the recorded audio for that line of text.</li>
</ul>
<h1><a class="header" href="#chapter-6---some-other-stuff" id="chapter-6---some-other-stuff">Chapter 6 - Some Other Stuff</a></h1>
<p>If you've made it here, then you should know enough to make a few games for yourself from scratch.  So, we're going to take a bit of a detour and explore a few things that can help with the way the game plays.</p>
<h1><a class="header" href="#general-settings-1" id="general-settings-1">General Settings</a></h1>
<p>We briefly touched the General Settings editor at the beginning of this book and promised you that we'll get to it in Chapter 6.  Well, we like to keep our promises, and according to the URL of this page, this is Chapter 6. The General Settings editor can be accessed by double-clicking it from the Project Tree just like any of the other editors.  This editor allows you to specify some of the basic settings for your game, like the resolution, the name, the maximum score the player can achieve, and some other interesting things.  There are lots of options but we're only going to talk about some of them.  We'll talk about other ones as we get to them in later chapters.</p>
<h2><a class="header" href="#basic-properties-section" id="basic-properties-section">(Basic properties) Section</a></h2>
<p>This section of the General Settings editor sets up generic things about the game itself.</p>
<ul>
<li>Color depth -- The color depth setting tells AGS how to interpret your images. The higher the color depth the more colors you can have.  If you set your game to 16-bit color depth, then you shouldn't make any 32-bit drawings to import. </li>
<li>Game title -- This is the name that will appear in the window title bar.  It's a good idea to make sure this is actually the name of your game, and it should be by default.</li>
<li>Maximum possible score -- This will basically set up a globally accessible variable that you can use to display the maximum possible score on the screen.  For example, you can have something at the top left of the screen that says, &quot;0 of 500 points&quot;. That 500 can be placed in the variable and accessed anywhere.  The variable's name is <code>game.total_score</code>. The current score can be stored in <code>game.score</code> using the <code>GiveScore()</code> function.</li>
<li>Old-style letterbox mode -- Make this <code>True</code> to show a black ribbon across the top and bottom of the screen.  Why? Because you want to.</li>
<li>Resolution -- This is the width and height of your game.  Whatever you decide to set this to is what your backgrounds should be drawn with.</li>
</ul>
<h2><a class="header" href="#character-movement-section" id="character-movement-section">Character movement Section</a></h2>
<p>This section sets up how the character reacts to movement.</p>
<ul>
<li>Characters turn before walking -- Setting this to True will make the characters look like they're actually turning to face a new direction and then start walking.  For example, if the main character is facing down and you click above it using the walk icon, it'll change to the <strong>side</strong> loop then the <strong>up</strong> loop before starting to walk.  If the setting was <code>False</code>, the character will immediately go from the <strong>down</strong> loop to the <strong>up</strong> loop before starting to walk.</li>
<li>Characters turn to face direction -- This setting is just like the one above except it's used with the function <code>FaceLocation()</code>. If this is <code>True</code>, then when <code>FaceLocation()</code> is called, the character will go through the proper loops in the view to turn to face the new location.  If it's <code>False</code>, then the character will simply change to the new loop immediately.</li>
</ul>
<h2><a class="header" href="#compiler-section" id="compiler-section">Compiler Section</a></h2>
<p>This section sets up how the game executable is created.  The executable is the main file that you double-click to start the game and ends in a <em>.exe</em> extension (usually). Compiling is the process by which AGS will read the game data that you've input and the scripts that you've written and put them together (compile them) into a file that is the game itself, which is the game executable. Dave wrote the game executable, and it's the best damn executable ever written, because Dave is such an awesome programmer.  He's a much better programmer than George, that's for sure.  Wait! What?  That's odd since George is writing this section.<br>Hmmm.</p>
<ul>
<li>Compress the sprite file -- If you have a large number of sprites in your game, you could end up with a quite large executable.  Turn this option on and your executable will shrink.  Be forewarned though, the game will run a bit slower because it has to uncompress the sprites when it needs them.  At least I think that's what this option does!</li>
<li>Enable Debug Mode -- This option (true by default) is very helpful while you're developing your game.  It turns on certain shortcuts to help you see some things or move around. It would be wise to turn this option off before distributing your game. Otherwise, I'll totally cheat when I play your game. &lt;evil laugh here&gt;.  Here's a list of what it can do:
<ul>
<li>Press <strong>control-S</strong> to give the main character all inventory items.  This is good for testing, so you don't have to walk around and pick up everything.</li>
<li>Press <strong>control-V</strong> to see the game engine's version information.</li>
<li>Press <strong>control-A</strong> to see all walkable areas in the room.  You can't move around or do anything but it's helpful sometimes.</li>
<li>Press <strong>control-X</strong> and a dialog box will pop up listing all the rooms in the game.  Chose a room and you will immediately be taken there.  Good for testing changes in rooms without actually having to walk there.</li>
<li>Press <strong>control-W</strong> to move to the closest walkable area.  If you somehow get stuck in a non-walkable area (like maybe if you use control-X and end up inside a wall) then this will move you to the closest walkable area so you can perform your tests.</li>
</ul>
</li>
<li>Split resource files into X MB-sized chunks -- Normally, when you compile your game, all the resources (like the sprites for instance) are placed into the executable.  Therefore, the whole game fits into one file.  If that file is too large, then you can split the resources out of it and make them into their own files.  This way, users can download small files instead of one large file.  The files will be split into MB (Megabyte) sections designated by the number you put here.</li>
</ul>
<h2><a class="header" href="#inventory-section" id="inventory-section">Inventory Section</a></h2>
<p>This section has a few settings that change the way the inventory looks and feels.</p>
<ul>
<li>Display multiple icons for multiple items -- Setting this option to <code>True</code> will show multiple icons in the inventory window if you have more than one of a certain item.  So, if there are three strawberries, and you pick up all three strawberries, you will see three pictures of the strawberries in the inventory window.  If this is <code>False</code>, then you'll only see one picture of a strawberry and you'll have to keep track of how many the character actually has in the code. If you want to show some items as multiples and some not, then you'll need to set this to <code>False</code> and create multiple objects in your game that represent the same thing.  Assign those objects the same sprites but give them different variable names (like <code>oStrawberry1</code> and <code>oStrawberry2</code> for example).  Then you can show both objects in the inventory window whereas others will appear only once.</li>
<li>Override built-in inventory window click handling -- When you click on an item from the inventory window, AGS handles the click by changing the mouse cursor to that item and making that item the current inventory item.  Cycling through the different mouse pointers by right-clicking, you'll see that there's an extra one that is the current inventory item.  Then you can use that item on something else in the game.  So, after all that blabbing...if you don't want AGS to do any of that and you want to handle the click yourself, then set the option to <code>True</code>.  AGS will then call a function in your script called <code>on_mouse_click()</code> and you can do whatever with it.</li>
<li>Inventory item cursor hotspot marker -- This option allows you to place a crosshair or other image on inventory items.  The crosshair will appear at the point on the item that you use as the clicking point.  You can have AGS draw a crosshair for you, or you can draw your own and assign it to it.</li>
<li>Use selected inventory graphic for cursor -- If you keep this <code>True</code>, then the cursor will change to the item that you chose.  Depending of course on what you set as your cursor image in the inventory editor.  If you set it to <code>False</code>, then the cursor will always look like the default no matter what inventory item you choose.</li>
</ul>
<h2><a class="header" href="#saved-games-section" id="saved-games-section">Saved Games Section</a></h2>
<p>This section deals with how games are saved and how the computer will treat them.</p>
<ul>
<li>Save games folder name -- When a player saves a game it will go into a folder. Normally this folder will be called the same name as the game, but you can change it here if you like.</li>
<li>Save screenshots in save games -- Turning this on will take a snapshot of were the player is and save it into the saved game file.  That way a screen shot will appear in the file/game explorer of the current position in the game.</li>
</ul>
<h2><a class="header" href="#sound-section" id="sound-section">Sound Section</a></h2>
<ul>
<li>Play sound when the player gets points -- Give this option a sound and it will play it whenever you use the <code>GiveScore()</code> function to add to the player's score.</li>
</ul>
<h2><a class="header" href="#text-output-section" id="text-output-section">Text output Section</a></h2>
<p>This section deals with how text and speech are shown in the game.</p>
<ul>
<li>Always display text as speech -- If this option is on then anything displayed with the <code>Display()</code> function will appear as speech said by the main character. If it's off, then the text will just appear in the middle of the screen. </li>
<li>Anti-alias TTF fonts -- Anti-aliasing makes corners smoother and fonts look better.  Turning this option on will give you better looking true type fonts but will slow the game up slightly.  It's a matter of performance, but it's probably negligible.</li>
<li>Custom text-window GUI -- We've already said that we'll talk about GUIs later, and we will.  Be patient.  In the meantime, if you, for some reason, <a href="part1/chapter6/../../part2/chapter10/guis.html">looked ahead</a> and know how to make a GUI, you can use this option to change the default GUI for normal text in the game.  Any text that is spoken or displayed normally will use this GUI.  Leaving it at the default will leave it up to AGS, and it will always choose its own GUI, of course.</li>
<li>Custom thought bubble GUI -- Just like the option above, this option will set a GUI to use for thinking.  Using the <code>Character.Think()</code> function (for example: <code>cFoxyMonk.Think(&quot;Man I'm hot in this robe!&quot;)</code>) will show the thought text using this GUI.</li>
<li>Write game text Right-to-left -- If you translate your game to a right-to-left language, set this to <code>True</code> to make the text appear from right to left instead of left to right.</li>
</ul>
<h2><a class="header" href="#visual-section" id="visual-section">Visual Section</a></h2>
<ul>
<li>Default transition when changing rooms -- Transitions are fun to play with. AGS can change what transitions are used to go from room to room.  By default, it fades out the old room and then fades in the new one.  That's ok for most people.  However, it also has the following options:
<ul>
<li>Instant -- Don't transition; just instantly show the new room.</li>
<li>Dissolve -- The old room will dwindle out and disappear and the new room will dwindle in.</li>
<li>BlackBoxOut -- The old room will be engulfed by a black box, and then the new room will appear taking out the black box.  Just go try it.</li>
<li>CrossFade -- The new room will fade in as the old one fades out.</li>
</ul>
</li>
<li>Pixel-perfect click detection -- This is <code>True</code> by default and enables AGS to figure out exactly where the player clicks using the correct point on the mouse cursor.  Setting this to <code>False</code> will cause AGS to draw a rectangle in the area where the mouse was clicked and choosing the closest thing there as the clicked item.  This is good if you want your game to be less exact for some reason.  Like maybe if the mouse cursor was a shotgun for example, and you want the click to be in the general vicinity of a bunch of stuff you want to destroy.</li>
<li>When player interface is disabled, GUIs should -- Sometimes the player has to wait for an event to happen and all controls are disabled (like during a cut scene).  In this case, AGS will cause all controls on any GUIs showing to go gray and become un-clickable.  This behavior can be changed, though, to any of the following:
<ul>
<li>Grey out all their controls -- This is the default.</li>
<li>Hide all their controls -- Buttons and other controls on the GUIs will simply disappear.</li>
<li>Display normally -- Do nothing.  Just leave them be.</li>
<li>Be hidden -- GUIs will run away and hide from the player.</li>
</ul>
</li>
</ul>
<h1><a class="header" href="#colors-1" id="colors-1">Colors</a></h1>
<h2><a class="header" href="#this-section-is-not-done-yet" id="this-section-is-not-done-yet">This section is not done yet.</a></h2>
<h2><a class="header" href="#a-hrefhttpsgithubcomensadiagsbook-target_blankdo-you-want-to-help-us-write-ita" id="a-hrefhttpsgithubcomensadiagsbook-target_blankdo-you-want-to-help-us-write-ita"><a href="https://github.com/ensadi/AGSBook" target="_blank">Do you want to help us write it?</a></a></h2>
<h1><a class="header" href="#mouse-cursors-1" id="mouse-cursors-1">Mouse Cursors</a></h1>
<h2><a class="header" href="#this-section-is-not-done-yet-1" id="this-section-is-not-done-yet-1">This section is not done yet.</a></h2>
<h2><a class="header" href="#a-hrefhttpsgithubcomensadiagsbook-target_blankdo-you-want-to-help-us-write-ita-1" id="a-hrefhttpsgithubcomensadiagsbook-target_blankdo-you-want-to-help-us-write-ita-1"><a href="https://github.com/ensadi/AGSBook" target="_blank">Do you want to help us write it?</a></a></h2>
<h1><a class="header" href="#summary-6" id="summary-6">Summary</a></h1>
<p>AGS has a whole section of the Project Tree devoted to the general settings of your game.  The settings you set here are applied globally to the whole game, and can affect things like the resolution, the name of the game, the developer name and website, as well as a host of other settings.</p>
<h1><a class="header" href="#part-ii---wishing-you-were-here" id="part-ii---wishing-you-were-here">Part II - Wishing You Were Here!</a></h1>
<h1><a class="header" href="#chapter-7---timers-and-randomization" id="chapter-7---timers-and-randomization">Chapter 7 - Timers and Randomization</a></h1>
<p>This chapter is the first in a line of more advanced topics. You should already know enough to create a game now, but what we're going to teach you in Part 2 will make your games even more fantastic.  In this chapter we're going to explore the concepts of timers and randomization.  Timers allow you to do something continuously on a schedule.  Randomization allows you to make things happen randomly; for example, you can make Dork the Duck say something randomly to Foxy when Foxy interacts with him instead of always just quacking.</p>
<h1><a class="header" href="#timers" id="timers">Timers</a></h1>
<p>Can you think of a good place in the game so far to create a timer? We can! In the bathroom, of course!  Confused?  Let's say Foxy wanted to use the bathroom.  As it stands, Foxy can open the door to the bathroom and step in.  When she's done looking around, she exits the bathroom and can close the door behind her.  But what if she wanted to close the door while she's in the bathroom; you know, for whatever she may want to do in there.  And, while she's doing her, ahem, business, we can't be telling her to do anything else, and, most importantly, we can't watch!</p>
<p>The first thing we need to do is to create a way for Foxy to close the door while she's in the bathroom.  Since, most likely, the reason to close the door would be to use the toilet, we should have Foxy close the door when she interacts with the toilet.  Start by creating a hotspot on the toilet to interact with it.</p>
<p>Edit the bathroom by double-clicking <strong>Edit room</strong> under Rooms and Bathroom in the Project Tree.  Choose to view <strong>Hotsposts</strong> and <code>hHotspot1</code> and use the line tool to outline and fill in the toilet as in <a href="part2/chapter7/timers.html#figure71">Figure 7.1</a>. This will create <code>Hotspot 1</code> in the room. Change the hotspot's description to <code>Toilet</code> and name it <code>hToilet</code>.</p>
<p><a name="figure71"></a>
<span><img src="part2/chapter7/../../images/hotspottoilet.png" alt="" /><br><strong>Figure 7.1: Toilet Hotspot</strong></span></p>
<p>There's one more thing we have to add to this room before we go on.  You guessed it, a door.  Remember that the bathroom door is actually part of the Main Hall room and not the bathroom so, in order to be able to close the door while in the bathroom, we have to add a door to this room.  The door picture we used for the Main Hall is too small for this room, but we did create a new image that would fit in our bathroom.</p>
<p>Double-click on <strong>Sprites</strong> in the Project Tree and click on the <strong>Objects</strong> folder. You should see our bathroom door in there.  Add a new object by right-clicking and choosing to import a new sprite from a file. Choose the file named <em>BathroomDoor2.bmp</em> and click the <strong>Import</strong> button to import the whole image. You should see a new door object show up as in <a href="part2/chapter7/timers.html#figure72">Figure 7.2</a>. Our new object is ready to be created.  Go back to editing the bathroom and choose to view <strong>Objects</strong>. Right-click in the room and choose <strong>Place New Object Here</strong>. You should see the familiar blue cup show up.  Click on the cup and modify its properties as in <a href="part2/chapter7/timers.html#figure73">Figure 7.3</a>. Notice that our <code>StartX</code> is 60 and <code>StartY</code> is 3. When Foxy walks into the room the door is open.  Having the <code>StartY</code> set at 3 places the door at the top of the room.  Notice also that the baseline of the door is overridden and set at 198.  In order for the door to appear in front of Foxy the baseline must be higher than Foxy's.  But, in order for the door to appear behind the walk-behind the baseline must be lower than the walk-behind's. The walk-behind's baseline is set at 199, so we made the door's 198, which should always be higher than Foxy's because if she ever walked beyond that she'd leave the room.</p>
<p><a name="figure72"></a>
<span><img src="part2/chapter7/../../images/doorobject2.png" alt="" /><br><strong>Figure 7.2: Added another door object</strong></span></p>
<p><a name="figure73"></a>
<span><img src="part2/chapter7/../../images/doorproperties2.png" alt="" /><br><strong>Figure 7.3: Door Properties</strong></span></p>
<p>One other thing we have to do with the door is make sure it's hidden behind the wall.  We need to extend our walk-behinds for this.  Choose to view <strong>Walk-behinds</strong> and select the first walk-behind, then use the line and fill tools to extend the current walk-behind area to look like <a href="part2/chapter7/timers.html#figure74">Figure 7.4</a>.</p>
<p><a name="figure74"></a>
<span><img src="part2/chapter7/../../images/walkbehindbathroom2.png" alt="" /><br><strong>Figure 7.4: Expanding our walk-behind area to cover the entire wall.</strong></span></p>
<p>Now let's add a function for Foxy interacting with the hotspot.  Select the hotspot and then click the lightning bolt (events) button in the properties box on the right and add a function to the <code>Interact hotspot</code> event by clicking on the ellipses on the right (<a href="part2/chapter7/timers.html#figure75">Figure 7.5</a>). This will create a function called <code>hToilet_Interact()</code> and take you to the script editor.</p>
<p><a name="figure75"></a>
<span><img src="part2/chapter7/../../images/toiletfunction.png" alt="" /><br><strong>Figure 7.5: Create a funtion for interacting with the toilet</strong></span></p>
<p>Edit the script as follows:</p>
<pre><code class="language-agsscript">function hToilet_Interact()
{
  oDoor.Move(oDoor.X, 250, 3, eBlock, eAnywhere);
  Wait(5*40);
  oDoor.Move(oDoor.X, 3, 3, eBlock, eAnywhere);
}
</code></pre>
<p>The Move function should already be familiar to you.  The first thing we do is move the door down to close it.  The last thing we do is move the door back up.  The middle is the interesting part. We call the <code>Wait()</code> function. That function does exactly what it says, it waits.  How long it waits depends on the number we pass in, which should be in game loops.  Since there are 40 game loops a second, we tell it to wait 200 game loops, or 5 seconds. Easy as pi.  Well actually pi is 3.1415 so that would screw everything up.  Don't use pi.</p>
<h2><a class="header" href="#homework-3" id="homework-3">HOMEWORK</a></h2>
<p>Add a toilet flushing sound before the door opens. We made a sound for you to use.</p>
<h1><a class="header" href="#timers-take-2" id="timers-take-2">Timers, Take 2</a></h1>
<p>I guess you can say the <code>Wait()</code> function is a sort of timer. It times how long to pause the game.  But what if we want to do something every once in a while.  Let's say, for instance, that we want to have a flashing red light.  One way to do this would be to have an animated background image, like we did in <a href="part2/chapter7/../../part1/chapter3/animating_bg.html">Chapter 3</a>, but that wouldn't be as much fun (and wouldn't teach you about timers). So, let's create a flashing red light in the Long Room.</p>
<p>We need two new sprites to create a flashing light: one image of the light in the off position, and one image of the light in all of its on-ness glory.  Double-click on <strong>Sprites</strong> in the Project Tree and click on the <strong>Objects</strong> folder. You should see our bathroom door in there.  Add two new objects from the file named <em>RedLight.png</em>. Be sure to import the two lights as separate sprites.  The black one will be the &quot;off&quot; light and the red one will be &quot;on&quot;. Edit the Long Room and add a new object.  Choose the &quot;off&quot; light and then add another new object choosing the &quot;on&quot; light.  Place both objects at postion (157, 23) in the room so that they're on top of each other.  Give them proper names (<code>oOffLight</code> and <code>oOnLight</code> will work) and descriptions and change the &quot;on&quot; light's <code>Visible</code> property to <code>False</code>. We want only the &quot;off&quot; light to be visible at first.</p>
<p>Now for the fun part: Add a function for the room's <code>Repeatedly Execute</code> event. We talked about this event in <a href="part2/chapter7/../../part1/chapter4/npc.html#repeatedly-execute">Chapter 4</a>. If you don't remember how to add it, click on the lightning bolt icon for the room and click the ellipses next to <code>Repeatedly Execute</code>. A new function called <code>room_RepExec()</code> will be created and you should end up in the script editor. Now, find the <code>room_AfterFadeIn()</code> function. In this function we're going to start a new timer that will make the light flash.  Add the following line at the end of the function:</p>
<pre><code class="language-agsscript">SetTimer(1, 40);
</code></pre>
<p>Now find the <code>room_RepExec()</code> function and add the following code to it:</p>
<pre><code class="language-agsscript">function room_RepExec()
{
  if( IsTimerExpired(1)  )
  {
    if( oOffLight.Visible  )
    {
      oOffLight.Visible = false;
      oOnLight.Visible = true;
    }
    else
    {
      oOffLight.Visible = true;
      oOnLight.Visible = false;
    }
    SetTimer(1, 40);
  } 
}
</code></pre>
<p>So, what exactly did we just do?  When the room first loads we started a timer that goes off in one second by calling the <code>SetTimer()</code> function. This function takes a number to use as an ID for the timer and a number that tells it when to go off in game loops.  We chose ID number 1 because we don't have any other timers and because we're number 1, obviously. In the <code>room_RepExec()</code> function, which runs continuously in the background, we check to see if our timer has gone off by calling the <code>IsTimerExpired()</code> function. This function takes a timer ID and returns <code>true</code> if that timer has gone off.  If we determine that our timer has gone off, then we check the status of the &quot;off&quot; light.  (We could check the status of any light.  It doesn't really matter.) If the &quot;off&quot; light object is visible, then the light is off and we need to turn it on by making the &quot;off&quot; light invisible and the &quot;on&quot; light visible, otherwise we do the opposite.  Then we restart our timer.  Simple.  Run the game and go into that room. Pretty cool eh?</p>
<blockquote>
<p><strong>Side Note:</strong> Not only could we have used animated backgrounds to make this work without having to create a timer, but we could also have created one object instead of two.  If we create one object, we would assign two views to it and switch the views instead of making objects appear and disappear.</p>
</blockquote>
<h1><a class="header" href="#time-to-randomize" id="time-to-randomize">Time to Randomize</a></h1>
<p>Blue, sun, television.  Just thought we'd start with a few random words.  Remember what happens when Foxy talks to Dork?  Here's the stimulating conversation that ensues when Foxy interacts with Dork:</p>
<p><strong>Foxy</strong>: Hi!  My name is Foxy.<br>
<strong>Dork</strong>: Quack, quack, quack.<br>
<strong>Foxy</strong>: Oh, I thought you could talk.<br>
<strong>Dork</strong>: Quaaaaaack!<br>
<strong>Foxy</strong>: I feel silly talking to a duck.<br>
<strong>Dork</strong>: Thanks a lot!</p>
<p>The same conversation happens every time.  It would be a lot more pleasurable if Dork said some random remark when Foxy spoke with him.  The current conversation is too precious to get rid of though so what we should do is have the conversation take place the first time Foxy talks to Dork, but then have a random Dorky remark every time after that.</p>
<p>Let's start by making our current conversation happen only once.  Open the global script by finding it in the File menu or by pressing <strong>Ctrl+Shift+G</strong>. Scroll all the way to the bottom and you should see the <code>cDork_Talk()</code> function that we previously added with our delightful conversation.  Remember our good old friend the <code>DoOnceOnly()</code> function? No? Shame on you!  Go back and read about it in <a href="part2/chapter7/../../part1/chapter4/using_inventory.html">Chapter 4</a>. I mean it mister!  Now, put all the code that is already in the <code>cDork_Talk()</code> function in a <code>DoOnceOnly()</code> block as follows:</p>
<pre><code class="language-agsscript">if (Game.DoOnceOnly(&quot;FirstTalkWithDork&quot;) == true)
{
  &lt;Stuff already there goes here&gt;
}
</code></pre>
<p>Now if you run the game and talk to Dork he'll only respond once.  Go and try it while we wait...</p>
<p>Now that Dork will only go through the whole conversation once, let's add some random remarks for him to say for every conversation after the first one.  We're going to just show you the final function and then we'll go through and explain it.  Make the <code>cDork_Talk()</code> function look like the following and notice that the new parts have a &quot;new&quot; comment next to them.</p>
<pre><code class="language-agsscript">function cDork_Talk()
{
  int myRandomNumber; // new
  cFoxyMonk.Walk(cDork.x - 20, cDork.y, eBlock, eWalkableAreas); // new (moved)
  cFoxyMonk.FaceCharacter(cDork); // new (moved)
  if (Game.DoOnceOnly(&quot;FirstTalkWithDork&quot;) == true)
  {
    cFoxyMonk.Say(&quot;Hi!  My name is Foxy.&quot;);
    cDork.Say(&quot;Quack, quack, quack.&quot;);
    cFoxyMonk.Say(&quot;Oh, I thought you could talk.&quot;);
    cDork.Say(&quot;Quaaaaaack!&quot;);
    cFoxyMonk.Say(&quot;I feel silly talking to a duck.&quot;);
    cDork.Say(&quot;Thanks a lot!&quot;);
    cDork.Say(&quot;&amp;1 Quack-quack-quack-quack quack-quack-quack-quack!&quot;);
  }
  else // this whole 'else' block is new
  {
    cFoxyMonk.Say(&quot;Hey there again.&quot;);
    myRandomNumber = Random(4);
    if(myRandomNumber == 0)
    {
      cDork.Say(&quot;Quack, quack and stuff.&quot;);
    }
    else if(myRandomNumber == 1)
    {
      cDork.Say(&quot;I'm a little duck and I like the water.&quot;);
    }
    else if(myRandomNumber == 2)
    {
      cDork.Say(&quot;I wonder if I can fly away from you.&quot;);
    }
    else if(myRandomNumber == 3)
    {
      cDork.Say(&quot;You're a fox and you have wings!!!???? WOW!!!.&quot;);
    }
    else if(myRandomNumber == 4)
    {
      cDork.Say(&quot;The planets will allign soon enough.&quot;);
    }
  }
}
</code></pre>
<p>In order to generate a random message every time Foxy interacts with Dork, the first thing we need to do is generate a random number.  And when we generate this random number, we have to store it somewhere so we can use it later.  That's where the first line comes into play.</p>
<pre><code class="language-agsscript">int myRandomNumber;
</code></pre>
<p>This line declares a variable called <code>myRandomNumber</code> that is of the integer type.  That means the variable can hold a number in it.  Now, notice that we moved the <code>Walk</code> and <code>FaceCharacter</code> functions out of the <code>if</code> block as well.  We did this because no matter what conversation will take place, Foxy will need to walk over to Dork and face him first.</p>
<p>Let's look at the <code>else</code> block now. If we've already gone through the first conversation once with Dork, then the <code>DoOnceOnly()</code> function will return <code>false</code> and the code in the <code>else</code> block will run. In this block three things will happen.  First, Foxy will say hey again to Dork.  Then, a random number between 0 and 4 inclusive will be generated by this line:</p>
<pre><code class="language-agsscript">myRandomNumber = Random(4);
</code></pre>
<p>This will give us 5 possible values (0, 1, 2, 3, 4) that we can use. To get this random number we call the <code>Random()</code> function passing it a maximum.  Since we passed it 4, we will not get a number greater than 4 back.  Now notice what's on the left of the equal sign? That's right! It's our variable.  The <code>Random()</code> function gives us back our random number and we have to store it somewhere or we will lose it.  We put it into our variable <code>myRandomNumber</code>. I'm sure you know that the variable can be named anything you like, but our name is best, so THERE!!</p>
<p>Now that we have a random number between 0 and 4 inclusive stored in our variable, we do the third thing in the <code>else</code> block, and that is to check our random number and choose something for Dork to say based on it.  For that we use an <code>if/else if</code> block.  And that's it!  Save, run, have fun.</p>
<blockquote>
<p><strong>Side Note:</strong> For more information on variables please see <a href="part2/chapter7/../../appendices/scripting.html">Appendix I</a>.</p>
</blockquote>
<h1><a class="header" href="#summary-7" id="summary-7">Summary</a></h1>
<p>In this chapter, we learned about how to create timers and get random numbers.</p>
<ul>
<li><strong>The Wait() Function</strong> The <code>Wait()</code> function allows you to pause the game for a certain amount of time.  It takes game loops as input, which are 40 loops per second.</li>
<li><strong>Timers</strong> You can use the <code>SetTimer()</code> and <code>IsTimerExpired()</code> functions to start a timer and check to see when it goes off.  <code>SetTimer()</code> takes an ID and a number of game loops before it expires, and <code>IsTimerExpired()</code> takes an ID and checks to see if the timer corresponding to that ID has gone off yet.  Remember to reset the timer with <code>SetTimer()</code> if you want to keep it going.</li>
<li><strong>The Random() Function</strong> The <code>Random()</code> function will return a random number between 0 and the number that is passed into it inclusive.  Remember to store that number in an <code>int</code> variable or you will lose it.</li>
</ul>
<h1><a class="header" href="#chapter-8---spoken-dialog" id="chapter-8---spoken-dialog">Chapter 8 - Spoken Dialog</a></h1>
<p>In this chapter we're going to dive into the world of dialogs.  You don't have to have dialogs between characters to have a good game but giving your players the ability to choose what to talk about can greatly enhance the gaming experience.  Wow, that last sentence must have been written by an English major.  Anyway, Dialogs will give your players different choices for responses in conversations.  This will allow the conversation to go in many different directions.  You can even go as far as make different endings or different outcomes depending on what choices the player makes in conversations.  Enough high falloutin' talk.  Let's dive right in.</p>
<h1><a class="header" href="#creating-a-dialog" id="creating-a-dialog">Creating a Dialog</a></h1>
<p>Wouldn't you know it! AGS provides a nice and easy way for us to create dialogs.  Look in the Project Tree and you should see an option for Dialogs.  Open that option and you'll see that there's one dialog already there called <code>dDialog0</code> that has the ID 0. We can use that as our first dialog, so double-click to edit it and the dialog editor will appear as in <a href="part2/chapter8/dialog.html#figure81">Figure 8.1</a>.</p>
<p><a name="figure81"></a>
<span><img src="part2/chapter8/../../images/dialogeditor.png" alt="" /><br><strong>Figure 8.1: The Dialog Editor</strong></span></p>
<p>There are two panes in the dialog editor.  The left pane will show all the different dialog options that you will create, and the right pane will show the actuall dialog that will happen when a dialog option is chosen, which will be in the form of a script file. The best way to understand how this editor works is to use it though, so let's start by creating our first dialog option.</p>
<p>Click the <strong>Create new option</strong> button in the left pane and you will see a text box appear and a new button called <strong>Delete last option</strong> appear.  In the text box type in &quot;<code>So, what's your name?</code>&quot; In the right pane type in &quot;<code>cDork: My name is Dork the Duck</code>&quot; right under the <code>@1</code> and right above the <code>return</code> keyword so it looks like <a href="part2/chapter8/dialog.html#figure82">Figure 8.2</a>.</p>
<p><a name="figure82"></a>
<span><img src="part2/chapter8/../../images/dialog1.png" alt="" /><br><strong>Figure 8.2: Adding the First Dialog Option</strong></span></p>
<blockquote>
<p><strong>Side Note:</strong> The dialog scripting language is NOT the same language that is used in room scripts.</p>
</blockquote>
<p>Let's dissect <a href="part2/chapter8/dialog.html#figure82">Figure 8.2</a> now. In the left pane we have an option that Foxy will be able to choose when this dialog starts.  Next to that option there are two checkboxes that will be checked by default.  The <strong>Show</strong> checkbox means that this option will be visible for the player to choose.  If you hide this option, you can show it later in the script.  One reason to hide options is if they are not relevant yet.  We'll get to that shortly.  The <strong>Say</strong> checkbox means that Foxy should say the words in the &quot;Option text&quot;. So, when a player chooses that option Foxy will say &quot;So, what's your name?&quot; You might want to not say an option if it's something like &quot;End conversation&quot;. We'll explain that shortly as well.</p>
<p>The right pane shows the actual dialog that will happen for each option.  <code>@S</code> is always there and marks the beginning (start) of the dialog script.  Don't put anything before this.  There will be a <strong>@</strong> for each option you create and everything between the <strong>@</strong> and the <code>return</code> will be the dialog that happens when that option is chosen. To have a character say something just put the character's scriptname followed by colon and whatever you want the character to say.  Please remember that the scripts you write in the dialog editor are NOT the same as the scripts you write in the room editor or in the global script.  I know there's a Side Note up there that says this, but it's important that you realize this.  In fact, FROM NOW ON WE WILL REFER TO ROOM AND GLOBAL SCRIPTS AS <strong>AGS SCRIPTS</strong> AND SCRIPTS IN THE DIALOG EDITOR AS <strong>DIALOG SCRIPTS</strong>.</p>
<p>Let's add another option to the dialog.  Click <strong>Create new option</strong> and enter the text &quot;Ok, bye now.&quot;  In the right pane change the <code>return</code> keyword for that option to <code>stop</code> so it looks like <a href="part2/chapter8/dialog.html#figure83">Figure 8.3</a>. </p>
<p><a name="figure83"></a>
<span><img src="part2/chapter8/../../images/dialog2.png" alt="" /><br><strong>Figure 8.3: Adding a Second Dialog Option</strong></span></p>
<p>Now we have two dialog options.  Foxy will be able to choose to ask Dork for his name or say bye and end the conversation. Notice that Option 2 ends with a <code>stop</code> instead of a <code>return</code>. In the dialog script, a <code>return</code> means 'go back to the conversation' and a <code>stop</code> means 'stop the conversation.' So, in order to end the conversation, the player has to choose the 2<sup>nd</sup> option.</p>
<blockquote>
<p><strong>Side Note:</strong> If you don't use the <code>stop</code> keyword you will never be able to get out of the dialog.</p>
</blockquote>
<p>Let's add some more options.  Since the 2<sup>nd</sup> option ends the conversation, it would make the most sense to have that last, so replace Option 2 with the text &quot;<code>So, your name is Dork! How did you get that name?</code>&quot; and uncheck the <strong>Show</strong> checkbox. In the right pane, add the following conversation under the <code>@2</code> symbol.</p>
<pre><code>	cDork: My mom gave it to me.
	cFoxyMonk: Did you have a mean mom?
	cDork: Um, no. Why do you ask?
	cFoxyMonk: Uhh, no reason.
</code></pre>
<p>Change the <code>stop</code> for Option 2 back to a <code>return</code> because we don't want to end the conversation after this option is run.  Add a 3<sup>rd</sup> option with the text &quot;<code>End conversation</code>&quot; and uncheck the <strong>Say</strong> checkbox and check the <strong>Show</strong> checkbox. Change the 3<sup>rd</sup> option's <code>return</code> keyword to a <code>stop</code>. Now let's do a bit of magic.  Go back to the right pane and add the following 2 lines right under Dork's response to Option 1:</p>
<pre><code>	option-off 1
	option-on 2
</code></pre>
<p>It should end up looking like <a href="part2/chapter8/dialog.html#figure84">Figure 8.4</a>.</p>
<p><a name="figure84"></a>
<span><img src="part2/chapter8/../../images/dialog3.png" alt="" /><br><strong>Figure 8.4: 3 Dialog Options with Option Control</strong></span></p>
<p>When this conversation starts, Foxy will have two options to choose from: Option 1 and Option 3 (Option 2 is hidden because <strong>Show</strong> is not checked.) If she chooses Option 3, the conversation will end; however, if she chooses Option 1, she will ask Dork for his name.  He will answer with the response uner the <code>@1</code> and then the script will turn off Option 1 using the <code>option-off 1</code> statement and turn on Option 2 using the <code>option-on 2</code> statement. So, when the conversation resumes, Foxy will still have two options to choose from, except this time they will be Option 2 and Option 3.  Furthermore, since the <strong>Say</strong> checkbox for Option 3 is not checked, Foxy will not say the words 'End conversation' when that option is chosen. Instead, the conversation will simply end.</p>
<p>Let's go ahead and add this dialog into our game.  Open the global script by finding it in the File menu or by pressing <strong>Ctrl+Shift+G</strong>.  Scroll all the way to the bottom and you should see the <code>cDork_Talk()</code> function we previously added.  Go to the bottom of the function and add the line <code>dDialog0.Start();</code> as the last line of the <code>else</code> block. <code>dDialog0</code> is the name of this dialog and the <code>Start()</code> function starts it. This will cause the dialog to start right after Dork mutters a random statement.  One thing about this function that you should know though: The dialog will only start AFTER the function finishes running.  Run the game and go through the conversations with Dork.</p>
<blockquote>
<p><strong>Side Note:</strong> You can play sounds in dialogs the same way you do with speech.  Just add the &amp; sign sign and a number to play the sound you want.  For example, if you record a sound of Dork saying, 'My name is Dork the Duck' and save that as <em>Dork2.wav</em> in the <em>Speech</em> folder of your file system, then you can put &amp;2 right before 'My name is Dork the Duck' to have AGS play that speech file.  The dialog line will change from:<br>
    <code>cDork: My name is Dork the Duck.</code><br>
To:<br>
    <code>cDork: &amp;2 My name is Dork the Duck.</code></p>
</blockquote>
<h1><a class="header" href="#fonts-1" id="fonts-1">Fonts</a></h1>
<h2><a class="header" href="#this-section-is-not-done-yet-2" id="this-section-is-not-done-yet-2">This section is not done yet.</a></h2>
<h2><a class="header" href="#a-hrefhttpsgithubcomensadiagsbook-target_blankdo-you-want-to-help-us-write-ita-2" id="a-hrefhttpsgithubcomensadiagsbook-target_blankdo-you-want-to-help-us-write-ita-2"><a href="https://github.com/ensadi/AGSBook" target="_blank">Do you want to help us write it?</a></a></h2>
<h1><a class="header" href="#ags-scripts-inside-dialog-scripts" id="ags-scripts-inside-dialog-scripts">AGS Scripts inside Dialog Scripts</a></h1>
<p>Are you confused?  Do you find yourself asking the question: How can diolog scripts have AGS scripts inside them?  Well stop being confused my friend because wewill now explain:  Dialog Scripts can have AGS Scripts inside them. It's a simple concept if you think about it.  Sometimes you want a character to actually perform an action during a conversation.  To demonstrate this, let's have Foxy ask Dork if he could get the apple from the tree for her.</p>
<p>tart by adding a new option to our dialog by replacing Option 3 with the text &quot;<code>Hey Dork, can you get that apple from the tree?</code>&quot; and uncheck the <strong>Show</strong> checkbox but check the <strong>Say</strong> checkbox. In the right pane, add the following under the <code>@3</code> symbol.</p>
<pre><code>    cDork: Hmm. I'm not sure. Let me go see.
	    cDork.Walk(107, 144, eBlock, eWalkableAreas);
	    cDork.FaceLocation(cDork.x - 1, cDork.y);
	    Wait(40);
	    cDork.Walk(250, 60, eBlock, eWalkableAreas);
	    cDork.FaceCharacter(cFoxyMonk);
    cDork: No. It's way too far up there. Maybe you could throw something at it.
    cFoxyMonk: Oh ok.
</code></pre>
<p>Now, notice there's indentation in the AGS Script. There has to be a Tab there to let AGS know that what you just typed in should be interpreted as AGS Script and not Dialog Script. Change the <code>stop</code> for Option 3 to <code>return</code> and add a 4<sup>th</sup> option with the text &quot;<code>End conversation</code>&quot; and uncheck the <strong>Say</strong> checkbox and check the <strong>Show</strong> checkbox. Change the 4<sup>th</sup> option's <code>return</code> keyword to <code>stop</code>.</p>
<p>This new option should be turned on with Option 2 after Foxy gets Dork's name.  Add the following in Dork's response to Option 1 right under <code>option-on 2</code>.</p>
<pre><code>	dDialog0.SetOptionState(3, eOptionOn);
</code></pre>
<p>Make sure there's a <strong>tab</strong> in front of that because that's AGS script and not Dialog script.  It should end up looking like <a href="part2/chapter8/ags_in_dialog.html#figure85">Figure 8.5</a>.</p>
<p><a name="figure85"></a>
<span><img src="part2/chapter8/../../images/dialog4.png" alt="" /><br><strong>Figure 8.5: 3 AGS Script Inside Dialog Script</strong></span></p>
<p>So now, Foxy will be able to ask Dork to get the apple for her after she gets his name.  Notice that we used AGS Script to turn Option 3 on instead of Dialog Script using the <code>SetOptionState()</code> function. We only did this to show you that you can do that. But what if Foxy already has the apple...</p>
<h1><a class="header" href="#controlling-dialogs-with-ags-scripts" id="controlling-dialogs-with-ags-scripts">Controlling Dialogs with AGS Scripts</a></h1>
<p>We can use the <code>SetOptionState()</code> function from within AGS Scripts to turn dialog ptions on and off. We will need to do this when Foxy knocks the apple down.  Here's the thought process.  When the game starts, that option needs to be hidden because Foxy can't ask Dork about the apple until she gets his name.  It's rude otherwise.  If Foxy knocks the apple down before talking to Dork, the option doesn't need to come on after she gets his name, or at all. If Foxy talks to Dork before knocking the apple down, then the option needs to come on.  If Foxy knocks the apple down after talking to Dork, the option needs to turn off and not come on again.</p>
<p>Find the function <code>oApple_UseInv()</code> in room 1's script file.  Right above the last line of code, which contains the <code>Display(&quot;Good shot...&quot;)</code> function, put the following line:</p>
<pre><code class="language-agsscript">dDialog0.SetOptionState(3, eOptionOffForever);
</code></pre>
<p>Yes, we did say &quot;Forever.&quot;  This one line alone accomplishes everything we want to do.  If Foxy talks to Dork before getting the apple, the option will come on because of the line <code>dDialog0.SetOptionState(3, eOptionOn);</code> which we put in the Dialog Script. However, that line will have absolutely no effect if Foxy gets the apple before talking to Dork.  In that case, the <code>eOptionOffForever</code> argument that we passed in to the <code>SetOptionState()</code> function garantees that the option does not come on, even if we tell it to.  This saves us from having to use an <code>if/else</code> block to check if Foxy has the apple or not.  Nifty huh?</p>
<h1><a class="header" href="#jumping-between-dialogs" id="jumping-between-dialogs">Jumping Between Dialogs</a></h1>
<p>Depending on your game, you may have just one conversation, like our game does now, or you may have many different conversations.  AGS provides a good way to switch between conversations using the <code>goto-dialog</code> and <code>goto-previous</code> script commands.</p>
<p>Let's add another conversation to our game and see how these commands work.
We'll have Dork tell us more about himself.  Start by adding a new option to our dialog by replacing Option 4 with the text &quot;<code>So, tell me more about yourself.</code>&quot; and uncheck the <strong>Show</strong> checkbox but check the <strong>Say</strong> checkbox. Change the <code>stop</code> for Option 4 to <code>return</code> and add a 5<sup>th</sup> option with the text &quot;<code>End conversation</code>&quot; and uncheck the <strong>Say</strong> checkbox and check the <strong>Show</strong> checkbox. Change the 5<sup>th</sup> option's <code>return</code> keyword to <code>stop</code>. Add <code>option-on 4</code> in the <code>@1</code> section to turn this new option on after getting Dork's name.  In the right pane, replace the <code>return</code> keyword under the <code>@4</code> symbol with the following line.</p>
<pre><code>goto-dialog dAboutDork
</code></pre>
<p>Now, let's create the <code>dAboutDork</code> dialog. Right click on Dialogs in the Project Tree and choose <strong>New Dialog</strong>. This will create a new dialog called <code>dDialog1</code>. Go ahead and look at the Properties Pane and rename that dialog to <code>dAboutDork</code>. The dialog editor should now be open for our new dialog.   Add the following between the <code>@S</code> symbol and the <code>return</code> keyword. </p>
<pre><code>cDork: Well, what would you like to know?
</code></pre>
<p>Anything under the <code>@S</code> symbol will run as soon as the dialog launches.
Create options for the following question:</p>
<ol>
<li>What's your last name?</li>
<li>Where are you from?</li>
<li>Tell me about your family.</li>
<li>Ok thanks</li>
</ol>
<p>Make sure that the <strong>Say</strong> and <strong>Show</strong> checkboxes are checked for all of them.  In the right pane, add the following for each question respectively:</p>
<ol>
<li></li>
</ol>
<pre><code>cDork: My last name is The Duck.
cFoxyMonk: Really? I thought that was your description.
cDork: How many people do you know have descriptions?
cFoxyMonk: Three
cDork: That was unexpected.
cDork: I have a designation.
cFoxyMonk: What? Are you Borg or something?
cDork: Yes, you will be assimilated.
  Wait(40);
cDork: I mean, quack.
option-off 1
return
</code></pre>
<ol start="2">
<li></li>
</ol>
<pre><code>cDork: I come from a land far far away.  I call it Cleveland.
cFoxyMonk: Is that in the Delta Quadrant?
cDork: No, Ohio.
cFoxyMonk: Oh, weak.
option-off 2
return
</code></pre>
<ol start="3">
<li></li>
</ol>
<pre><code>cDork: Resistance is futile.
cFoxyMonk: What?
cDork: Oh nothing. My family is still back in Cleveland.
cFoxyMonk: You have a lot of family in Ohio.
cDork: Oh no, they're all in Cleveland, Delta Quadrant.
cFoxyMonk: Um, ok then.
option-off 3
return
</code></pre>
<ol start="4">
<li></li>
</ol>
<pre><code>goto-previous
</code></pre>
<p>Be sure to indent the <code>Wait()</code> function in the first response because it's AGS Script and not Dialog Script.  As you can see, each time one of the options is chosen it's turned off.  There's no reason to ask the same question over and over again. The last option simply returns to the previous dialog by using the goto-previous Dialog Script command.</p>
<h2><a class="header" href="#jumping-between-dialogs-with-ags-script" id="jumping-between-dialogs-with-ags-script">Jumping Between Dialogs with AGS Script</a></h2>
<p>Analogous to the <code>goto-dialog</code> and <code>goto-previous</code> script commands for switching between dialogs, there are some predefined constant return values that can be used in AGS Scripts that are embedded in Dialog Scripts. The three values available are <code>RUN_DIALOG_GOTO_PREVIOUS</code>, <code>RUN_DIALOG_RETURN</code> and <code>RUN_DIALOG_STOP_DIALOG</code>.  <code>RUN_DIALOG_GOTO_PREVIOUS</code> goes back to the previous dialog just like <code>goto-previous</code> does in Dialog Scripts; <code>RUN_DIALOG_RETURN</code> goes back to the current conversation just like the <code>return</code> keyword does in Dialog Scripts; and <code>RUN_DIALOG_STOP_DIALOG</code> stops the dialog just like the <code>stop</code> keyword would.  These will be easier to understand with an example.</p>
<p>Let's modify Dork's dialog to use one of these return values.  Go to the dialog editor and delete the line &quot;<code>cDork: Well, what would you like to know?</code>&quot; between the <code>@S</code> symbol and the <code>return</code> keyword, and replace it with the following code:</p>
<pre><code class="language-agsscript">if(dAboutDork.GetOptionState(1) == eOptionOff &amp;&amp;
      dAboutDork.GetOptionState(2) == eOptionOff &amp;&amp;
      dAboutDork.GetOptionState(3) == eOptionOff)
{
    cDork.Say(&quot;What else do you want to know? I've already told you everything!&quot;);
    return RUN_DIALOG_GOTO_PREVIOUS;
}
  else
{
    cDork.Say(&quot;Well, what would you like to know?&quot;);
}
</code></pre>
<p>Be <strong>absolutely</strong> sure that the whole block is indented as in <a href="part2/chapter8/jumping_dialogs.html#figure86">Figure 8.6</a>.</p>
<p><a name="figure86"></a>
<span><img src="part2/chapter8/../../images/dialog5.png" alt="" /><br><strong>Figure 8.6: Indenting AGS Script in Dialog Script</strong></span></p>
<p>So, what have we done here?  The <code>if</code> statement will check each of our first 3 options to see if it is on or off.  If all of the first 3 options are turned off, it means that Foxy already asked Dork everything, so Dork tells her he has nothing more to say and we return <code>RUN_DIALOG_GOTO_PREVIOUS</code> to return us to the previous conversation.  If any of the first 3 options is still there, then Dork will say what he said before we made these changes and Foxy will see the available options to ask him.</p>
<h1><a class="header" href="#text-parser-1" id="text-parser-1">Text Parser</a></h1>
<p>A text parser can be used to obtain text input from a player and perform different actions depending on what the player types in.  AGS has a very nice text parser built in that is simple to use and efficient.</p>
<blockquote>
<p><strong>Side Note:</strong> Text parsers can also be used to create a completely text-based games similar to some old games from Sierra like <em>Police Quest</em>.</p>
</blockquote>
<p>To be able to parse text input, AGS will need a list of words that the player can type in.  This task can be daunting, so we're only going to make a simple text parser for our game.  Let's begin by examinig the text parser interface.</p>
<p>uble click on <strong>Text Parser</strong> in the Project Tree and you will be greeted with the text parser editor. Notice that it's already populated with a few words.  There are 4 types of words that we will come across: <code>Ignore</code>, <code>Normal</code>, <code>MatchAnyWord</code>, <code>MatchRestOfInput</code>.</p>
<ul>
<li><code>Ignore</code> words are words you want the parser to just throw away.  If you look at the list already in the parser, you should notice that almost all of them are ignore words like 'a', 'an', 'the', and the like.</li>
<li><code>Normal</code> words are the words you want your game to act upon if a player types them in and in the correct order.  These will be the most important words for the parser.</li>
<li><code>MatchAnyWord</code> words are words that can match to just about anything the player types in.  There's usually only one of these in the text parser and, by default, it's the word 'anyword'.</li>
<li><code>MatchRestOfInput</code> words are words that will match everything beginning at that word to the end of the line.  Again, there's usually only one of these in the parser and, by default, it's the word 'rol', which stands for 'rest of line'.</li>
</ul>
<p>Right-clicking in the words area will bring up a menu of things you can do here, which includes editing a word, adding a synonym for a word, deleting a word, adding a new word, and searching for a word.  Synonyms of words can be added to any of the four types above and deserve a little explanation: let's say there's a duck in your game and the player wants to look at the duck.  The player can type in &quot;<code>look at duck</code>&quot; to get a description.  However, the player could also mistake the duck for a goose (I don't know how that could possibly ever happen though with the awesome sprites we drew of Dork.) So, the player could type in &quot;<code>look at goose.</code>&quot; In this case, we can include &quot;goose&quot; as a synomym for &quot;duck.&quot; We'll include synonyms in our game for practice later.</p>
<p>The first part, and the hardest part, of customizing the text parser is to sit down and come up with every possible word or phrase that you will need in your game.  Then you have to come up with synonyms of the words or phrases.  Well, you guessed it! We've done this job for you.</p>
<p>Let's add a little bit of a fun conversation to our game.  And what better way to do this than to add a new room.  This isn't going to be a room that you can walk around in though.  It's going to be a special type of room.  The main character will not be visible in this room.  It won't have walls or doors or anything room-like.  Let's just do this and then you'll understand.</p>
<h2><a class="header" href="#creating-a-room-that-is-not-a-room" id="creating-a-room-that-is-not-a-room">Creating a room that is not a room</a></h2>
<p>Start by adding a new room to your project by right-clicking on <strong>Rooms</strong> in the Project Tree and choosing <strong>New room</strong> then click <strong>OK</strong> when the dialog box comes up. This should create room 5 for us.  Now, edit room 5 and name it <code>HAL</code> (you'll see why). Change the background by choosing the file named <em>HALRoom.png</em>. As you can see, this room only contains a giant red eye.  If you don't know where a giant red eye comes from, then go watch <em>2001: A Space Odyssey</em>. Now, this part is important: find the property named <code>ShowPlayerCharacter</code> in the Properties Pindow and change its value to <code>False</code>. When Foxy goes into this room, she will not be visible, but she will be able to chat with the giant red eye.</p>
<p>In order for Foxy to chat with the giant red eye, we'll have to give the player a place to type in some text, so we will need to create our first GUI. This will be a quick and dirty GUI to get us going.  We will talk more about making GUIs in a <a href="part2/chapter8/../chapter10/guis.html">later chapter</a>, so don't worry about it if you don't get it completely.</p>
<h2><a class="header" href="#creating-our-first-gui" id="creating-our-first-gui">Creating our first GUI</a></h2>
<p>Start by right-click on <strong>GUIs</strong> in the Project Tree and click on <strong>New GUI</strong>. Name the new GUI <code>gHALTalk</code>. All we need is a place for the player to type in some text and an OK button, so shrink its <code>Height</code> property to <code>30</code> and the Width to <code>300</code>. We also don't want this GUI to show up all the time, so change its <code>Visible</code> property to <code>False</code>. Now if you look at the toolbar, you'll see some buttons that add components to the GUI. Use these buttons to add a text box and a button to the GUI to take up most of the space on it and change the text on the button to  '<code>Talk</code>'. Name the text box <code>txtHAL</code> and the button <code>btnHAL</code>. <a href="part2/chapter8/text_parser.html#figure87">Figure 8.7</a> shows the toolbar buttons (red arrow) and the final result after adding the button and text box.</p>
<p><a name="figure87"></a>
<span><img src="part2/chapter8/../../images/guihal.png" alt="" /><br><strong>Figure 8.7: Our Simple Text Box GUI</strong></span></p>
<p>Since this GUI is going to be used in our new room so Foxy can talk to the giant red eye, we need to make sure it's positioned correctly in that room, and that it actually shows up when Foxy enters the room.  We also want it to disappear when Foxy leaves.  Go back to editing the new room, and add a function for the <code>Enters room after fade-in</code> event and add the following code:</p>
<pre><code class="language-agsscript">function room_AfterFadeIn()
{
  gHALTalk.SetPosition(10, 160);
  gHALTalk.Visible = true;
}
</code></pre>
<p>We set the x positon to 10 to center the box and set the y postion to 160 to place it under the giant red eye, then we make the box visible.  Add a function for the <code>Leaves room</code> event and add the following code:</p>
<pre><code class="language-agsscript">function room_Leave()
{
  gHALTalk.Visible = false;
}
</code></pre>
<p>And there you have it.  When Foxy enters the room, the box shows up and when she leaves, the box disappears.  Only two things left to do: Make a way for Foxy to be able to enter this room and write the text parsing code.  We'll leave the text parsing for last since that's our ultimate objective.  Let's create a way for Foxy to get into this room now.</p>
<h2><a class="header" href="#getting-into-our-not-a-room-room" id="getting-into-our-not-a-room-room">Getting into our not-a-room room</a></h2>
<p>Open the Sprites editor and create a new sub-folder called HAL then import the file named <em>HAL.png</em>. Now edit the Longroom and place a new object on the far wall.  Choose our new HAL sprite for this object and postion it towards the bottom of the wall and centered horizontally.  Name the object <code>oHAL</code>. When finished it should look like <a href="part2/chapter8/text_parser.html#figure88">Figure 8.8</a>.</p>
<p><a name="figure88"></a>
<span><img src="part2/chapter8/../../images/halobject.png" alt="" /><br><strong>Figure 8.8: HAL In The Room</strong></span></p>
<p>For the final part, add a function for the <code>Interact object</code> event on HAL and add the following code to the newly created function:</p>
<pre><code class="language-agsscript">cFoxyMonk.Walk(124, 81, eBlock, eWalkableAreas);
cFoxyMonk.ChangeRoom(5);
</code></pre>
<p>This will make Foxy walk up to the HAL object and then change rooms to the new HAL room.  What this simulates is not changing rooms but walking all the way up to the object and then the player looks through Foxy's eyes.  Now for the fun part: let's talk to the giant red eye.</p>
<h2><a class="header" href="#parsing-text" id="parsing-text">Parsing Text</a></h2>
<p>Go back to the text parser and add the following words by right-clicking and choosing <strong>Add new word</strong>. Once you click <strong>Add</strong>, you can edit the word in the Properties Pane.</p>
<pre><code>hello
what
your
name
</code></pre>
<p>Go back to editing the new <code>gHALTalk</code> GUI and add a function for the <code>OnClick</code> event of the button (click on the button to see its properties and events.) Notice that this function will appear in the global script.  Make the function look like the following:</p>
<pre><code class="language-agsscript">function btnHAL_OnClick(GUIControl *control, MouseButton button)
{
 String input;
 
 input = txtHAL.Text;
 Parser.ParseText(input);
 if (Parser.Said(&quot;hello what your name&quot;))
 {
   Display(&quot;Hello there. I HAL&quot;);
   cFoxyMonk.Say(&quot;You mean you're HAL?&quot;);
   Display(&quot;No, my name is iHal&quot;);
 }
 else if (Parser.Said(&quot;hello&quot;))
 {
   Display(&quot;Hello to you&quot;);
 }
 else if (Parser.Said(&quot;what your name&quot;))
 {
   Display(&quot;i Hal&quot;);
 }
 else
  Display(&quot;say what now?&quot;);
}
</code></pre>
<p>Now, let's dissect this mess:  We first declare a String called <code>input</code>. This string will hold the text that the player types into the GUI.  The text box in our GUI is called <code>txtHAL</code>, so we get the <code>Text</code> property of the text box and place it into the String <code>input</code>. Now that <code>input</code> contains what the player typed in, we call the parser's function <code>ParseText</code> to parse it for us.  Once the parser parses our text, we can have a series of <code>IF/ELSE</code> blocks to check what the player typed in.  As you can see, we check for the string &quot;hello what your name&quot; and leave out ignored words like &quot;is&quot;. Also notice that the parser will get rid of punctuation marks and ignore word case.  The player can enter in &quot;Hello, what is your name&quot; or &quot;hello, what's your name&quot; and it would still work.</p>
<p>Play with that and then come back and add the following words to the text parser:</p>
<pre><code>Can
You
Know
Tell
About
Duck
</code></pre>
<p>Then add a synomym for the word 'duck' by right-clicking it and choosing <strong>Add synomym</strong> from the menu. Type in 'goose' for the synomym and notice that it has the same Word Group number as 'duck'. Now, add two <code>else</code> blocks to the <code>OnClick</code> function like the following:</p>
<pre><code class="language-agsscript">else if (Parser.Said(&quot;what can you tell about duck&quot;))
{
  Display(&quot;I know nothing of noisy birds&quot;);
}
else if (Parser.Said(&quot;tell about duck&quot;))
{
  Display(&quot;I know nothing of noisy birds&quot;);
}
</code></pre>
<p>As you can see, now we can ask iHal about Dork the Duck, but we could also use the word 'goose' since it's a synonym for 'duck'. We can say the following:</p>
<pre><code>What can you tell me about the duck? (with or without the question mark)
What can you tell me about the goose? (with or without the question mark)
What can you tell about duck? (with or without the question mark)
What can you tell about goose? (with or without the question mark)
Tell me about the duck. (with or without the 'me' or the period)
Tell me about the goose. (with or without the 'me' or the period)
</code></pre>
<p>Since iHal will respond the same way for each of these blocks, we should find a way to combine them.  Replace the blocks with the following:</p>
<pre><code class="language-agsscript">else if (Parser.Said(&quot;what,tell [can] [you] [tell] about duck&quot;) )
{
   Display(&quot;I know nothing of noisy birds&quot;);
}
</code></pre>
<p>Let's dissect this code:  We separated 'what' and 'tell' with a comma.  This tells the parser to take either one as the first word.  The comma acts like an 'or' in this case: 'what' or 'tell' will do.  The following three words are in brackets.  This tells the parser that they're optional.  This allows us to be able to ask the same questions as above and have less code.  We can combine the first and third blocks too to make the code look like this:</p>
<pre><code class="language-agsscript">if (Parser.Said(&quot;[hello] what your name&quot;))
{
  Display(&quot;Hello there. I HAL&quot;);
  cFoxyMonk.Say(&quot;You mean you're HAL?&quot;);
  Display(&quot;No, my name is iHal&quot;);
}
else if (Parser.Said(&quot;hello&quot;))
{
  Display(&quot;Hello to you&quot;);
}
else if (Parser.Said(&quot;what,tell [can] [you] [tell] about duck&quot;) )
{
  Display(&quot;I know nothing of noisy birds&quot;);
}
else
 Display(&quot;Say what now?&quot;);
</code></pre>
<p>But what if Foxy said something else after the 'hello'? like &quot;hello, how are you today?&quot; or &quot;hello there you big ugly red thing&quot; and what if we don't care about what comes after the hello unless it's &quot;what your name&quot;. This would be a good place to use the <code>MatchRestOfInput</code> word type. Change the second <code>ELSE/IF</code> to:</p>
<pre><code class="language-agsscript">else if (Parser.Said(&quot;hello rol&quot;))
</code></pre>
<p>This will take anything after the word 'hello' and just ignore it.  So now you can either say &quot;hello, what's your name&quot; or &quot;hello &lt;anything goes here&gt;&quot; and Hal will respond accordingly.</p>
<p>Now, what if we asked Hal about something other than a duck or a goose.  Add one more <code>ELSE/IF</code> statement as follows:</p>
<pre><code class="language-agsscript">else if (Parser.Said(&quot;what,tell [can] [you] [tell] about anyword&quot;) )
{
   Display(&quot;I'm sorry Dave, but I can't tell you that.&quot;);
}
</code></pre>
<p>Put that block right under the similar one asking about the duck.  Notice that the last word is now 'anyword' which is the MatchAnyWord type. So, the text parser will match that to anything we put in there.  Ask Hal to tell you about donuts.</p>
<h2><a class="header" href="#buttoning-things-up" id="buttoning-things-up">Buttoning Things Up</a></h2>
<p>We would say that now you've got the basic idea of the text parser and can create more complicated conversations.  There are just a few things that need to be taken care of though before we can call this finshed:</p>
<ol>
<li>There's no way to exit the Hal room.</li>
<li>We have to use the mouse to click the 'Talk' button.</li>
<li>After talking, what we typed in is still there and we have to delete it to say something else.</li>
</ol>
<p>Let's start with number 1 and go down the list (uh huh). Exiting the room should be simple.  All we have to do is add a 'bye' or 'see you later' option to the conversation and exit the room when that happens.  See the code below for the final full conversation.</p>
<pre><code class="language-agsscript">function btnHAL_OnClick(GUIControl *control, MouseButton button)
{
 String input;
 
 input = txtHAL.Text;
 Parser.ParseText(input);
 if (Parser.Said(&quot;[hello] what your name&quot;))
 {
   Display(&quot;Hello there. I HAL&quot;);
   cFoxyMonk.Say(&quot;You mean you're HAL?&quot;);
   Display(&quot;No, my name is iHal&quot;);
 }
 else if (Parser.Said(&quot;hello rol&quot;))
 {
   Display(&quot;Hello to you&quot;);
 }
 else if (Parser.Said(&quot;what,tell [can] [you] [tell] about duck&quot;) )
 {
   Display(&quot;I know nothing of noisy birds&quot;);
 }
 else if (Parser.Said(&quot;what,tell [can] [you] [tell] about anyword&quot;) )
 {
   Display(&quot;I'm sorry Dave, but I can't tell you that.&quot;);
 }
 else if (Parser.Said(&quot;bye rol&quot;) || Parser.Said(&quot;See you,ya rol&quot;) || Parser.Said(&quot;have,got,gotta [got] go&quot;))
 {
   Display(&quot;Bye Dave&quot;);
   cFoxyMonk.ChangeRoom(4);
 }
 else
  Display(&quot;Say what now?&quot;);
}
</code></pre>
<p>Please note that we also had to add the following words to the text parser:</p>
<pre><code>bye
have
got
go
gotta
later
see
ya
</code></pre>
<p>Now to exit the room we can say any of the following:</p>
<pre><code>Bye
Bye bye
Bye bye now (or anything after 'bye')
See you (and anything after that like 'see you later bro')
See ya (and anything after that)
I have to go
I have got to go
I got to go
Got to go
Have to go
Gotta go
</code></pre>
<p>That's a lot of stuff.  Not bad huh?  Let's move on to the second point.  It could get very annoying to have to click the 'Talk' button to say something.  It would be much easier if you can just hit the <strong>Enter</strong> key to say something.  Adding this event is very simple.  Edit the <code>gHALTalk</code> GUI. Select the text box and look at its events in the Properties Pane.  You'll notice there is only one event called <code>OnActivate</code>. This is the event for the <strong>Enter</strong> key being pressed.  Create a function for this event by clicking the ellipses.  Function <code>txtHAL_OnActivate()</code> will be created. Now create another function called <code>TalkToHal()</code> right above the <code>btnHAL_OnClick()</code> function, and move all of the code inside the <code>btnHAL_OnClick()</code> function into this new function. For the last step, have <code>btnHAL_OnClick()</code> and <code>txtHAL_OnActivate()</code> both call your new <code>TalkToHal()</code> function.</p>
<p>One more thing to tackle and we're done.  Let's clear the text box after <strong>Enter</strong> is hit or the 'Talk' button clicked.  Add the line <code>txtHAL.Text = &quot;&quot;;</code> right under the the line <code>input = txtHAL.Text;</code> in the <code>TalkToHal()</code> function. This will clear the text box after we get what was typed in.  The final code follows:</p>
<pre><code class="language-agsscript">function TalkToHal()
{
 String input;
 
 input = txtHAL.Text;
 txtHAL.Text = &quot;&quot;;
 Parser.ParseText(input);
 if (Parser.Said(&quot;[hello] what your name&quot;))
 {
   Display(&quot;Hello there. I HAL&quot;);
   cFoxyMonk.Say(&quot;You mean you're HAL?&quot;);
   Display(&quot;No, my name is iHal&quot;);
 }
 else if (Parser.Said(&quot;hello rol&quot;))
 {
   Display(&quot;Hello to you&quot;);
 }
 else if (Parser.Said(&quot;what,tell [can] [you] [tell] about duck&quot;) )
 {
   Display(&quot;I know nothing of noisy birds&quot;);
 }
 else if (Parser.Said(&quot;what,tell [can] [you] [tell] about anyword&quot;) )
 {
   Display(&quot;I'm sorry Dave, but I can't tell you that.&quot;);
 }
 else if (Parser.Said(&quot;bye rol&quot;) || Parser.Said(&quot;See you,ya rol&quot;) || Parser.Said(&quot;have,got,gotta [got] go&quot;))
 {
   Display(&quot;Bye Dave&quot;);
   cFoxyMonk.ChangeRoom(4);
 }
 else
  Display(&quot;Say what now?&quot;);
}

function btnHAL_OnClick(GUIControl *control, MouseButton button)
{
 TalkToHal();
}

function txtHAL_OnActivate(GUIControl *control)
{
  TalkToHal();
}
</code></pre>
<h1><a class="header" href="#summary-8" id="summary-8">Summary</a></h1>
<p>You should know better than to talk to yourself.
In this chapter, we learned how to create all kinds of ways to have conversations:</p>
<ul>
<li><strong>Using the Dialog Editor</strong> You can create dialogs easily by using the built-in dialog editor.  You can create different conversation options and turn them on and off using <code>option-on</code> and <code>option-off</code>.</li>
<li><strong>Mixing AGS Scripts and Dialog Scripts</strong> You can put regular AGS Scripts inside of Dialog Scripts by indenting them in.</li>
<li><strong>Controlling dialogs with AGS Scripts</strong> You can control dialogs from any AGS Script by using dialog control functions like <code>Start()</code>, <code>SetOptionState()</code>, and <code>GetOptionState()</code>.</li>
<li><strong>Jumping between dialogs</strong> You can jump between dialogs using <code>goto-dialog</code> and <code>goto-previous</code>.</li>
<li><strong>And, of course, the Text Parser</strong> AGS includes an easy-to-use text parser for making great text-based games.</li>
</ul>
<h1><a class="header" href="#chapter-9---cutscenes" id="chapter-9---cutscenes">Chapter 9 - Cutscenes</a></h1>
<p>In this chapter we're going to learn how to make cutscenes.  A cutscene is a sequence which the player has no control over.  Basically, it's like a little movie that the player watches.  You can use the cutscene to move the story along, introduce new things, show a conversation, or even show credits at the beginning or end of a game.</p>
<h1><a class="header" href="#starting-and-ending-cutscenes" id="starting-and-ending-cutscenes">Starting and Ending Cutscenes</a></h1>
<p>Cutscene basics are not complicated.  AGS provides two functions that are used to start and end a cutscene: <code>StartCutscene()</code> and <code>EndCutscene()</code>.</p>
<p><code>StartCutscene()</code> is used to tell AGS that the following commands are part of a cutscene.  <code>EndCutscene()</code> is used to tell AGS that the cutscene is over, and everything after this is normal game play.  The stuff that's between these two functions will comprise the actual cutscene instructions.</p>
<p>Technically, however, you don't need those two functions to create cutscenes.  Since cutscene instructions are just normal, every day, AGS functions, you can just put the inscturctions for your cutscene somewhere and have it run.  The reason for having those two functions is to allow the player to skip the cutscene if he or she wishes.  Players may want to skip a cutscene if it's an intro for example.  They might not want to watch the same intro every time they play the game.</p>
<p><code>StartCutscene()</code> takes exactly one argument: <code>StartCutscene(CutsceneSkipType)</code>.   The argument <code>CutsceneSkipType</code> can be one of the following:</p>
<ul>
<li><code>eSkipESCOnly</code> -- This option allows the player to skip the cutscene by pressing the ESC key.</li>
<li><code>eSkipAnyKey</code> -- This option allows the player to skip the cutscene by pressing any key.</li>
<li><code>eSkipMouseClick</code> -- This option allows the player to skip the cutscene using a mouse click.</li>
<li><code>eSkipAnyKeyOrMouseClick</code> -- This option combines the previous two.  The player can use any key or use a mouse click to skip the cutscene.</li>
<li><code>eSkipESCOrRightButton</code> -- This option is a combination of the ESC key or the right mouse button.</li>
</ul>
<p>If the player decides to skip the cutscene, AGS will quickly run through all of the instructions that fall between the <code>StartCuscene()</code> and <code>EndCutscene()</code> functions. This point is important:  If the cutscene is skipped, AGS will <strong>not</strong> skip over the instructions between the two functions.  The instructions will actually run, but very very fast.  Furthermore, the <code>EndCutscene()</code> function will return a value of 0 if the player actually watched the whole cutscene, or 1 if the player skipped it.  The return value can be useful if you want to do something different depending on whether the player watched or skipped the cutscene.</p>
<h1><a class="header" href="#creating-a-game-intro-and-end-credits" id="creating-a-game-intro-and-end-credits">Creating a Game Intro and End Credits</a></h1>
<p>Although cutscenes can be placed just about anywhere in a game, the best way to do an intro is to create a new room for it instead of plopping it as part of the game's first room.  Yep, that's right! We're making a new room.  This is going to be a special room though, like the one we made for iHal.</p>
<p>Start by adding a new room to the game.  In our case this is going to be room number 6.  Open the room in the room editor and give it the name <code>Intro</code>. And that's it. We have a room to use as our intro; not much to it.</p>
<p>Since this is the intro room, we will want the main character to start here.  The first room that loads is always the room that is set as the starting room of the main character.</p>
<p>Expand the Characters node in the Project Tree and double-click on <strong>cFoxyMonk</strong> to edit Foxy's character.  Change Foxy's <code>StartingRoom</code> to 6. Running the game now will show the black intro screen and Foxy just standing there.  Since there are no walkable areas, Foxy won't be able to move, and won't be able to travel to another room. But that's ok. We're going to create a cutscene in this room that will move Foxy to room 1 after it plays through.</p>
<h2><a class="header" href="#the-cutscene" id="the-cutscene">The Cutscene</a></h2>
<p>In order to make the cutscene we will use the 'after fade in' function that is available to us in each room.  We'll create a function for the 'after fade in' event and put all of our cutscene code in it.  This way, when the room loads, the function will run and the cutscene will play through.  At the end of the cutscene we will change rooms to room 1.</p>
<p>Go back to editing room 6.  Click the lightning bolt to show the room events and then click the ellipses next to <code>Enters room after fade-in</code> to create the function.  See <a href="part2/chapter9/game_intro.html#figure91">Figure 9.1</a>.</p>
<p><a name="figure91"></a>
<span><img src="part2/chapter9/../../images/afterfadein.png" alt="" /><br><strong>Figure 9.1: Creating the 'after fade in' Function</strong></span></p>
<p>So that we don't forget the very important cutscene functions, let's go ahead and add them in now, and we'll go ahead and add the room change while we're at it.  Make the <code>room_AfterFadeIn()</code> function look like the following:</p>
<pre><code class="language-agsscript">function room_AfterFadeIn()
{
  StartCutscene(eSkipAnyKeyOrMouseClick);
  //TODO: Do cutscene stuff here
  EndCutscene();
  cFoxyMonk.ChangeRoom(1);
}
</code></pre>
<p>As you can see, we start the cutscene and tell it that any key press or mouse click can be used to skip it.  Then we have a comment that reminds us to fill in the good stuff, and then we end the cutscene.  After the cutscene is over, we have Foxy change rooms to room 1 to start the game.  Be sure to put in the change room call after the cutscene is done.</p>
<p>Now for the actual cutscene code, we'll do something simple.  We'll have Foxy introduce the game for us and then start the game.  But, before we do this, save the game, and run it just to see what would happen.  You should see Foxy come up against a black background, which is our <code>Intro</code> room, then fade to room 1; exactly what we need.</p>
<p>Let's have Foxy introduce the game now.  Delete the comment in the code if you wish and add a line for Foxy to say &quot;Hi, I'm Foxy. Welcome to Foxy's Quest!&quot; While we're at it, let's add some actual speech.  Make sure there's a sound file called <em>Foxy1.wav</em> in the <em>Speech</em> folder of your game. We, of course, have one for you, but you can make your own.  Then make the line look like this:</p>
<pre><code class="language-agsscript">cFoxyMonk.Say(&quot;&amp;1 Hi, I'm Foxy. Welcome to Foxy's Quest!&quot;);
</code></pre>
<p>The <code>&amp;1</code> will tell AGS to play the <em>Foxy1.wav</em> file while the speech is displayed. Run this and watch it.  Then run it again and click the mouse or press a button before the speech is done and it should be skipped.  And that is the simplest cutscene in the world.</p>
<h2><a class="header" href="#overlays" id="overlays">Overlays</a></h2>
<p>We'll move away a bit from the cutscene now to introduce overlays.  Since we're making an intro, this would be a good place for it.  Overlays can be either text or graphical and when placed on the screen are always on top of everything else.</p>
<p>Let's create a few overlays to show the game's name and authors on the screen.  The name of the game will be a graphical overlay and the authors' names will be text overlays.</p>
<p>Start by going to the sprites editor and importing the file named <em>GameNameOverlay.png</em>. This is an image we created for the name of the game.  If you don't like it, well, make your own then.  Just remember, it needs to fit the screen.  We created a sub-folder under Sprites named <em>Overlays</em> in which to put the image, just so we can keep everything organized.  Our image was placed in slot 75 in the Sprites editor.  Yours may be different.</p>
<p>Go back to editing the <code>Intro</code> room's script.  Right before Foxy introduces the game, place the following lines:</p>
<pre><code class="language-agsscript">Overlay *ovTitle;
ovTitle = Overlay.CreateGraphical( 0, 10, 75, false );
</code></pre>
<p>And right after Foxy's line place the following lines:</p>
<pre><code class="language-agsscript">Wait(20);
ovTitle.Remove();
</code></pre>
<p>Let's examine what we just did.  The first line we added declares a variable called <code>ovTitle</code> that will hold our overlay. Notice, however, that there's a <code>*</code> before it. The <code>*</code> means that this is a pointer variable.  A pointer variable holds the address of a variable and not the contents of the variable.  If this is all foreign to you, then just remember that when declaring overlay variables, they need a <code>*</code> before them. (See <a href="part2/chapter9/../../appendices/scripting.html">Appendix I</a> for scripting help and the */pointer stuff).</p>
<p>The second line actually creates the graphical overlay.  It places it at x,y coordinates (0,10), uses our newly imported image, which is 75, and sets the transparency to <code>false</code>. This overlay can be referenced by our variable <code>ovTitle</code> now.</p>
<p>The third line is a wait.  We've seen the <code>Wait()</code> function before. This one waits for 20 game cycles, or about 0.5 seconds.  The last line calls the <code>Remove()</code> function of the overlay to remove it.  It's always good to remove your overlays when you're done with them.</p>
<p>Creating the text overlays for the author names is even easier because there are no images to import.  We are, however, going to create a new view for Foxy to make things look neater.  This should be a quick and easy view composed of one loop and one frame.  Right-click on <strong>Views</strong> and choose <strong>New View</strong>. Call it <code>vFMPoint</code>. Create a new loop and then go back to the Sprites editor.  Find the sprite of Foxy pointing.  On ours it's number 49.  Right-click that sprite and assign it to our new view.  That's it.  Now we have a pointing view.</p>
<p>te the text overlays, we're going to declare overlay variables, and then call the <code>CreateTextual()</code> function instead of the <code>CreateGraphical()</code> function. Add the following:</p>
<pre><code class="language-agsscript">Overlay *davesName;
Overlay *georgesName;
davesName = Overlay.CreateTextual( 70, 60, 100, eFontNormal, 10, &quot;David Ensminger&quot; );
georgesName = Overlay.CreateTextual( 190, 60, 100, eFontNormal, 10, &quot;A. G. Madi&quot; );
</code></pre>
<p>The <code>CreateTextual()</code> function is very similar to the graphical one.  It takes and x,y pair for text placement, a size (100), a font (<code>eFontNormal</code>, <code>eFontSpeech</code>, or <code>eFontOutline</code>),  a color code (We used 10 just randomly, but it's a nice color), and the actual text to display.</p>
<p>Let's improve a bit on this cutscene now by making Foxy move around a bit and introduce the game developers.  All the code for this should be familiar to you by now so we'll just show it to you here.  There are three things to note though.  One is the fact that we don't have walkable areas in this room, so we tell Foxy to walk anywhere.  You could make walkable areas instead, but there's just no need in this case.  Two is the fact that we change Foxy's view to that of our newly created pointing view.  This makes Foxy point at the authors' names when she introduces them.  Just don't forget to change it back when you're done with it.  And three is the fact that we bring Foxy back to her starting position when she's done with the introductions.  This is to make sure she starts at that position when the scene changes to room 1.  Of course, there are other ways to do this, but this is the one we chose.</p>
<pre><code class="language-agsscript">function room_AfterFadeIn()
{
  StartCutscene(eSkipAnyKeyOrMouseClick);
  
  Overlay *ovTitle;
  ovTitle = Overlay.CreateGraphical( 0, 10, 75, false );
  
  Overlay *davesName;
  Overlay *georgesName;
  davesName = Overlay.CreateTextual( 70, 60, 100, eFontNormal, 10, &quot;David Ensminger&quot; );
  georgesName = Overlay.CreateTextual( 190, 60, 100, eFontNormal, 10, &quot;A. G. Madi&quot; );

  int x = cFoxyMonk.x;
  int y = cFoxyMonk.y;
  cFoxyMonk.Say(&quot;&amp;1 Hi, I'm Foxy. Welcome to Foxy's Quest!&quot;);
  cFoxyMonk.Walk(110, 120, eBlock, eAnywhere);
  cFoxyMonk.LockView(VFMPOINT);
  Wait(40);
  cFoxyMonk.UnlockView();
  cFoxyMonk.Walk(240, 120, eBlock, eAnywhere);
  cFoxyMonk.LockView(VFMPOINT);
  Wait(40);
  cFoxyMonk.UnlockView();
  cFoxyMonk.Walk(x, y, eBlock, eAnywhere);
  cFoxyMonk.FaceDirection(eDirectionDown);
  Wait(20);
  EndCutscene();
  davesName.Remove();
  georgesName.Remove();
  ovTitle.Remove();
  cFoxyMonk.ChangeRoom(1);
}
</code></pre>
<h2><a class="header" href="#endcutscene" id="endcutscene">EndCutscene()</a></h2>
<p>The <code>EndCutscene()</code> function needs to be examined a little closer since it actually returns a value. If you recall, the function will return a 0 if the player actually watched the entire cutscene and 1 if the player skipped it.  We're going to use this value to yell at the player for skipping our cutscene.</p>
<p>are an integer variable at the top of the intro function and call it <code>iYellAtPlayer</code>:</p>
<pre><code class="language-agsscript">int iYellAtPlayer;
</code></pre>
<p>Change the <code>EndCutScene()</code> line to the following:</p>
<pre><code class="language-agsscript">iYellAtPlayer = EndCutscene();
</code></pre>
<p>Right after that line and before the change room line, add the following:</p>
<pre><code class="language-agsscript">if(iYellAtPlayer == 1)
{
  cFoxyMonk.Say(&quot; What!!??? How dare you not watch my cutscene!!&quot;);
  Wait(20);
  cFoxyMonk.Say(&quot; WELL FINE THEN!&quot;);
  Wait(40);
}
</code></pre>
<p>Now, when you skip the intro, you'll get yelled at.  Notice also that Foxy will end up at the final position no matter when the intro is skipped.  Remember that's because when a player skips a cutscene, AGS actually fast forwards through it and executes every instruction in there really fast.</p>
<h2><a class="header" href="#colors-2" id="colors-2">Colors</a></h2>
<p>Remember the color that we passed in to the <code>Overlay.CreateTextual()</code> function?  Well, there are a lot of colors that you can pass in, and there is an easy way to find those colors.</p>
<p>Look in the Project Tree and you should see a <strong>colours</strong> option. Double-clicking this option will bring up the Colors editor.   We're not going to concern ourselves with creating color, but we are going to use the handy <strong>Colour Finder</strong>, which will be the second tab of the editor, as seen in <a href="part2/chapter9/game_intro.html#figure92">Figure 9.2</a>.</p>
<p><a name="figure92"></a>
<span><img src="part2/chapter9/../../images/colourfinder.png" alt="" /><br><strong>Figure 9.2: Colour Finder</strong></span></p>
<p>There are two ways to find a color to use.  The first way is to play with the Red, Green, Blue sliders until you see a color you like.  Then, you can take the number in the <strong>Colour number</strong> box and plug it into the <code>Overlay.CreateTextual()</code> function. The second way is to click the <strong>Find Colour...</strong> button to bring up the Windows Color dialog box as in: </p>
<p><a name="figure93"></a>
<span><img src="part2/chapter9/../../images/colordialog.png" alt="" /><br><strong>Figure 9.3: Windows Color Dialog</strong></span></p>
<p>You can use this dialog to find the Red, Green, Blue values of a color, then go back to the sliders to set that color and get the number to plug into the <code>Overlay.CreateTextual()</code> function.</p>
<h2><a class="header" href="#end-credits" id="end-credits">End Credits</a></h2>
<p>Since we have an intro, we think it would only be fitting to also have some end credits.  Creating end credits is just as simple as creating an intro.  We will create a new room and put a cutscene in it.  Let's dive right in.</p>
<p>Create a new room and call it <strong>End Credits</strong>. Set the <code>ShowPlayerCharacter</code> option to <code>False</code>, because we don't need to see Foxy when the credits are rolling.  Now, create a function for the room's after fade-in event and create a cutscene in that function.  This is very much just like making the intro.  In the cutscene, we're going to create a text overlay and scroll it up the screen with whatever text we want in it.</p>
<p>The two important things that we need in order to scroll the credits are changing the position of the text overlay and changing the text of the text overlay. To change the position, we set the text overlay's x and y values; to change the text, we call the text overlay's <code>SetText()</code> function.  The <code>SetText()</code> function takes the overlay width, font type, color, and text as parameters.  These are the same parameters that <code>Overlay.CreateTextual()</code> takes except for the x and y coordinates. The code follows:</p>
<pre><code class="language-agsscript">function room_AfterFadeIn()
{
  Overlay *ovTitle;
  Overlay *textScroller;
  int i;
  int j;
  
  StartCutscene(eSkipAnyKeyOrMouseClick);
  textScroller = Overlay.CreateTextual( 120, 200, 100, eFontNormal, 41725, &quot;Foxy's Quest&quot;  );
  i = 0;
  while(i &lt; 5)
  {
    while(textScroller.Y &gt; -30)
    {
      textScroller.Y = textScroller.Y - 1;
      Wait(1);
    }
    if(i == 0)
      textScroller.SetText(100, eFontNormal, 41725, &quot;Written by[David Ensminger[A.G. Madi&quot;);
    else if(i == 1)
      textScroller.SetText(100, eFontNormal, 41725, &quot;Produced by[David Ensminger[A.G. Madi&quot;);
    else if(i == 2)
      textScroller.SetText(100, eFontNormal, 41725, &quot;Directed by[David Ensminger[A.G. Madi&quot;);
    else if(i == 3)
      textScroller.SetText(100, eFontNormal, 41725, &quot;Voiced by[David Ensminger[A.G. Madi[T.J. Madi&quot;);
    textScroller.Y = 200;
    i++;
  }
  EndCutscene();
  textScroller.Remove();
  
  ovTitle = Overlay.CreateGraphical( 0, 10, 80, false  );
  Wait(200);
  ovTitle.Remove();
  
  QuitGame(0);
}
</code></pre>
<p>Let's dissect this code.  The first few lines should be familiar to you.  We declare two overlays; one for the text that we will be scrolling and one for the game's name that we will display at the end of the credits.  We create the text overlay first with the name of the game and set its Y coordinate to 200, which sets it at the bottom of the screen, and, since AGS uses the top left corner of the overlay for the coordinates, this effectively puts the overlay below the screen, and makes it look like it's coming up from below.</p>
<p>Now for some loops, but not the same kind of loops that we did with with sprites back in <a href="part2/chapter9/../../part1/chapter2/index.html">Chapter 2</a>. We're going to create scripting loops.  We haven't done scripting loops before, and technically, we don't have to do them now, but this is a great time to learn them.  Loops enable us to do the same thing multiple times without having to copy and paste the same code over and over again.  AGS gives us the <code>while</code> loop; which allows us to do something <strong>WHILE</strong> something else is true.</p>
<p>We are going to use 2, separate, <code>while</code> loops: One loop will be used to change the text of the overlay, and the other loop will be used to move the overlay up on the screen.   The first loop will run 5 times because we have 5 text overlays that we want to show: The name of the game, 'Written by', 'Produced by', 'Directed by', and 'Voiced by'. So, we set a variable, <code>i</code>, equal to zero to start out and we tell AGS to run the code in the <code>while</code> loop WHILE <code>i</code> is less than 5, and each time through the loop we call <code>i++</code>, which is scripting talk for adding 1 to the <code>i</code> variable. This gives us five loops when <code>i</code> is 0, 1, 2, 3, and 4. As soon as <code>i</code> reaches 5, the <code>while(i &lt; 5)</code> will be <code>false</code> and the loop will end.  By the way, everything between the <code>{</code> and <code>}</code> gets done each time through the loop. So, this outer while loop will scroll the overlay up the screen, change the overlay's text depending on what the <code>i</code> variable is, add 1 to <code>i</code>, and start over.</p>
<p>The second <code>while</code> loop is inside the first and it does the actuall scrolling of the overlay up the screen.  Each time through the loop we subtract 1 from the Y coordinate of the overlay, which moves it up a pixel, and we wait for 1 game loop, so the overlay doesn't just fly up the screen.  (In fact, take the wait out and you won't even see any scrolling because the overlay will move so fast.) We do this while the Y coordinate is grater than -30.  Why -30 you ask; because that way it scrolls completely off the screen and puts a bit of a pause between each subsequent overlay scroll.</p>
<p>You may have noticed that there are <code>[</code> characters in our strings. And, if you already ran the game, you probably know that this tells AGS to put whatever is after the <code>[</code> character on a new line.  Just thought we'd mention that.</p>
<h2><a class="header" href="#just-for-fun" id="just-for-fun">Just For Fun</a></h2>
<p>Just so that we can get to the credits quickly and for a bit of fun, we're going to change the intro so that the user will get sent straight to the credits if the intro is skipped.  Change the code after the call to <code>EndCutscene()</code> in the intro room to the following:</p>
<pre><code class="language-agsscript">if(iYellAtPlayer == 1)
{
  cFoxyMonk.Say(&quot; What!!??? How dare you not watch my cutscene!!&quot;);
  Wait(20);
  cFoxyMonk.Say(&quot; WELL FINE THEN! NO GAME FOR YOU!&quot;);
  Wait(40);
  davesName.Remove();
  georgesName.Remove();
  ovTitle.Remove();
  cFoxyMonk.ChangeRoom(7);
}
else
{
  davesName.Remove();
  georgesName.Remove();
  ovTitle.Remove();
  cFoxyMonk.ChangeRoom(1);
}
</code></pre>
<p>By the way, that's actually very annoying, and we only did it to show you that you can.  Don't do that in a real game or we won't play it!</p>
<h1><a class="header" href="#summary-9" id="summary-9">Summary</a></h1>
<h1><a class="header" href="#chapter-10---advanced-topics" id="chapter-10---advanced-topics">Chapter 10 - Advanced Topics</a></h1>
<h1><a class="header" href="#running-on-non-windows-systems" id="running-on-non-windows-systems">Running on non-Windows Systems</a></h1>
<h1><a class="header" href="#importing-masks-for-walkable-areas-and-walk-behinds" id="importing-masks-for-walkable-areas-and-walk-behinds">Importing masks for walkable areas and walk-behinds</a></h1>
<h1><a class="header" href="#lip-sync-1" id="lip-sync-1">Lip Sync</a></h1>
<h1><a class="header" href="#translations-1" id="translations-1">Translations</a></h1>
<h1><a class="header" href="#modules-and-plug-ins" id="modules-and-plug-ins">Modules and Plug-ins</a></h1>
<h1><a class="header" href="#lighting-1" id="lighting-1">Lighting</a></h1>
<h1><a class="header" href="#guis-1" id="guis-1">GUIs</a></h1>
<h1><a class="header" href="#mirror-effect" id="mirror-effect">Mirror Effect</a></h1>
<h1><a class="header" href="#earthquake" id="earthquake">EARTHQUAKE!!!!!!!!!</a></h1>
<h1><a class="header" href="#easter-eggs---wedding-dress-on-dork-dont-tell-george" id="easter-eggs---wedding-dress-on-dork-dont-tell-george">Easter Eggs - Wedding dress on Dork!!!! (don't tell George)</a></h1>
<h1><a class="header" href="#summary-10" id="summary-10">Summary</a></h1>
<h1><a class="header" href="#glossary" id="glossary">Glossary</a></h1>
<h1><a class="header" href="#bibliography" id="bibliography">Bibliography</a></h1>
<h1><a class="header" href="#index" id="index">Index</a></h1>
<h1><a class="header" href="#i---scripting-concepts-and-basics" id="i---scripting-concepts-and-basics">I - Scripting concepts and basics</a></h1>
<p>[TODO] Talk about needing to use the events lightning bolt to connect events to functions and one can not simply create a function for an even by hand.</p>
<p>[TODO] Pointers</p>
<h1><a class="header" href="#dialog-scripting" id="dialog-scripting">Dialog Scripting</a></h1>
<h1><a class="header" href="#ii---if-we-dont-hit-global-variables-or-even-if-we-do-we-might-need-to-elaborate-here" id="ii---if-we-dont-hit-global-variables-or-even-if-we-do-we-might-need-to-elaborate-here">II - If we don't hit global variables (or even if we do) we might need to elaborate here.</a></h1>
<h1><a class="header" href="#iii---plugins" id="iii---plugins">III - Plugins</a></h1>
<h1><a class="header" href="#feedback" id="feedback">Feedback</a></h1>
<p>You can provide feedback about this book by <a href="https://github.com/ensadi/AGSBook/issues/new">creating a ticket</a> in the Github issue tracker.</p>
<meta http-equiv="refresh" content="0; URL=https://www.adventuregamestudio.co.uk/manual/" />
<meta http-equiv="refresh" content="0; URL=https://github.com/rust-lang/mdbook/" />

                    </main>

                    <nav class="nav-wrapper" aria-label="Page navigation">
                        <!-- Mobile navigation buttons -->
                        

                        

                        <div style="clear: both"></div>
                    </nav>
                </div>
            </div>

            <nav class="nav-wide-wrapper" aria-label="Page navigation">
                

                
            </nav>

        </div>

        

        

        

        
        <script type="text/javascript">
            window.playground_copyable = true;
        </script>
        

        

        
        <script src="elasticlunr.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="mark.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="searcher.js" type="text/javascript" charset="utf-8"></script>
        

        <script src="clipboard.min.js" type="text/javascript" charset="utf-8"></script>
        <script src="highlight.js" type="text/javascript" charset="utf-8"></script>
        <script src="book.js" type="text/javascript" charset="utf-8"></script>

        <!-- Custom JS scripts -->
        

        
        
        <script type="text/javascript">
        window.addEventListener('load', function() {
            window.setTimeout(window.print, 100);
        });
        </script>
        
        

    </body>
</html>
